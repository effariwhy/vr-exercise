!function(e){var t=this.webpackHotUpdate;this.webpackHotUpdate=function(e,n){!function(e,t){if(!E[e]||!v[e])return;for(var n in v[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(p[n]=t[n]);0==--g&&0===b&&w()}(e,n),t&&t(e,n)};var n,i=!0,o="6dcf1d1830b2aa6c18e6",a={},r=[],s=[];function l(e){var t=O[e];if(!t)return T;var i=function(i){return t.hot.active?(O[i]?-1===O[i].parents.indexOf(e)&&O[i].parents.push(e):(r=[e],n=i),-1===t.children.indexOf(i)&&t.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+e),r=[]),T(i)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return T[e]},set:function(t){T[e]=t}}};for(var a in T)Object.prototype.hasOwnProperty.call(T,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(i,a,o(a));return i.e=function(e){return"ready"===u&&h("prepare"),b++,T.e(e).then(t,(function(e){throw t(),e}));function t(){b--,"prepare"===u&&(y[e]||R(e),0===b&&0===g&&w())}},i.t=function(e,t){return 1&t&&(e=i(e)),T.t(e,-2&t)},i}function c(t){var i={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(e,t){if(void 0===e)i._selfAccepted=!0;else if("function"==typeof e)i._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)i._acceptedDependencies[e[n]]=t||function(){};else i._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)i._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)i._declinedDependencies[e[t]]=!0;else i._declinedDependencies[e]=!0},dispose:function(e){i._disposeHandlers.push(e)},addDisposeHandler:function(e){i._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=i._disposeHandlers.indexOf(e);t>=0&&i._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,u){case"idle":(p={})[t]=e[t],h("ready");break;case"ready":F(t);break;case"prepare":case"check":case"dispose":case"apply":(f=f||[]).push(t)}},check:S,apply:M,status:function(e){if(!e)return u;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var t=d.indexOf(e);t>=0&&d.splice(t,1)},data:a[t]};return n=void 0,i}var d=[],u="idle";function h(e){u=e;for(var t=0;t<d.length;t++)d[t].call(null,e)}var m,p,A,f,g=0,b=0,y={},v={},E={};function x(e){return+e+""===e?+e:e}function S(e){if("idle"!==u)throw new Error("check() is only allowed in idle status");return i=e,h("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var i=new XMLHttpRequest,a=T.p+""+o+".hot-update.json";i.open("GET",a,!0),i.timeout=t,i.send(null)}catch(e){return n(e)}i.onreadystatechange=function(){if(4===i.readyState)if(0===i.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===i.status)e();else if(200!==i.status&&304!==i.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(i.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return h(_()?"ready":"idle"),null;v={},y={},E=e.c,A=e.h,h("prepare");var t=new Promise((function(e,t){m={resolve:e,reject:t}}));p={};return R(0),"prepare"===u&&0===b&&0===g&&w(),t}));var t}function R(e){E[e]?(v[e]=!0,g++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=T.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):y[e]=!0}function w(){h("ready");var e=m;if(m=null,e)if(i)Promise.resolve().then((function(){return M(i)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&t.push(x(n));e.resolve(t)}}function M(t){if("ready"!==u)throw new Error("apply() is only allowed in ready status");return function t(i){var s,l,c,d,u;function m(e){for(var t=[e],n={},i=t.map((function(e){return{chain:[e],id:e}}));i.length>0;){var o=i.pop(),a=o.id,r=o.chain;if((d=O[a])&&(!d.hot._selfAccepted||d.hot._selfInvalidated)){if(d.hot._selfDeclined)return{type:"self-declined",chain:r,moduleId:a};if(d.hot._main)return{type:"unaccepted",chain:r,moduleId:a};for(var s=0;s<d.parents.length;s++){var l=d.parents[s],c=O[l];if(c){if(c.hot._declinedDependencies[a])return{type:"declined",chain:r.concat([l]),moduleId:a,parentId:l};-1===t.indexOf(l)&&(c.hot._acceptedDependencies[a]?(n[l]||(n[l]=[]),g(n[l],[a])):(delete n[l],t.push(l),i.push({chain:r.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];-1===e.indexOf(i)&&e.push(i)}}_();var b={},y=[],v={},S=function(){console.warn("[HMR] unexpected require("+w.moduleId+") to disposed module")};for(var R in p)if(Object.prototype.hasOwnProperty.call(p,R)){var w;u=x(R),w=p[R]?m(u):{type:"disposed",moduleId:R};var M=!1,F=!1,C=!1,k="";switch(w.chain&&(k="\nUpdate propagation: "+w.chain.join(" -> ")),w.type){case"self-declined":i.onDeclined&&i.onDeclined(w),i.ignoreDeclined||(M=new Error("Aborted because of self decline: "+w.moduleId+k));break;case"declined":i.onDeclined&&i.onDeclined(w),i.ignoreDeclined||(M=new Error("Aborted because of declined dependency: "+w.moduleId+" in "+w.parentId+k));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(w),i.ignoreUnaccepted||(M=new Error("Aborted because "+u+" is not accepted"+k));break;case"accepted":i.onAccepted&&i.onAccepted(w),F=!0;break;case"disposed":i.onDisposed&&i.onDisposed(w),C=!0;break;default:throw new Error("Unexception type "+w.type)}if(M)return h("abort"),Promise.reject(M);if(F)for(u in v[u]=p[u],g(y,w.outdatedModules),w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,u)&&(b[u]||(b[u]=[]),g(b[u],w.outdatedDependencies[u]));C&&(g(y,[w.moduleId]),v[u]=S)}var D,P=[];for(l=0;l<y.length;l++)u=y[l],O[u]&&O[u].hot._selfAccepted&&v[u]!==S&&!O[u].hot._selfInvalidated&&P.push({module:u,parents:O[u].parents.slice(),errorHandler:O[u].hot._selfAccepted});h("dispose"),Object.keys(E).forEach((function(e){!1===E[e]&&function(e){delete installedChunks[e]}(e)}));var N,j,H=y.slice();for(;H.length>0;)if(u=H.pop(),d=O[u]){var V={},q=d.hot._disposeHandlers;for(c=0;c<q.length;c++)(s=q[c])(V);for(a[u]=V,d.hot.active=!1,delete O[u],delete b[u],c=0;c<d.children.length;c++){var B=O[d.children[c]];B&&((D=B.parents.indexOf(u))>=0&&B.parents.splice(D,1))}}for(u in b)if(Object.prototype.hasOwnProperty.call(b,u)&&(d=O[u]))for(j=b[u],c=0;c<j.length;c++)N=j[c],(D=d.children.indexOf(N))>=0&&d.children.splice(D,1);h("apply"),void 0!==A&&(o=A,A=void 0);for(u in p=void 0,v)Object.prototype.hasOwnProperty.call(v,u)&&(e[u]=v[u]);var L=null;for(u in b)if(Object.prototype.hasOwnProperty.call(b,u)&&(d=O[u])){j=b[u];var I=[];for(l=0;l<j.length;l++)if(N=j[l],s=d.hot._acceptedDependencies[N]){if(-1!==I.indexOf(s))continue;I.push(s)}for(l=0;l<I.length;l++){s=I[l];try{s(j)}catch(e){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:u,dependencyId:j[l],error:e}),i.ignoreErrored||L||(L=e)}}}for(l=0;l<P.length;l++){var z=P[l];u=z.module,r=z.parents,n=u;try{T(u)}catch(e){if("function"==typeof z.errorHandler)try{z.errorHandler(e)}catch(t){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:t,originalError:e}),i.ignoreErrored||L||(L=t),L||(L=e)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:u,error:e}),i.ignoreErrored||L||(L=e)}}if(L)return h("fail"),Promise.reject(L);if(f)return t(i).then((function(e){return y.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return h("idle"),new Promise((function(e){e(y)}))}(t=t||{})}function _(){if(f)return p||(p={}),f.forEach(F),f=void 0,!0}function F(t){Object.prototype.hasOwnProperty.call(p,t)||(p[t]=e[t])}var O={};function T(t){if(O[t])return O[t].exports;var n=O[t]={i:t,l:!1,exports:{},hot:c(t),parents:(s=r,r=[],s),children:[]};return e[t].call(n.exports,n,n.exports,l(t)),n.l=!0,n.exports}T.m=e,T.c=O,T.d=function(e,t,n){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},T.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(1&t&&(e=T(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(T.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)T.d(n,i,function(t){return e[t]}.bind(null,i));return n},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T.h=function(){return o},l(35)(T.s=35)}([function(e,t){const n={OFF:"#111",WHITE:"#f0f0f0",DARKRED:"#5A354B",RED:"#f971c3",BRIGHTRED:"#ffd3ee",DARKBLUE:"#2B4D4C",BLUE:"#6ff9ea",BRIGHTBLUE:"#d7fdf9",YELLOW:"#fff568",UI_ACCENT:"#08bfa2",UI_ACCENT2:"#f01978"};n.schemes={default:{name:"Super Medium",off:"#111",primary:n.RED,primarybright:n.BRIGHTRED,secondary:n.BLUE,secondarybright:n.BRIGHTBLUE,tertiary:n.YELLOW},blue:{name:"Star Warrior",off:"#111",primary:"#1e4482",primarybright:"#0B4BB3",secondary:"#c27727",secondarybright:"#FFD840",tertiary:"#d7fdf9"},purple:{name:"Galactic Royal",off:"#111",primary:"#6A39B3",primarybright:"#B685FF",secondary:"#FAF239",secondarybright:"#FFFC9E",tertiary:"#50FFF2"},green:{name:"Space Joker",off:"#111",primary:"#779E37",primarybright:"#C0FF59",secondary:"#6A39B3",secondarybright:"#B685FF",tertiary:"#FAFAFA"},yellow:{name:"Solar Flare",off:"#111",primary:"#C2C04C",primarybright:"#FAF761",secondary:"#E03A3E",secondarybright:"#FA7578",tertiary:"#278ECC"},red:{name:"Trail Blazer",off:"#111",primary:"#E03A3E",primarybright:"#FA7578",secondary:"#DADADA",secondarybright:"#EFEFEF",tertiary:"#666"},rgb:{name:"Mint Choco",off:"#111",primary:"#34eb89",primarYBRIGht:"#40fb95",secondary:"#34ebd8",secondarybright:"#40fbeA",tertiary:"#eb3434"},cheetah:{name:"Cheetah SoL",off:"#111",primary:"#c27727",primarYBright:"#e68319",secondary:"#635c54",secondarybright:"#8a857f",tertiary:"#ebebeb"},black:{name:"Ash Nova",off:"#111",primary:"#555",primarybright:"#808080",secondary:"#FFF",secondarybright:"#FFF",tertiary:"#B8B8B8"}},n.options=Object.keys(n.schemes),"undefined"==typeof localStorage?n.initial="default":n.initial=n.schemes[localStorage.getItem("colorScheme")||"default"],e.exports=n},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,,function(e,t){var n;e.exports.getS3FileUrl=function(e,t){return`https://effariwhy.github.io/dance/${e}-${t}?v=2`},console.line=(n={},function(e,t,i,o){o=o||"#FFF",n[i=i||"default"]||(n[i]=document.createElement("a-entity"),n[i].setAttribute("line","color",o||"#FFF"),n[i].setAttribute("id",i),AFRAME.scenes[0].appendChild(n[i])),n[i].setAttribute("line","start",e.clone()),n[i].setAttribute("line","end",t.clone())}),console.vec3=function(){const e={},t={primitive:"box",width:.05,height:.05,depth:.05},n={shader:"flat"};return function(i,o,a){a=a||"#FFF",e[o=o||"default"]||(e[o]=document.createElement("a-entity"),n.color=a||"#FFF",e[o].setAttribute("geometry",t),e[o].setAttribute("material",n),e[o].setAttribute("id",o),e[o].setAttribute("text",{align:"center",value:o,side:"double"}),AFRAME.scenes[0].appendChild(e[o])),e[o].object3D.position.copy(i)}}()},function(e,t){e.exports="varying vec2 uvs;\nvarying float distance;\nvoid main() {\n  uvs.xy = uv.xy;\n  distance = length((modelMatrix * vec4(position, 1.0)).xyz - cameraPosition);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvarying float distance;\nuniform sampler2D src;\nuniform vec3 color;\n\nvoid main() {\n  float alpha = texture2D(src, uvs).a;\n  alpha *= 1.0 - clamp(distance / 40.0, 0.0, 1.0);\n  gl_FragColor = vec4(color, alpha);\n}\n"},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"BEAT_ANTICIPATION_TIME",(function(){return a})),n.d(t,"BEAT_PRELOAD_TIME",(function(){return r})),n.d(t,"PUNCH_OFFSET",(function(){return s})),n.d(t,"SWORD_OFFSET",(function(){return l}));n(6);let i=AFRAME.utils.getUrlParameter("skip")||0;i=parseInt(i,10);const o=AFRAME.utils.getUrlParameter("debugmines"),a=1.1,r=1.1,s=.5,l=1.5,c=AFRAME.utils.device.isMobile(),d=c?2e3:3500,u=c?7500:1e4;function h(e,t){return e._time-t._time}if(AFRAME.registerComponent("beat-generator",{dependencies:["stage-colors"],schema:{challengeId:{type:"string"},gameMode:{type:"string"},difficulty:{type:"string"},beatmapCharacteristic:{type:"string"},has3DOFVR:{default:!1},hasSongLoadError:{default:!1},isPlaying:{default:!1},isZipFetching:{default:!1},menuSelectedChallengeId:{type:"string"},songDuration:{type:"number"},speed:{type:"number"}},orientationsHumanized:["up","down","left","right","upleft","upright","downleft","downright"],horizontalPositions:[-.75,-.25,.25,.75],horizontalPositionsHumanized:{0:"left",1:"middleleft",2:"middleright",3:"right"},positionHumanized:{topLeft:{layer:2,index:0},topCenterLeft:{layer:2,index:1},topCenterRight:{layer:2,index:2},topRight:{layer:2,index:3},middleLeft:{layer:1,index:0},middleCenterLeft:{layer:1,index:1},middleCenterRight:{layer:1,index:2},middleRight:{layer:1,index:3},bottomLeft:{layer:0,index:0},bottomCenterLeft:{layer:0,index:1},bottomCenterRight:{layer:0,index:2},bottomRight:{layer:0,index:3}},verticalPositionsHumanized:{0:"bottom",1:"middle",2:"top"},init:function(){this.audioAnalyserEl=document.getElementById("audioanalyser"),this.beatContainer=document.getElementById("beatContainer"),this.beats=null,this.beatData=null,this.beatDataProcessed=!1,this.preloadTime=0,this.songTime=void 0,this.bpm=void 0,this.curve=null,this.curveEl=document.getElementById("curve"),this.curveFollowRigEl=document.getElementById("curveFollowRig"),this.tube=document.getElementById("tube"),this.index={events:0,notes:0,obstacles:0},this.wallContainer=document.getElementById("wallContainer"),this.leftStageLasers=document.getElementById("leftStageLasers"),this.rightStageLasers=document.getElementById("rightStageLasers"),this.stageColors=this.el.components["stage-colors"],this.el.addEventListener("cleargame",this.onClearGame.bind(this)),this.el.addEventListener("gamemenurestart",this.onRestart.bind(this)),this.el.addEventListener("ziploaderend",e=>{this.beats=e.detail.beats,this.data.challengeId&&!this.data.hasSongLoadError&&(this.beatData=this.beats[this.data.beatmapCharacteristic+"-"+this.data.difficulty],this.processBeats())})},play:function(){this.playerHeight=document.querySelector("[player-height]").components["player-height"]},update:function(e){const t=this.data;e.challengeId!==t.challengeId&&t.challengeId&&(this.index.events=0,this.index.notes=0,this.index.obstacles=0,this.data.isZipFetching||!this.beats||this.data.hasSongLoadError||(this.beatData=this.beats[this.data.beatmapCharacteristic+"-"+this.data.difficulty],this.processBeats()),this.curveEl.components.supercurve.generateCurve(t.speed*t.songDuration),this.curve=this.curveEl.components.supercurve.curve)},processBeats:function(){if(this.data.hasSongLoadError)return;this.songTime=0,this.preloadTime=0,this.beatData._events.sort(h),this.beatData._obstacles.sort(h),this.beatData._notes.sort(h),this.bpm=this.beatData._beatsPerMinute,this.beatData._obstacles.length>256&&(this.beatData._obstacles=[]);const e=this.beatData._events;if(e.length&&e[0]._time<0)for(let t=0;e[t]._time<0;t++)this.generateEvent(e[t]);this.beatDataProcessed=!0,console.log("[beat-generator] Finished processing beat data.")},tick:function(e,t){if(!this.data.isPlaying||!this.data.challengeId||!this.beatData)return;let n;const o=this.el.components.song;if(void 0===this.preloadTime){if(!o.isAudioPlaying)return;n=1e3*o.getCurrentTime()+i}else n=this.preloadTime;this.beatData._beatsPerMinute;const a=6e4/this.beatData._beatsPerMinute,s=this.beatData._notes;for(let e=this.index.notes;e<s.length;++e)n+d>s[e]._time*a&&(this.generateBeat(s[e]),this.index.notes++);if("ride"!==this.data.gameMode){const e=this.beatData._obstacles;for(let t=this.index.obstacles;t<e.length;++t)n+u>=e[t]._time*a&&(this.generateWall(e[t]),this.index.obstacles++)}const l=this.beatData._events;for(let e=this.index.events;e<l.length;++e)n>=l[e]._time*a&&(this.generateEvent(l[e]),this.index.events++);void 0!==this.preloadTime&&(this.preloadTime>=1e3*r?(this.el.sceneEl.emit("beatloaderpreloadfinish",null,!1),this.preloadTime=void 0):this.preloadTime+=t)},generateBeat:function(e,t){const n=this.data;let i;o&&(e._type=3);let a=8===e._cutDirection?"dot":"arrow";if(0===e._type?i="red":1===e._type?i="blue":(a="mine",i=void 0),n.has3DOFVR&&"viewer"!==n.gameMode&&"ride"!==n.gameMode&&"red"===i)return;(AFRAME.utils.getUrlParameter("dot")||"punch"===n.gameMode)&&(a="dot");const r=this.requestBeat(a,i);r&&(r.components.beat||r.components.plume?this.setupBeat(r,e):setTimeout(()=>{this.setupBeat(r,e)}))},setupBeat:function(e,t){const n=this.data,i=this.orientationsHumanized[t._cutDirection],o=this.horizontalPositionsHumanized[t._lineIndex]||"left",r=this.verticalPositionsHumanized[t._lineLayer]||"middle",c=(("classic"===this.data.gameMode?l:s)/n.speed+a)/n.songDuration,d=1e3*n.songDuration,u=6e4/this.beatData._beatsPerMinute,h=t._time*u/d+c,m=this.el.systems["render-order"].order.beats+1-h;"ride"===n.gameMode?(e.components.plume.onGenerate(h,o,r,this.playerHeight.beatOffset),e.setAttribute("render-order",m)):(e.components.beat.onGenerate(h,o,r,i,this.playerHeight.beatOffset),e.components.beat.blockEl.object3D.renderOrder=m),e.play()},generateWall:function(e){this.data;const t=this.el.sceneEl.components.pool__wall.requestEntity();t&&(t.components.wall?this.setupWall(t,e):setTimeout(()=>{this.setupWall(t,e)}))},setupWall:function(e,t){const n=this.data;if(n.has3DOFVR&&"viewer"!==n.gameMode)return;const i=t._duration/this.bpm*60,o=this.horizontalPositionsHumanized[t._lineIndex]||"none",r=1===t._type,s=i*n.speed,l=t._width/2,c=a/n.songDuration,d=1e3*n.songDuration,u=6e4/this.beatData._beatsPerMinute,h=t._time*u/d+c,m=s/this.curveEl.components.supercurve.length;e.components.wall.onGenerate(h,o,l,s,r,h+m),e.play(),e.object3D.renderOrder=this.el.systems["render-order"].order.beats+1-(h+m)},generateEvent:function(e){switch(e._type){case 0:this.stageColors.setColor("bg",e._value),this.stageColors.setColorInstant("moon",e._value);break;case 1:this.stageColors.setColorInstant("stars",e._value);break;case 2:this.stageColors.setColor("curveeven",e._value);break;case 3:this.stageColors.setColor("curveodd",e._value);break;case 4:this.stageColors.setColor("floor",e._value);break;case 8:case 9:this.tube.emit("pulse",null,!1);break;case 12:this.stageColors.setColor("leftglow",e._value);break;case 13:this.stageColors.setColor("rightglow",e._value)}},requestBeat:function(e,t){let n="pool__beat-"+e;"ride"===this.data.gameMode&&(n="pool__plume-"+e),"mine"!==e&&t&&(n+="-"+t);const i=this.el.sceneEl.components[n];if(i)return i.requestEntity();console.warn("Pool "+n+" unavailable")},onClearGame:function(){this.preloadTime=0,this.index.events=0,this.index.notes=0,this.index.obstacles=0;for(let e=0;e<this.beatContainer.children.length;e++){const t=this.beatContainer.children[e];t.object3D.position.set(0,0,-9999),t.components.beat&&t.components.beat.returnToPool()}for(let e=0;e<this.wallContainer.children.length;e++){const t=this.wallContainer.children[e];t.object3D.position.set(0,-9999,0),t.components.wall&&t.components.wall.returnToPool()}},onRestart:function(){const e=this.data;this.curveEl.components.supercurve.generateCurve(e.speed*e.songDuration),this.curve=this.curveEl.components.supercurve.curve}}),window.AFRAME){const t=["beat-generator"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},function(e,t,n){var i=n(184);(e.exports=n(185)(!1)).push([e.i,"html {\n  background: #000;\n}\n\n#vrButton {\n  position: absolute;\n  background: url("+i(n(186))+") no-repeat;\n  background-size: cover;\n  border: 0;\n  cursor: pointer;\n  right: 20px;\n  bottom: 20px;\n  text-decoration: none;\n  z-index: 9999999;\n  width: 84px;\n  height: 47px;\n}\n\n#vrButton.a-hidden {\n  visibility: hidden;\n}\n\n#vrButton:active {\n  border: 0;\n}\n\n#vrButton:hover {\n  background-position: 0 -50.5px;\n}\n\n#vrButton p {\n  bottom: 45px;\n  color: #FFF;\n  font-size: 12px;\n  font-family: monospace;\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  position: relative;\n}\n\n.a-loader-title {\n  animation: loaderTitle 1s infinite alternate;\n  color: rgba(0,0,0,0);\n  background: none;\n  background-image: url("+i(n(187))+');\n  height: 36.2vh;\n  background-repeat: no-repeat;\n  background-position: center;\n  margin-top: 0;\n  background-size: contain;\n}\n\n@keyframes loaderTitle {\n  0% { opacity: 1; }\n  50% { opacity: 0.8; }\n  100% { opacity: 1; }\n}\n\n#subscribeForm {\n  background: rgba(0, 0, 0, 0.75);\n  box-shadow: 0px 0 1px #888;\n  bottom: 0;\n  color: #FAFAFA;\n  font-family: monospace;\n  height: 100px;\n  left: 0;\n  margin: 0;\n  min-width: 400px;\n  padding: 5px 20px 0 5px;\n  position: fixed;\n  text-align: center;\n  z-index: 9999999;\n}\n\n#subscribeForm h2 {\n  font-size: 16px;\n  font-weight: 300;\n}\n\n#subscribeForm #subscribeClose {\n  cursor: pointer;\n  font-size: 26px;\n  font-weight: 600;\n  position: absolute;\n  top: 0;\n  right: 5px;\n}\n\ninput[type="email"] {\n  background: #FAFAFA;\n  border: 0;\n  border-radius: 5px;\n  color: $gray;\n  height: 40px;\n  padding-left: 20px;\n  margin-right: 10px;\n  max-width: 480px;\n  text-transform: uppercase;\n  vertical-align: middle;\n  width: 50%;\n}\n\nbutton {\n  border: 0;\n  background: #FF74b8;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #FAFAFA;\n  text-transform: uppercase;\n  transition: .1s all;\n  padding: 11px 20px;\n  vertical-align: middle;\n}\n\nbutton:hover {\n  background: #FF94C8;\n}\n',""])},,,function(e,t,n){"use strict";n.r(t);var i=n(14);n(0),new THREE.Object3D,new THREE.Box3,new THREE.Box3;const o=2*Math.PI,a=(r=1.33,s=.5,e=>1-function(e,t){function n(e,t,n){return Math.min(Math.max(e,t),n)}const i=n(e||1,1,10),o=n(t||.5,.1,2);return e=>0===e||1===e?e:-i*Math.pow(2,10*(e-1))*Math.sin((e-1-o/(2*Math.PI)*Math.asin(1/i))*(2*Math.PI)/o)}(r,s)(1-e));var r,s;const l={once:!0},c=!!AFRAME.utils.getUrlParameter("synctest"),d=(new THREE.Object3D,new THREE.Vector3,"mine"),u={up:new THREE.Vector3(0,1,0),down:new THREE.Vector3(0,-1,0),left:new THREE.Vector3(-1,0,0),right:new THREE.Vector3(1,0,0),upleft:new THREE.Vector3(-1,1,0).normalize(),upright:new THREE.Vector3(1,1,0).normalize(),downleft:new THREE.Vector3(-1,-1,0).normalize(),downright:new THREE.Vector3(1,-1,0).normalize()},h={arrowblue:"blueBeatObjTemplate",arrowred:"redBeatObjTemplate",dotblue:"dotBlueObjTemplate",dotred:"dotRedObjTemplate",mine:"mineObjTemplate"},m={right:"blue",left:"red"},p={right:0,upright:45,up:90,upleft:135,left:180,downleft:225,down:270,downright:315},A={classic:.48,punch:.35,ride:.4};AFRAME.registerComponent("beat-system",{schema:{gameMode:{default:"classic",oneOf:["classic","punch","ride"]},hasVR:{default:!1},inVR:{default:!1},isLoading:{default:!1},isPlaying:{default:!1}},init:function(){this.beats=[],this.beatsToCheck=[],this.blades=[],this.fists=[],this.weapons=null,this.bladeEls=this.el.sceneEl.querySelectorAll("a-entity[blade]"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.punchEls=this.el.sceneEl.querySelectorAll("a-entity[punch]"),this.curveEl=document.getElementById("curve"),this.size=A[this.data.gameMode],this.supercurveFollow=null},play:function(){for(let e=0;e<2;e++)this.blades.push(this.bladeEls[e].components.blade),this.fists.push(this.punchEls[e].components.punch);this.supercurve=this.curveEl.components.supercurve,this.supercurveFollow=this.curveFollowRig.components["supercurve-follow"]},update:function(e){this.size=A[this.data.gameMode],e.isLoading&&!this.data.isLoading&&(this.updateBeatPositioning(),this.weaponOffset="classic"===this.data.gameMode?1.15*i.SWORD_OFFSET:i.PUNCH_OFFSET,this.weaponOffset=this.weaponOffset/this.supercurve.curve.getLength()),e.gameMode!==this.data.gameMode&&(this.weapons="classic"===this.data.gameMode?this.blades:this.fists)},tick:function(e,t){if(!this.data.isPlaying||"ride"===this.data.gameMode)return;const n=this.beatsToCheck,i=(this.supercurve.curve,this.supercurveFollow.songProgress);n.length=0;for(let e=0;e<this.beats.length;e++){const t=this.beats[e];if(t.destroyed)continue;if(i<t.songPosition-this.weaponOffset)continue;let o=!0;for(let e=0;e<n.length&&(t.horizontalPosition===n[e].horizontalPosition&&t.verticalPosition===n[e].verticalPosition&&t.songPosition>n[e].songPosition&&(o=!1),o);e++);o&&n.push(t)}if(this.weapons[0].tickBeatSystem(e,t),this.weapons[1].tickBeatSystem(e,t),n.length)for(let e=0;e<n.length;e++)!c&&this.data.hasVR||n[e].data.type===d?this.checkCollision(n[e],this.weapons[0],this.weapons[1]):n[e].autoHit(this.weapons[0].el)},checkCollision:function(e,t,n){if(e.data.type===d)return t.checkCollision(e)?void e.onHit(t.el):void(n.checkCollision(e)&&e.onHit(n.el));const i=m[t.el.dataset.hand]===e.data.color?t:n;if(i.checkCollision(e))return void e.onHit(i.el);const o=i===t?n:t;if(o.checkCollision(e)){if("classic"===this.data.gameMode&&o.strokeSpeed<15)return;if("punch"===this.data.gameMode&&o.speed<2)return;e.onHit(o.el,!0),e.destroyBeat(o.el,!1)}},horizontalPositions:{},verticalPositions:{},updateBeatPositioning:function(){const e={classic:.95,ride:.95,punch:1.2};return function(){const t=this.data.gameMode,n=this.horizontalPositions,i=this.verticalPositions,o=this.el.sceneEl.camera.el.object3D.position.y-1.6,a=A[t],r="classic"===t?a:1.2*a;n.left=-1.5*r,n.middleleft=-.5*r,n.middle=r,n.middleright=.5*r,n.right=1.5*r;const s=e[t],l=a;i.bottom=Math.max(.4,s+o),i.middle=Math.max(.4+l,s+l+o),i.top=Math.max(.4+2*l,s+2*l+o)}}(),registerBeat:function(e){this.beats.push(e)},unregisterBeat:function(e){this.beats.splice(this.beats.indexOf(e),1)}}),AFRAME.registerComponent("beat",{schema:{color:{default:"red",oneOf:["red","blue"]},debug:{default:!1},type:{default:"arrow",oneOf:["arrow","dot",d]}},init:function(){this.bbox=null,this.beatSystem=this.el.sceneEl.components["beat-system"],this.broken=null,this.brokenPoolName=void 0,this.destroyed=!1,this.hitEventDetail={},this.poolName=void 0,this.returnToPoolTimer=1e3,this.rotationAxis=new THREE.Vector3,this.superCutIdx=0,this.startPositionZ=void 0,this.warmupTime=0,this.weaponColors={right:"blue",left:"red"},this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.mineParticles=document.getElementById("mineParticles"),this.rigContainer=document.getElementById("rigContainer"),this.superCuts=document.querySelectorAll(".superCutFx"),this.verticalPositions=this.beatSystem.verticalPositions,this.explodeEventDetail={beatDirection:"",color:this.data.color,correctHit:!1,direction:new THREE.Vector3,gameMode:"",position:new THREE.Vector3,rotation:new THREE.Euler},this.blockEl=document.createElement("a-entity"),this.blockEl.setAttribute("mixin","beatBlock"),this.el.appendChild(this.blockEl),this.initMesh(),this.data.type===d?this.poolName="pool__beat-mine":this.poolName=`pool__beat-${this.data.type}-${this.data.color}`},tick:function(e,t){const n=this.el;this.data;if(this.queueBeatHitEvent?(n.sceneEl.emit("beathit",this.queueBeatHitEvent,!0),this.queueBeatHitEvent=null):this.queueBeatWrongEvent&&(n.sceneEl.emit("beatwrong",null,!0),this.queueBeatWrongEvent=null),this.destroyed)return this.returnToPoolTimer-=t,void(this.returnToPoolTimer<=0&&this.returnToPool());if(this.warmupTime<2e3){const e=a(this.warmupTime/2e3);n.object3D.rotation.y=this.rotationStart+e*this.rotationChange,n.object3D.position.y=this.positionStart+e*this.positionChange,this.warmupTime+=t}const i="mine"===this.data.type?.25:1.25;n.object3D.position.z-i>this.curveFollowRig.object3D.position.z&&(this.returnToPool(),this.missHit())},onGenerate:function(e,t,n,i,a){const r=this.data,s=this.el;this.beatSystem.registerBeat(this);const l=A[this.beatSystem.data.gameMode]*(1/.29);if(this.blockEl.object3D.scale.set(l,l,l),i=i||"down",this.cutDirection=i,this.horizontalPosition=t,this.verticalPosition=n,this.songPosition=e,!this.blockEl)return void console.warn("Unable to generate beat. blockEl was undefined.");this.blockEl.object3D.visible=!0,this.destroyed=!1,s.object3D.visible=!0,this.warmupTime=0;const c=this.curveEl.components.supercurve;c.getPointAt(e,s.object3D.position),c.alignToCurve(e,s.object3D),s.object3D.position.x+=this.beatSystem.horizontalPositions[t],"dot"!==r.type&&(s.object3D.rotation.z=THREE.Math.degToRad(p[i])),this.rotationStart=s.object3D.rotation.y,this.rotationChange=o,Math.random>.5&&(this.rotationChange*=-1);s.object3D.position.y-=.5,this.positionStart=s.object3D.position.y,this.positionChange=this.verticalPositions[n]+.5+a},initMesh:function(){const e=this.blockEl,t=(this.el,this.data.type);!function e(t,n){if(!f[n]){const i=document.getElementById(n);if(!i.getObject3D("mesh"))return void i.addEventListener("object3dset",i=>{"mesh"===i.detail.type&&e(t,n)},l);f[n]=i.getObject3D("mesh").children[0].geometry}f[n]&&(t.getObject3D("mesh")||t.setObject3D("mesh",new THREE.Mesh),t.getObject3D("mesh").geometry=f[n])}(e,h["mine"!==t?`${t}${this.data.color}`:t]),e.setAttribute("materials","name","beat");const n=e.getObject3D("mesh");n.geometry.computeBoundingBox(),this.bbox=n.geometry.boundingBox,"mine"===this.data.type&&this.bbox.expandByScalar(-.25)},wrongHit:function(){this.destroyed=!0,this.queueBeatWrongEvent=!0},missHit:function(){this.data.type!==d&&this.el.sceneEl.emit("beatmiss",null,!0)},destroyBeat:function(e,t){this.data;const n=this.explodeEventDetail,i=this.rigContainer.object3D;let o;if(this.blockEl.object3D.visible=!1,this.destroyed=!0,this.returnToPoolTimer=1e3,n.beatDirection=this.cutDirection,n.color=this.data.color,n.correctHit=t,n.gameMode=this.beatSystem.data.gameMode,n.position.copy(this.el.object3D.position),i.worldToLocal(n.position),this.data.type===d)o="pool__beat-broken-mine";else{o=`pool__${"classic"===this.beatSystem.data.gameMode?"beat":"punch"}-broken-${this.data.color}`,"dot"===this.data.type&&(o+="-dot")}this.broken=this.el.sceneEl.components[o].requestEntity(),this.broken&&this.broken.emit("explode",this.explodeEventDetail,!1),"classic"===this.beatSystem.data.gameMode&&t&&e.components.trail.pulse()},returnToPool:function(){this.beatSystem.unregisterBeat(this),this.el.object3D.position.set(0,0,-9999),this.el.object3D.visible=!1,this.el.sceneEl.components[this.poolName].returnEntity(this.el)},onHit:function(e,t){const n=this.data;try{e.components.haptics__beat.pulse()}catch(e){console.log(e)}if(this.el.parentNode.components["beat-hit-sound"].playSound(this.el,this.cutDirection),t)this.wrongHit();else{if(n.type===d)return this.destroyBeat(e,!1),void this.el.sceneEl.emit("minehit",null,!0);if("classic"===this.beatSystem.data.gameMode){let t=0;if("arrow"===n.type){if(t=e.components.blade.strokeDirectionVector.dot(u[this.cutDirection]),t<.625)return this.destroyBeat(e,!1),void this.wrongHit()}return this.destroyBeat(e,!0),void this.calculateScoreBlade(e,t)}"punch"===this.beatSystem.data.gameMode&&(this.destroyBeat(e,!0),this.calculateScorePunch(e))}},score:function(e,t){const n=this.el,i=this.hitEventDetail;e=10*Math.ceil(parseInt(e,10)/10),i.percent=t,i.score=e,this.queueBeatHitEvent=i,t>=100&&(this.superCuts[this.superCutIdx].components.supercutfx.createSuperCut(n.object3D,this.data.color),this.superCutIdx=(this.superCutIdx+1)%this.superCuts.length)},calculateScoreBlade:function(e,t){const n=e.components.blade.strokeSpeed,i=e.components.blade.strokeSpeed/10*30;let o;o=n<=10?Math.min(i,30):g(b(n,10,25),10,25,30,50);let a=Math.min(i,30);"dot"===this.data.type?(o+=70,a+=70):(o+=70*t,a+=t>.97?70:70*t),this.score(o,a)},calculateScorePunch:function(e){const t=e.components.punch.speed,n=t/1.5*40;let i;i=t<=1.5?60+Math.min(n,40):60+g(b(t,1.5,6),1.5,6,40,70);const o=60+Math.min(n,40);this.score(i,o)},autoHit:function(e){const t=this.el;this.destroyBeat(e,Math.random()<.9),t.parentNode.components["beat-hit-sound"].playSound(t,this.cutDirection);const n=this.hitEventDetail;n.percent=100,n.score=100,this.queueBeatHitEvent=n}});const f={};function g(e,t,n,i,o){return i+(o-i)*(e-t)/(n-t)}function b(e,t,n){return Math.min(Math.max(e,t),n)}if(window.AFRAME){const t=["beat-system","beat"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="#define T time * 0.06\nvarying vec2 uvs;\nuniform float time;\nuniform float thickness;\nvoid main() {\n  uvs.xy = uv.xy;\n  vec3 pos = position;\n\n  pos.x *= thickness + sin(T) * ((0.1 + uv.x) * 16.0 + uv.y * 4.9) * thickness * 0.005;\n  pos.z *= thickness + cos(T) * ((0.1 + uv.x) * 13.0 + uv.y * 14.9) * thickness * 0.005;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform vec3 color;\nuniform float time;\n\n#define T time * 0.04\n\nvoid main() {\n  vec2 uv = uvs;\n  uv += T * 0.05;\n  vec3 col = texture2D(src, uv).xyz;\n  float core = step(0.125, uvs.x);\n  gl_FragColor = vec4(col * color, mix(1.0, 0.07, core));\n}"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform vec3 color;\nuniform float time;\n\n#define T time * 0.03\n\nvoid main() {\n  vec3 col = texture2D(src, uvs * vec2(1.0, 0.7) + vec2(T * 0.01, T * 0.05)).xyz;\n  gl_FragColor = vec4(col * color, 0.4 * uvs.y);\n}\n"},function(e,t){e.exports=function(e){if(e.converted)return e;e.map&&(e=e.map),e.version=e.versions[0].hash;e.directDownload=e.versions[0].downloadURL,e.coverURL="https://beatproxy.b-cdn.net/"+e.versions[0].coverURL.split("/")[3];let t=e.versions[0].diffs;e.metadata.characteristics={};for(const n of t)void 0===e.metadata.characteristics[n.characteristic]&&(e.metadata.characteristics[n.characteristic]={}),e.metadata.characteristics[n.characteristic][n.difficulty]=n;return e.metadata.characteristics=JSON.stringify(e.metadata.characteristics),e.converted=!0,e}},,,,,,,,,,,,function(e,t,n){function i(e){e.keys().forEach(e)}console.time=()=>{},console.timeEnd=()=>{},n(36),n(37),n(38),n(39),n(40),n(41),n(43),n(44),AFRAME.log=()=>{},n(46),n(48),n(49),n(50),n(51),n(52),i(n(53)),i(n(179)),n(183),n(190),e.hot.accept(),document.addEventListener("DOMContentLoaded",()=>{!function(){const e=document.querySelector("form");if(!e)return;if(localStorage.getItem("subscribeClosed")){const t=e.parentNode;return void t.parentNode.removeChild(t)}document.getElementById("subscribeClose").addEventListener("click",()=>{const t=e.parentNode;t.parentNode.removeChild(t),localStorage.setItem("subscribeClosed",!0)});const t=e.querySelector(".submit"),n=e.querySelector('input[type="email"]'),i=document.querySelector("#subscribeForm > h2");let o="";i&&(o=i.innerHTML);e.addEventListener("submit",e=>{e.preventDefault();const n=new XMLHttpRequest;let o="http://localhost:5000/mail/subscribe";return o="https://supermedium.com/mail/subscribe",n.open("POST",o),n.addEventListener("load",()=>{200!==parseInt(n.status,10)&&(window.location.href="https://supermedium/subscribe/"),t&&(t.disabled=!0,t.innerHTML="Subscribed!"),i&&(i.innerHTML="Successfully subscribed, thank you!")}),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify({email:document.querySelector('[name="email"]').value,source:"moonrider"})),!1}),t&&n.addEventListener("keydown",()=>{t.hasAttribute("disabled")&&(t.innerHTML="Subscribe",t.removeAttribute("disabled")),i&&o&&(i.innerHTML=o)})}()}),"http:"!==window.location.protocol||window.location.host.startsWith("localhost")||window.location.replace("https:"+location.href.substring(location.protocol.length))},function(e,t){THREE.BufferGeometryUtils={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var i=t.array,o=n.position.array,a=n.normal.array,r=n.uv.array,s=o.length/3;void 0===n.tangent&&e.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*s),4));for(var l=n.tangent.array,c=[],d=[],u=0;u<s;u++)c[u]=new THREE.Vector3,d[u]=new THREE.Vector3;var h=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,A=new THREE.Vector2,f=new THREE.Vector2,g=new THREE.Vector2,b=new THREE.Vector3,y=new THREE.Vector3,v=e.groups;0===v.length&&(v=[{start:0,count:i.length}]);for(var E=0,x=v.length;E<x;++E)for(var S=D=(k=v[E]).start,R=D+k.count;S<R;S+=3)P(i[S+0],i[S+1],i[S+2]);var w,M,_,F=new THREE.Vector3,O=new THREE.Vector3,T=new THREE.Vector3,C=new THREE.Vector3;for(E=0,x=v.length;E<x;++E){var k,D;for(S=D=(k=v[E]).start,R=D+k.count;S<R;S+=3)N(i[S+0]),N(i[S+1]),N(i[S+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function P(e,t,n){h.fromArray(o,3*e),m.fromArray(o,3*t),p.fromArray(o,3*n),A.fromArray(r,2*e),f.fromArray(r,2*t),g.fromArray(r,2*n);var i=m.x-h.x,a=p.x-h.x,s=m.y-h.y,l=p.y-h.y,u=m.z-h.z,v=p.z-h.z,E=f.x-A.x,x=g.x-A.x,S=f.y-A.y,R=g.y-A.y,w=1/(E*R-x*S);b.set((R*i-S*a)*w,(R*s-S*l)*w,(R*u-S*v)*w),y.set((E*a-x*i)*w,(E*l-x*s)*w,(E*v-x*u)*w),c[e].add(b),c[t].add(b),c[n].add(b),d[e].add(y),d[t].add(y),d[n].add(y)}function N(e){T.fromArray(a,3*e),C.copy(T),M=c[e],F.copy(M),F.sub(T.multiplyScalar(T.dot(M))).normalize(),O.crossVectors(C,M),_=O.dot(d[e]),w=_<0?-1:1,l[4*e]=F.x,l[4*e+1]=F.y,l[4*e+2]=F.z,l[4*e+3]=w}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),o=new Set(Object.keys(e[0].morphAttributes)),a={},r={},s=new THREE.BufferGeometry,l=0,c=0;c<e.length;++c){var d=e[c];if(n!==(null!==d.index))return null;for(var u in d.attributes){if(!i.has(u))return null;void 0===a[u]&&(a[u]=[]),a[u].push(d.attributes[u])}for(var u in d.morphAttributes){if(!o.has(u))return null;void 0===r[u]&&(r[u]=[]),r[u].push(d.morphAttributes[u])}if(s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(d.userData),t){var h;if(n)h=d.index.count;else{if(void 0===d.attributes.position)return null;h=d.attributes.position.count}s.addGroup(l,h,c),l+=h}}if(n){var m=0,p=[];for(c=0;c<e.length;++c){var A=e[c].index;if(m>0){A=A.clone();for(var f=0;f<A.count;++f)A.setX(f,A.getX(f)+m)}p.push(A),m+=e[c].attributes.position.count}var g=this.mergeBufferAttributes(p);if(!g)return null;s.index=g}for(var u in a){var b=this.mergeBufferAttributes(a[u]);if(!b)return null;s.addAttribute(u,b)}for(var u in r){var y=r[u][0].length;if(0===y)break;s.morphAttributes=s.morphAttributes||{},s.morphAttributes[u]=[];for(c=0;c<y;++c){var v=[];for(f=0;f<r[u].length;++f)v.push(r[u][f][c]);var E=this.mergeBufferAttributes(v);if(!E)return null;s.morphAttributes[u].push(E)}}return s},mergeBufferAttributes:function(e){for(var t,n,i,o=0,a=0;a<e.length;++a){var r=e[a];if(r.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=r.array.constructor),t!==r.array.constructor)return null;if(void 0===n&&(n=r.itemSize),n!==r.itemSize)return null;if(void 0===i&&(i=r.normalized),i!==r.normalized)return null;o+=r.array.length}for(var s=new t(o),l=0,c=0;c<e.length;++c)s.set(e[c].array,l),l+=e[c].array.length;return new THREE.BufferAttribute(s,n,i)},toTrianglesDrawMode:function(e,t){if(t===THREE.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===THREE.TriangleFanDrawMode||t===THREE.TriangleStripDrawMode){var n=e.getIndex();if(null===n){var i=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<o.count;a++)i.push(a);e.setIndex(i),n=e.getIndex()}var r=n.count-2,s=[];if(t===THREE.TriangleFanDrawMode)for(a=1;a<=r;a++)s.push(n.getX(0)),s.push(n.getX(a)),s.push(n.getX(a+1));else for(a=0;a<r;a++)a%2==0?(s.push(n.getX(a)),s.push(n.getX(a+1)),s.push(n.getX(a+2))):(s.push(n.getX(a+2)),s.push(n.getX(a+1)),s.push(n.getX(a)));s.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(s),l.clearGroups(),l}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}}},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");const n={childList:!0,attributes:!0,subtree:!0};AFRAME.registerComponent("aabb-collider",{schema:{collideNonVisible:{default:!1},debug:{default:!1},enabled:{default:!0},interval:{default:80},objects:{default:""}},init:function(){this.centerDifferenceVec3=new THREE.Vector3,this.clearedIntersectedEls=[],this.closestIntersectedEl=null,this.boundingBox=new THREE.Box3,this.boxCenter=new THREE.Vector3,this.boxHelper=new THREE.BoxHelper,this.boxMax=new THREE.Vector3,this.boxMin=new THREE.Vector3,this.hitClosestClearEventDetail={},this.hitClosestEventDetail={},this.intersectedEls=[],this.objectEls=[],this.newIntersectedEls=[],this.prevCheckTime=void 0,this.previousIntersectedEls=[],this.setDirty=this.setDirty.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.hitStartEventDetail={intersectedEls:this.newIntersectedEls}},play:function(){this.observer.observe(this.el.sceneEl,n),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty)},remove:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},tick:function(e){const t=this.boundingBox,n=this.centerDifferenceVec3,i=this.clearedIntersectedEls,o=this.el,a=this.intersectedEls,r=this.newIntersectedEls,s=this.objectEls,l=this.prevCheckTime,c=this.previousIntersectedEls;let d,u,h;if(this.data.enabled&&!(l&&e-l<this.data.interval)){for(this.prevCheckTime=e,this.dirty&&this.refreshObjects(),t.setFromObject(o.object3D),this.boxMin.copy(t.min),this.boxMax.copy(t.max),t.getCenter(this.boxCenter),this.data.debug&&(this.boxHelper.setFromObject(o.object3D),this.boxHelper.parent||o.sceneEl.object3D.add(this.boxHelper)),function(e,t){e.length=0;for(let n=0;n<t.length;n++)e[n]=t[n]}(c,a),a.length=0,h=0;h<s.length;h++)if(s[h]!==this.el)if(this.data.collideNonVisible||s[h].getAttribute("visible"))this.isIntersecting(s[h])&&a.push(s[h]);else if(this.data.debug){const e=s[h].object3D.boxHelper;e&&(o.sceneEl.object3D.remove(e),s[h].object3D.boxHelper=null)}for(r.length=0,h=0;h<a.length;h++)-1===c.indexOf(a[h])&&r.push(a[h]);for(i.length=0,h=0;h<c.length;h++)-1===a.indexOf(c[h])&&(c[h].hasAttribute("aabb-collider")||c[h].emit("hitend"),i.push(c[h]));for(h=0;h<r.length;h++)r[h]!==this.el&&(r[h].hasAttribute("aabb-collider")||r[h].emit("hitstart"));for(h=0;h<a.length;h++)a[h]!==this.el&&(n.copy(a[h].object3D.boundingBoxCenter).sub(this.boxCenter),(void 0===d||n.length()<d)&&(d=n.length(),u=a[h]));!a.length&&this.closestIntersectedEl?(this.hitClosestClearEventDetail.el=this.closestIntersectedEl,this.closestIntersectedEl.emit("hitclosestclear"),this.closestIntersectedEl=null,o.emit("hitclosestclear",this.hitClosestClearEventDetail)):u!==this.closestIntersectedEl&&(this.closestIntersectedEl&&(this.hitClosestClearEventDetail.el=this.closestIntersectedEl,this.closestIntersectedEl.emit("hitclosestclear",this.hitClosestClearEventDetail)),u&&(u.emit("hitclosest"),this.closestIntersectedEl=u,this.hitClosestEventDetail.el=u,o.emit("hitclosest",this.hitClosestEventDetail))),i.length&&o.emit("hitend"),r.length&&o.emit("hitstart",this.hitStartEventDetail)}},isIntersecting:function(){const e=new THREE.Box3;return function(t){let n;t.dataset.aabbColliderDynamic&&(e.setFromObject(t.object3D),n=e,t.object3D.boundingBoxCenter=t.object3D.boundingBoxCenter||new THREE.Vector3,n.getCenter(t.object3D.boundingBoxCenter)),t.dataset.aabbColliderDynamic||(t.object3D.aabbBox||(t.object3D.aabbBox=(new THREE.Box3).setFromObject(t.object3D),t.object3D.boundingBoxCenter=new THREE.Vector3,t.object3D.aabbBox.getCenter(t.object3D.boundingBoxCenter)),n=t.object3D.aabbBox),this.data.debug&&(t.object3D.boxHelper||(t.object3D.boxHelper=new THREE.BoxHelper(t.object3D,new THREE.Color(Math.random(),Math.random(),Math.random())),t.sceneEl.object3D.add(t.object3D.boxHelper)),t.object3D.boxHelper.setFromObject(t.object3D));const i=n.min,o=n.max;return this.boxMin.x<=o.x&&this.boxMax.x>=i.x&&this.boxMin.y<=o.y&&this.boxMax.y>=i.y&&this.boxMin.z<=o.z&&this.boxMax.z>=i.z}}(),setDirty:function(){this.dirty=!0},refreshObjects:function(){const e=this.data;this.objectEls=e.objects?this.el.sceneEl.querySelectorAll(e.objects):this.el.sceneEl.children,this.dirty=!1}})},function(e,t){var n=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];function i(e,t,i,o){const a=1/o,r=1/i;return n[0].set(a*t,r*e+r),n[1].set(a*t,r*e),n[2].set(a*t+a,r*e),n[3].set(a*t+a,r*e+r),n}AFRAME.registerComponent("atlas-uvs",{dependencies:["geometry"],schema:{totalColumns:{type:"int",default:1},totalRows:{type:"int",default:1},column:{type:"int",default:1},row:{type:"int",default:1}},update:function(){const e=this.data,t=i(e.row-1,e.column-1,e.totalRows,e.totalColumns),n=this.el.getObject3D("mesh").geometry;n.faceVertexUvs[0][0][0].copy(t[0]),n.faceVertexUvs[0][0][1].copy(t[1]),n.faceVertexUvs[0][0][2].copy(t[3]),n.faceVertexUvs[0][1][0].copy(t[1]),n.faceVertexUvs[0][1][1].copy(t[2]),n.faceVertexUvs[0][1][2].copy(t[3]),n.uvsNeedUpdate=!0}}),AFRAME.registerComponent("dynamic-texture-atlas",{schema:{canvasId:{default:"dynamicAtlas"},canvasHeight:{default:1024},canvasWidth:{default:1024},debug:{default:!1},numColumns:{default:8},numRows:{default:8}},multiple:!0,init:function(){const e=this.canvas=document.createElement("canvas");e.id=this.data.canvasId,e.height=this.data.canvasHeight,e.width=this.data.canvasWidth,this.ctx=e.getContext("2d"),document.body.appendChild(e),this.data.debug&&(e.style.left=0,e.style.top=0,e.style.position="fixed",e.style.zIndex=9999999999)},drawTexture:function(e,t,n,o,a){const r=this.canvas,s=this.data;e.complete||(e.onload=()=>{this.drawTexture(e,t,n)});const l=a||r.height/s.numRows,c=o||r.width/s.numColumns;return this.ctx.drawImage(e,c*t,c*n,c,l),i(t,n,s.numRows,s.numColumns)}}),e.exports.getGridUvs=i},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var n={};AFRAME.registerComponent("audioanalyser",{schema:{buffer:{default:!1},beatDetectionDecay:{default:.99},beatDetectionMinVolume:{default:15},beatDetectionThrottle:{default:250},cache:{default:!1},enabled:{default:!0},enableBeatDetection:{default:!0},enableLevels:{default:!0},enableWaveform:{default:!0},enableVolume:{default:!0},fftSize:{default:2048},smoothingTimeConstant:{default:.8},src:{parse:function(e){return e.constructor!==String?e:e.startsWith("#")||e.startsWith(".")?document.querySelector(e):e}},unique:{default:!1}},init:function(){this.audioEl=null,this.levels=null,this.waveform=null,this.volume=0,this.xhr=null,this.initContext()},update:function(e){var t=this.analyser,n=this.data;e.fftSize===n.fftSize&&e.smoothingTimeConstant===n.smoothingTimeConstant||(t.fftSize=n.fftSize,t.smoothingTimeConstant=n.smoothingTimeConstant,this.levels=new Uint8Array(t.frequencyBinCount),this.waveform=new Uint8Array(t.fftSize)),n.src&&this.refreshSource()},tick:function(e,t){var n,i=this.data;if(i.enabled){if((i.enableLevels||i.enableVolume)&&this.analyser.getByteFrequencyData(this.levels),i.enableWaveform&&this.analyser.getByteTimeDomainData(this.waveform),i.enableVolume||i.enableBeatDetection){for(var o=0,a=0;a<this.levels.length;a++)o+=this.levels[a];this.volume=o/this.levels.length}i.enableBeatDetection&&(n=this.volume,this.beatCutOff||(this.beatCutOff=n),n>this.beatCutOff&&n>this.data.beatDetectionMinVolume?(this.el.emit("audioanalyserbeat",null,!1),this.beatCutOff=1.5*n,this.beatTime=0):this.beatTime<=this.data.beatDetectionThrottle?this.beatTime+=t:(this.beatCutOff*=this.data.beatDetectionDecay,this.beatCutOff=Math.max(this.beatCutOff,this.data.beatDetectionMinVolume)))}},initContext:function(){var e,t=this.data;this.context=new(window.webkitAudioContext||window.AudioContext),e=this.analyser=this.context.createAnalyser(),(this.gainNode=this.context.createGain()).connect(e),e.connect(this.context.destination),e.fftSize=t.fftSize,e.smoothingTimeConstant=t.smoothingTimeConstant,this.levels=new Uint8Array(e.frequencyBinCount),this.waveform=new Uint8Array(e.fftSize)},refreshSource:function(){this.analyser;var e=this.data;e.buffer&&e.src.constructor===String?this.getBufferSource().then(e=>{this.source=e,this.source.connect(this.gainNode)}):(this.source=this.getMediaSource(),this.source.connect(this.gainNode))},suspendContext:function(){this.context.suspend()},resumeContext:function(){this.context.resume()},fetchAudioBuffer:function(e){return n[e]?n[e].constructor===Promise?n[e]:Promise.resolve(n[e]):(this.data.cache||Object.keys(n).forEach((function(e){delete n[e]})),n[e]=new Promise(t=>{const i=this.xhr=new XMLHttpRequest;i.open("GET",e),i.responseType="arraybuffer",i.addEventListener("load",()=>{function o(i){n[e]=i,t(i)}const a=this.context.decodeAudioData(i.response,o);a&&a.constructor===Promise&&a.then(o).catch(console.error)}),i.send()}),n[e])},getBufferSource:function(){var e=this.data;return this.fetchAudioBuffer(e.src).then(()=>{var t;return(t=this.context.createBufferSource()).buffer=n[e.src],this.el.emit("audioanalyserbuffersource",t,!1),t}).catch(console.error)},getMediaSource:function(){const e={};return function(){const t=this.data.src.constructor===String?this.data.src:this.data.src.src;if(e[t])return e[t];this.data.src.constructor===String?(this.audio=document.createElement("audio"),this.audio.crossOrigin="anonymous",this.audio.setAttribute("src",this.data.src)):this.audio=this.data.src;const n=this.context.createMediaElementSource(this.audio);return e[t]=n,n}}()})},function(e,t){var n=AFRAME.utils.styleParser;if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("event-set",{schema:{default:"",parse:function(e){return n.parse(e)}},multiple:!0,init:function(){this.eventHandler=null,this.eventName=null},update:function(e){this.removeEventListener(),this.updateEventListener(),this.addEventListener()},remove:function(){this.removeEventListener()},pause:function(){this.removeEventListener()},play:function(){this.addEventListener()},updateEventListener:function(){var e,t,n,i=this.data,o=this.el;e=i._event||this.id,t=i._target,n=t?o.sceneEl.querySelector(t):o,this.eventName=e;const a=()=>{var e;for(e in i)"_event"!==e&&"_target"!==e&&AFRAME.utils.entity.setComponentProperty.call(this,n,e,i[e])};isNaN(i._delay)?this.eventHandler=a:this.eventHandler=()=>{setTimeout(a,parseFloat(i._delay))}},addEventListener:function(){this.el.addEventListener(this.eventName,this.eventHandler)},removeEventListener:function(){this.el.removeEventListener(this.eventName,this.eventHandler)}})},function(e,t,n){THREE.BufferGeometryUtils||n(42),AFRAME.registerComponent("geometry-merger",{schema:{preserveOriginal:{default:!1}},init:function(){var e=this;this.geometry=new THREE.Geometry,this.mesh=new THREE.Mesh(this.geometry),this.el.setObject3D("mesh",this.mesh),this.faceIndex={},this.vertexIndex={},this.el.object3D.traverse((function(t){"Mesh"===t.type&&t!==e.mesh&&(e.faceIndex[t.parent.uuid]=[e.geometry.faces.length,e.geometry.faces.length+t.geometry.faces.length-1],e.vertexIndex[t.parent.uuid]=[e.geometry.vertices.length,e.geometry.vertices.length+t.geometry.vertices.length-1],t.parent.updateMatrix(),e.geometry.merge(t.geometry,t.parent.matrix),e.data.preserveOriginal||t.parent.remove(t))}))}}),AFRAME.registerComponent("buffer-geometry-merger",{schema:{preserveOriginal:{default:!1}},init:function(){var e=[];this.el.sceneEl.object3D.updateMatrixWorld(),this.el.object3D.traverse((function(t){"Mesh"===t.type&&t.el!==self.el&&(t.geometry.applyMatrix(t.matrixWorld),e.push(t.geometry.clone()),t.parent.remove(t))}));const t=THREE.BufferGeometryUtils.mergeBufferGeometries(e);this.mesh=new THREE.Mesh(t),this.el.setObject3D("mesh",this.mesh)}})},function(e,t){THREE.BufferGeometryUtils={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var i=t.array,o=n.position.array,a=n.normal.array,r=n.uv.array,s=o.length/3;void 0===n.tangent&&e.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*s),4));for(var l=n.tangent.array,c=[],d=[],u=0;u<s;u++)c[u]=new THREE.Vector3,d[u]=new THREE.Vector3;var h=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,A=new THREE.Vector2,f=new THREE.Vector2,g=new THREE.Vector2,b=new THREE.Vector3,y=new THREE.Vector3,v=e.groups;0===v.length&&(v=[{start:0,count:i.length}]);u=0;for(var E=v.length;u<E;++u)for(var x=k=(C=v[u]).start,S=k+C.count;x<S;x+=3)D(i[x+0],i[x+1],i[x+2]);var R,w,M,_=new THREE.Vector3,F=new THREE.Vector3,O=new THREE.Vector3,T=new THREE.Vector3;for(u=0,E=v.length;u<E;++u){var C,k;for(x=k=(C=v[u]).start,S=k+C.count;x<S;x+=3)P(i[x+0]),P(i[x+1]),P(i[x+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function D(e,t,n){h.fromArray(o,3*e),m.fromArray(o,3*t),p.fromArray(o,3*n),A.fromArray(r,2*e),f.fromArray(r,2*t),g.fromArray(r,2*n);var i=m.x-h.x,a=p.x-h.x,s=m.y-h.y,l=p.y-h.y,u=m.z-h.z,v=p.z-h.z,E=f.x-A.x,x=g.x-A.x,S=f.y-A.y,R=g.y-A.y,w=1/(E*R-x*S);b.set((R*i-S*a)*w,(R*s-S*l)*w,(R*u-S*v)*w),y.set((E*a-x*i)*w,(E*l-x*s)*w,(E*v-x*u)*w),c[e].add(b),c[t].add(b),c[n].add(b),d[e].add(y),d[t].add(y),d[n].add(y)}function P(e){O.fromArray(a,3*e),T.copy(O),w=c[e],_.copy(w),_.sub(O.multiplyScalar(O.dot(w))).normalize(),F.crossVectors(T,w),M=F.dot(d[e]),R=M<0?-1:1,l[4*e]=_.x,l[4*e+1]=_.y,l[4*e+2]=_.z,l[4*e+3]=R}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),o=new Set(Object.keys(e[0].morphAttributes)),a={},r={},s=new THREE.BufferGeometry,l=0,c=0;c<e.length;++c){var d=e[c];if(n!==(null!==d.index))return null;for(var u in d.attributes){if(!i.has(u))return null;void 0===a[u]&&(a[u]=[]),a[u].push(d.attributes[u])}for(var u in d.morphAttributes){if(!o.has(u))return null;void 0===r[u]&&(r[u]=[]),r[u].push(d.morphAttributes[u])}if(s.userData&&(s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(d.userData)),t){var h;if(n)h=d.index.count;else{if(void 0===d.attributes.position)return null;h=d.attributes.position.count}s.addGroup(l,h,c),l+=h}}if(n){var m=0,p=[];for(c=0;c<e.length;++c){for(var A=e[c].index,f=0;f<A.count;++f)p.push(A.getX(f)+m);m+=e[c].attributes.position.count}s.setIndex(p)}for(var u in a){var g=this.mergeBufferAttributes(a[u]);if(!g)return null;s.addAttribute(u,g)}for(var u in r){var b=r[u][0].length;if(0===b)break;s.morphAttributes=s.morphAttributes||{},s.morphAttributes[u]=[];for(c=0;c<b;++c){var y=[];for(f=0;f<r[u].length;++f)y.push(r[u][f][c]);var v=this.mergeBufferAttributes(y);if(!v)return null;s.morphAttributes[u].push(v)}}return s},mergeBufferAttributes:function(e){for(var t,n,i,o=0,a=0;a<e.length;++a){var r=e[a];if(r.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=r.array.constructor),t!==r.array.constructor)return null;if(void 0===n&&(n=r.itemSize),n!==r.itemSize)return null;if(void 0===i&&(i=r.normalized),i!==r.normalized)return null;o+=r.array.length}var s=new t(o),l=0;for(a=0;a<e.length;++a)s.set(e[a].array,l),l+=e[a].array.length;return new THREE.BufferAttribute(s,n,i)}}},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("haptics",{schema:{actuatorIndex:{default:0},dur:{default:100},enabled:{default:!0},events:{type:"array"},eventsFrom:{type:"string"},force:{default:1}},multiple:!0,init:function(){this.data;var e=this;this.callPulse=function(){e.pulse()};var t=function(){e.gamepad=e.el.components["tracked-controls"].controller,e.gamepad.gamepad&&(e.gamepad=e.gamepad.gamepad),e.gamepad&&e.gamepad.hapticActuators&&e.gamepad.hapticActuators.length&&e.addEventListeners()};this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller?t():this.el.addEventListener("controllerconnected",(function(){t()}))},remove:function(){this.removeEventListeners()},pulse:function(e,t){var n=this.data;n.enabled&&this.gamepad&&this.gamepad.hapticActuators&&this.gamepad.hapticActuators[n.actuatorIndex].pulse(e||n.force,t||n.dur)},addEventListeners:function(){var e,t,n=this.data;for(t=n.eventsFrom?document.querySelector(n.eventsFrom):this.el,e=0;e<n.events.length;e++)t.addEventListener(n.events[e],this.callPulse)},removeEventListeners:function(){var e,t,n=this.data;for(t=n.eventsFrom?document.querySelector(n.eventsFrom):this.el,e=0;e<n.events.length;e++)t.removeEventListener(n.events[e],this.callPulse)}})},function(e,t){var n=[],i=new THREE.Vector3;function o(e,t,o){var a,r,s,l,c,u,h=Math.ceil(t/e.columns);for(r=e.marginColumn,s=e.marginRow,o&&(r=e.margin,s=e.margin),c=d(e.align,h),l=d(e.align,e.columns),u=0;u<h;u++)for(a=0;a<e.columns;a++)i.set(0,0,0),0===e.plane.indexOf("x")&&(i.x=(a-l)*r),0===e.plane.indexOf("y")&&(i.y=(a-l)*r),1===e.plane.indexOf("y")&&(i.y=(u-c)*s),1===e.plane.indexOf("z")&&(i.z=(u-c)*s),p(i);return n}function a(e,t){var o,a;for(o=0;o<t;o++)a=isNaN(e.angle)?o*(2*Math.PI)/t:o*e.angle*.01745329252,i.set(0,0,0),0===e.plane.indexOf("x")&&(i.x=e.radius*Math.cos(a)),0===e.plane.indexOf("y")&&(i.y=e.radius*Math.cos(a)),1===e.plane.indexOf("y")&&(i.y=e.radius*Math.sin(a)),1===e.plane.indexOf("z")&&(i.z=e.radius*Math.sin(a)),p(i);return n}function r(e,t){return e.columns=t,o(e,t,!0)}function s(e,t){return m(1,0,0,0,1,0,0,0,1,-1,0,0,0,-1,0,0,0,-1),u(e.radius/2),n}function l(e,t){var i=(1+Math.sqrt(5))/2,o=1/i,a=2-i,r=-1*o,s=-1*a;return m(-1,a,0,-1,s,0,0,-1,a,0,-1,s,0,1,a,0,1,s,1,a,0,1,s,0,o,o,o,o,o,r,o,r,o,o,r,r,a,0,1,a,0,-1,r,o,o,r,o,r,r,r,o,r,r,r,s,0,1,s,0,-1),u(e.radius/2),n}function c(e,t){var i=Math.sqrt(3),o=-1/Math.sqrt(3);return m(0,0,i+o,-1,0,o,1,0,o,0,2*Math.sqrt(2/3),0),u(e.radius/2),n}function d(e,t){switch(e){case"start":return t-1;case"center":return(t-1)/2;case"end":return 0}}function u(e){var t;for(t=0;t<n.length;t++)n[t]=n[t]*e}function h(e,t,n){var i,o,a;if(n)for(o=0;o<e.length;o++)null!=(i=e[o].getAttribute(n))&&(a=3*parseInt(i,10),e[o].object3D.position.set(t[a],t[a+1],t[a+2]));else for(o=0;o<t.length;o+=3){if(!e[o/3])return;e[o/3].object3D.position.set(t[o],t[o+1],t[o+2])}}function m(){var e;for(e=0;e<arguments.length;e++)n.push(e)}function p(e){n.push(e.x),n.push(e.y),n.push(e.z)}AFRAME.registerComponent("layout",{schema:{angle:{type:"number",default:!1,min:0,max:360,if:{type:["circle"]}},columns:{default:1,min:0,if:{type:["box"]}},margin:{default:1,min:0,if:{type:["box","line"]}},marginColumn:{default:1,min:0,if:{type:["box"]}},marginRow:{default:1,min:0,if:{type:["box"]}},orderAttribute:{default:""},plane:{default:"xy"},radius:{default:1,min:0,if:{type:["circle","cube","dodecahedron","pyramid"]}},reverse:{default:!1},type:{default:"line",oneOf:["box","circle","cube","dodecahedron","line","pyramid"]},fill:{default:!0,if:{type:["circle"]}},align:{default:"end",oneOf:["start","center","end"]}},init:function(){var e=this,t=this.el;this.children=t.getChildEntities(),this.initialPositions=[],this.children.forEach((function(t){if(t.hasLoaded)return n();function n(){e.initialPositions.push(t.object3D.position.x),e.initialPositions.push(t.object3D.position.y),e.initialPositions.push(t.object3D.position.z)}t.addEventListener("loaded",n)})),this.handleChildAttached=this.handleChildAttached.bind(this),this.handleChildDetached=this.handleChildDetached.bind(this),t.addEventListener("child-attached",this.handleChildAttached),t.addEventListener("child-detached",this.handleChildDetached),t.addEventListener("layoutrefresh",this.update.bind(this))},update:function(e){var t,i,d,u=this.children,m=this.data,p=this.el;switch(i=u.length,m.type){case"box":d=o;break;case"circle":d=a;break;case"cube":d=s;break;case"dodecahedron":d=l;break;case"pyramid":d=c;break;default:d=r}t=p.getDOMAttribute("layout"),n.length=0,n=d(m,i,"string"==typeof t?-1!==t.indexOf("margin"):"margin"in t),m.reverse&&n.reverse(),h(u,n,m.orderAttribute)},remove:function(){this.el.removeEventListener("child-attached",this.handleChildAttached),this.el.removeEventListener("child-detached",this.handleChildDetached),h(this.children,this.initialPositions)},handleChildAttached:function(e){var t=this.el;e.detail.el.parentNode===t&&(this.children.push(e.detail.el),this.update())},handleChildDetached:function(e){-1!==this.children.indexOf(e.detail.el)&&(this.children.splice(this.children.indexOf(e.detail.el),1),this.initialPositions.splice(this.children.indexOf(e.detail.el),1),this.update())}}),e.exports.getBoxPositions=o,e.exports.getCirclePositions=a,e.exports.getLinePositions=r,e.exports.getCubePositions=s,e.exports.getDodecahedronPositions=l,e.exports.getPyramidPositions=c},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerPrimitive("a-log",{defaultComponents:{geometry:{primitive:"plane",height:5},log:{},material:{color:"#111",shader:"flat",side:"double"},text:{color:"lightgreen",baseline:"top",align:"center",height:5}},mappings:{channel:"log.channel"}}),AFRAME.registerSystem("log",{schema:{console:{default:!0}},init:function(){var e=this.data,t=this.logs=[],n=this.loggers=[];AFRAME.log=function(i,o){t.push([i,o]),n.forEach((function(e){e.receiveLog(i,o)})),e.console&&console.log("[log:"+(o||"")+"] "+i)}},registerLogger:function(e){this.loggers.push(e),this.logs.forEach((function(t){e.receiveLog.apply(e,t)}))},unregisterLogger:function(e){this.loggers.splice(this.loggers.indexOf(e),1)}}),AFRAME.registerComponent("log",{schema:{channel:{type:"string"},filter:{type:"string"},max:{default:100},showErrors:{default:!0}},init:function(){this.logs=[],this.system.registerLogger(this)},play:function(){var e=this;this.el.sceneEl.addEventListener("log",(function(t){t.detail&&e.receiveLog(t.detail.message,t.detail.channel)})),window.onerror=function(t,n,i,o,a){e.receiveLog("Error: "+t)}},receiveLog:function(e,t){var n=this.data;"string"!=typeof e&&(e=JSON.stringify(e)),n.channel&&t&&n.channel!==t||n.filter&&-1===e.indexOf(n.filter)||(this.logs.push(e),n.max&&this.logs.length>n.max&&this.logs.shift(),this.el.setAttribute("text",{value:this.logs.join("\n")}))},remove:function(){this.el.removeAttribute("text"),this.system.unregisterLogger(this)}})},function(e,t,n){n(47),AFRAME.registerComponent("orbit-controls",{dependencies:["camera"],schema:{autoRotate:{type:"boolean"},autoRotateSpeed:{default:2},dampingFactor:{default:.1},enabled:{default:!0},enableDamping:{default:!0},enableKeys:{default:!0},enablePan:{default:!0},enableRotate:{default:!0},enableZoom:{default:!0},initialPosition:{type:"vec3"},keyPanSpeed:{default:7},minAzimuthAngle:{type:"number",default:1/0},maxAzimuthAngle:{type:"number",default:1/0},maxDistance:{default:1e3},maxPolarAngle:{default:AFRAME.utils.device.isMobile()?90:120},minDistance:{default:1},minPolarAngle:{default:0},minZoom:{default:0},panSpeed:{default:1},rotateSpeed:{default:.05},screenSpacePanning:{default:!1},target:{type:"vec3"},zoomSpeed:{default:.5}},init:function(){var e,t=this.el;this.controls=new THREE.OrbitControls(t.getObject3D("camera"),t.sceneEl.renderer.domElement),e=new THREE.Vector3,t.sceneEl.addEventListener("enter-vr",()=>{(AFRAME.utils.device.checkHeadsetConnected()||AFRAME.utils.device.isMobile())&&(this.controls.enabled=!1,t.hasAttribute("look-controls")&&(t.setAttribute("look-controls","enabled",!0),e.copy(t.getObject3D("camera").position),t.getObject3D("camera").position.set(0,0,0)))}),t.sceneEl.addEventListener("exit-vr",()=>{(AFRAME.utils.device.checkHeadsetConnected()||AFRAME.utils.device.isMobile())&&(this.controls.enabled=!0,t.getObject3D("camera").position.copy(e),t.hasAttribute("look-controls")&&t.setAttribute("look-controls","enabled",!1))}),document.body.style.cursor="grab",document.addEventListener("mousedown",()=>{document.body.style.cursor="grabbing"}),document.addEventListener("mouseup",()=>{document.body.style.cursor="grab"}),this.target=new THREE.Vector3,t.getObject3D("camera").position.copy(this.data.initialPosition)},update:function(e){var t=this.controls,n=this.data;t.target=this.target.copy(n.target),t.autoRotate=n.autoRotate,t.autoRotateSpeed=n.autoRotateSpeed,t.dampingFactor=n.dampingFactor,t.enabled=n.enabled,t.enableDamping=n.enableDamping,t.enableKeys=n.enableKeys,t.enablePan=n.enablePan,t.enableRotate=n.enableRotate,t.enableZoom=n.enableZoom,t.keyPanSpeed=n.keyPanSpeed,t.maxPolarAngle=THREE.Math.degToRad(n.maxPolarAngle),t.maxDistance=n.maxDistance,t.minDistance=n.minDistance,t.minPolarAngle=THREE.Math.degToRad(n.minPolarAngle),t.minZoom=n.minZoom,t.panSpeed=n.panSpeed,t.rotateSpeed=n.rotateSpeed,t.screenSpacePanning=n.screenSpacePanning,t.zoomSpeed=n.zoomSpeed},tick:function(){var e=this.controls;this.data.enabled&&e.enabled&&(e.enableDamping||e.autoRotate)&&this.controls.update()}})},function(e,t){THREE.OrbitControls=function(e,t){var n,i,o,a,r;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(l),s.update(),h=u.NONE},this.update=(n=new THREE.Vector3,i=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),o=i.clone().inverse(),a=new THREE.Vector3,r=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(i),p.setFromVector3(n),s.autoRotate&&h===u.NONE&&O(2*Math.PI/60/60*s.autoRotateSpeed),p.theta+=A.theta,p.phi+=A.phi,p.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,p.theta)),p.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,p.phi)),p.makeSafe(),p.radius*=f,p.radius=Math.max(s.minDistance,Math.min(s.maxDistance,p.radius)),s.target.add(g),n.setFromSpherical(p),n.applyQuaternion(o),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(A.theta*=1-s.dampingFactor,A.phi*=1-s.dampingFactor):A.set(0,0,0),f=1,g.set(0,0,0),!!(b||a.distanceToSquared(s.object.position)>m||8*(1-r.dot(s.object.quaternion))>m)&&(s.dispatchEvent(l),a.copy(s.object.position),r.copy(s.object.quaternion),b=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",U,!1),s.domElement.removeEventListener("mousedown",H,!1),s.domElement.removeEventListener("wheel",B,!1),s.domElement.removeEventListener("touchstart",I,!1),s.domElement.removeEventListener("touchend",J,!1),s.domElement.removeEventListener("touchmove",z,!1),document.removeEventListener("mousemove",V,!1),document.removeEventListener("mouseup",q,!1),window.removeEventListener("keydown",L,!1)};var s=this,l={type:"change"},c={type:"start"},d={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},h=u.NONE,m=1e-6,p=new THREE.Spherical,A=new THREE.Spherical,f=1,g=new THREE.Vector3,b=!1,y=new THREE.Vector2,v=new THREE.Vector2,E=new THREE.Vector2,x=new THREE.Vector2,S=new THREE.Vector2,R=new THREE.Vector2,w=new THREE.Vector2,M=new THREE.Vector2,_=new THREE.Vector2;function F(){return Math.pow(.95,s.zoomSpeed)}function O(e){A.theta-=e}function T(e){A.phi-=e}var C,k=(C=new THREE.Vector3,function(e,t){C.setFromMatrixColumn(t,0),C.multiplyScalar(-e),g.add(C)}),D=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),g.add(e)}}(),P=function(){var e=new THREE.Vector3;return function(t,n){var i=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var o=s.object.position;e.copy(o).sub(s.target);var a=e.length();a*=Math.tan(s.object.fov/2*Math.PI/180),k(2*t*a/i.clientHeight,s.object.matrix),D(2*n*a/i.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(k(t*(s.object.right-s.object.left)/s.object.zoom/i.clientWidth,s.object.matrix),D(n*(s.object.top-s.object.bottom)/s.object.zoom/i.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function N(e){s.object.isPerspectiveCamera?f/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function j(e){s.object.isPerspectiveCamera?f*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function H(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.ORBIT:if(!1===s.enableRotate)return;!function(e){y.set(e.clientX,e.clientY)}(e),h=u.ROTATE;break;case s.mouseButtons.ZOOM:if(!1===s.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),h=u.DOLLY;break;case s.mouseButtons.PAN:if(!1===s.enablePan)return;!function(e){x.set(e.clientX,e.clientY)}(e),h=u.PAN}h!==u.NONE&&(document.addEventListener("mousemove",V,!1),document.addEventListener("mouseup",q,!1),s.dispatchEvent(c))}}function V(e){if(!1!==s.enabled)switch(e.preventDefault(),h){case u.ROTATE:if(!1===s.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),E.subVectors(v,y);var t=s.domElement===document?s.domElement.body:s.domElement;O(2*Math.PI*E.x/t.clientWidth*s.rotateSpeed),T(2*Math.PI*E.y/t.clientHeight*s.rotateSpeed),y.copy(v),s.update()}(e);break;case u.DOLLY:if(!1===s.enableZoom)return;!function(e){M.set(e.clientX,e.clientY),_.subVectors(M,w),_.y>0?N(F()):_.y<0&&j(F()),w.copy(M),s.update()}(e);break;case u.PAN:if(!1===s.enablePan)return;!function(e){S.set(e.clientX,e.clientY),R.subVectors(S,x),P(R.x,R.y),x.copy(S),s.update()}(e)}}function q(e){!1!==s.enabled&&(document.removeEventListener("mousemove",V,!1),document.removeEventListener("mouseup",q,!1),s.dispatchEvent(d),h=u.NONE)}function B(e){!1===s.enabled||!1===s.enableZoom||h!==u.NONE&&h!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(c),function(e){e.deltaY<0?j(F()):e.deltaY>0&&N(F()),s.update()}(e),s.dispatchEvent(d))}function L(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:P(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:P(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:P(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:P(-s.keyPanSpeed,0),s.update()}}(e)}function I(e){if(!1!==s.enabled){switch(e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){y.set(e.touches[0].pageX,e.touches[0].pageY)}(e),h=u.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);w.set(0,i)}(e),h=u.TOUCH_DOLLY;break;case 3:if(!1===s.enablePan)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY)}(e),h=u.TOUCH_PAN;break;default:h=u.NONE}h!==u.NONE&&s.dispatchEvent(c)}}function z(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(h!==u.TOUCH_ROTATE)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY),E.subVectors(v,y);var t=s.domElement===document?s.domElement.body:s.domElement;O(2*Math.PI*E.x/t.clientWidth*s.rotateSpeed),T(2*Math.PI*E.y/t.clientHeight*s.rotateSpeed),y.copy(v),s.update()}(e);break;case 2:if(!1===s.enableZoom)return;if(h!==u.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);M.set(0,i),_.subVectors(M,w),_.y>0?j(F()):_.y<0&&N(F()),w.copy(M),s.update()}(e);break;case 3:if(!1===s.enablePan)return;if(h!==u.TOUCH_PAN)return;!function(e){S.set(e.touches[0].pageX,e.touches[0].pageY),R.subVectors(S,x),P(R.x,R.y),x.copy(S),s.update()}(e);break;default:h=u.NONE}}function J(e){!1!==s.enabled&&(s.dispatchEvent(d),h=u.NONE)}function U(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",U,!1),s.domElement.addEventListener("mousedown",H,!1),s.domElement.addEventListener("wheel",B,!1),s.domElement.addEventListener("touchstart",I,!1),s.domElement.addEventListener("touchend",J,!1),s.domElement.addEventListener("touchmove",z,!1),window.addEventListener("keydown",L,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},function(e,t){AFRAME.registerComponent("proxy-event",{schema:{captureBubbles:{default:!1},enabled:{default:!0},event:{type:"string"},from:{type:"string"},to:{type:"string"},as:{type:"string"},bubbles:{default:!1}},multiple:!0,init:function(){var e,t,n,i=this.data,o=this.el,a=this;if(i.from?e="PARENT"===i.from?[o.parentNode]:document.querySelectorAll(i.from):n="CHILDREN"===i.to?o.querySelectorAll("*"):"SELF"===i.to?[o]:document.querySelectorAll(i.to),i.from)for(t=0;t<e.length;t++)this.addEventListenerFrom(e[t]);else o.addEventListener(i.event,(function(e){var i=a.data;if(i.enabled&&(i.captureBubbles||e.target===o))for(t=0;t<n.length;t++)n[t].emit(i.as||i.event,e.detail?e.detail:null,i.bubbles)}))},addEventListenerFrom:function(e){var t=this.data,n=this;e.addEventListener(t.event,(function(t){var i=n.data;i.enabled&&(i.captureBubbles||t.target===e)&&n.el.emit(i.as||i.event,t.detail?t.detail:null,!1)}))}})},function(e,t){AFRAME.registerSystem("render-order",{schema:{type:"array"},init:function(){this.el.renderer.sortObjects=!0},update:function(){for(this.order={},i=0;i<this.data.length;i++)this.order[this.data[i]]=i}}),AFRAME.registerComponent("render-order",{schema:{type:"string"},multiple:!0,init:function(){this.set=this.set.bind(this),this.el.addEventListener("object3dset",e=>{"nonrecursive"!==this.id&&e.detail.object.traverse(this.set)})},update:function(){"nonrecursive"===this.id?this.set(this.el.object3D):this.el.object3D.traverse(this.set)},set:function(e){isNaN(this.data)?e.renderOrder=this.system.order[this.data]:e.renderOrder=parseFloat(this.data)}}),AFRAME.registerComponent("render-order-recursive",{init:function(){this.el.addEventListener("child-attached",e=>{e.detail.el.setAttribute("render-order",this.el.getAttribute("render-order"))})}})},function(e,t,n){var i;"undefined"!=typeof self&&self,i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var i={};e.exports.select=function(e,t,n){return i[t]||(i[t]=new Function("state","item","return "+l(t)+";")),i[t](e,n)};var o=/\.([A-Za-z][\w_-]*)/g,a=/([=&|!?:+-])(\s*)([\(]?)([A-Za-z][\w_-]*)/g,r=/^([\(]?)([A-Za-z][\w_-]*)/g,s=/state\["item"\]/g;function l(e){return e=(e=(e=(e=e.replace(o,'["$1"]')).replace(r,'$1state["$2"]')).replace(a,'$1$2$3state["$4"]')).replace(s,"item")}function c(){var e=arguments;return function(){var t;for(t=0;t<e.length;t++)e[t].apply(this,arguments)}}e.exports.generateExpression=l,e.exports.clearObject=function(e){for(var t in e)delete e[t]},e.exports.composeHandlers=function(){var e,t,n,i=arguments;for(n={},t=0;t<i.length;t++)for(e in i[t])e in n?n[e].constructor===Array?n[e].push(i[t][e]):n[e]=[n[e],i[t][e]]:n[e]=i[t][e];for(e in n)n[e].constructor===Array&&(n[e]=c.apply(this,n[e]));return n},e.exports.composeFunctions=c;var d=["||","&&","!=","!==","==","===",">","<","<=",">="],u=/\s+/,h=/\(|\)|\!/g;function m(e){return-1===(e=function(e){return 0===e.indexOf("!!")?e.replace("!!",""):0===e.indexOf("!")?e.replace("!",""):e}(e.trim())).indexOf(".")?e:e.substring(0,e.indexOf("."))}e.exports.parseKeysToWatch=function(e,t,n){var i,o;for(o=A(t,u),i=0;i<o.length;i++)if(-1===d.indexOf(o[i])&&!o[i].startsWith("'")&&-1===e.indexOf(o[i])){if(n&&"item"===o[i])continue;e.push(m(o[i]).replace(h,""))}return e};var p={};function A(e,t){return p[t]||(p[t]={}),p[t][e]||(p[t][e]=e.split(t)),p[t][e]}e.exports.split=A,e.exports.copyArray=function(e,t){var n;for(e.length=0,n=0;n<t.length;n++)e[n]=t[n]}},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(2);var o,a,r=n(3),s=n(0),l=n(4).wrapArray,c={initialState:{},nonBindedStateKeys:[],handlers:{},computeState:function(){}};AFRAME.registerState=function(e){AFRAME.utils.extend(c,e)},AFRAME.registerSystem("state",{init:function(){var e,t=this;for(e in this.arrays=[],this.dirtyArrays=[],this.diff={},this.state=AFRAME.utils.clone(c.initialState),this.subscriptions=[],this.initEventHandlers(),this.state)this.state[e]&&this.state[e].constructor===Array&&(this.arrays.push(e),this.state[e].__dirty=!0,l(this.state[e]));this.lastState=AFRAME.utils.clone(this.state),this.eventDetail={lastState:this.lastState,state:this.state},this.el.addEventListener("loaded",(function(){var e;for(c.computeState(t.state,"@@INIT"),e=0;e<t.subscriptions.length;e++)t.subscriptions[e].onStateUpdate(t.state)}))},dispatch:(a=[],function(e,t){var n,i;for(i in c.handlers[e](this.state,t),c.computeState(this.state,e,t),this.diff)delete this.diff[i];for(r(this.lastState,this.state,this.diff,c.nonBindedStateKeys),this.dirtyArrays.length=0,n=0;n<this.arrays.length;n++)this.state[this.arrays[n]].__dirty&&this.dirtyArrays.push(this.arrays[n]);for(a.length=0,n=0;n<this.subscriptions.length;n++){if("bind-for"===this.subscriptions[n].name){if(!this.state[this.subscriptions[n].keysToWatch[0]].__dirty)continue}else if(!this.shouldUpdate(this.subscriptions[n].keysToWatch,this.diff,this.dirtyArrays))continue;-1===a.indexOf(this.subscriptions[n])&&a.push(this.subscriptions[n])}for(n=0;n<a.length;n++)a[n].onStateUpdate();for(i in this.state)this.state[i]&&this.state[i].constructor===Array&&(this.state[i].__dirty=!1);this.copyState(this.lastState,this.state),this.eventDetail.action=e,this.eventDetail.payload=t,this.el.emit("stateupdate",this.eventDetail)}),copyState:function(e,t,n){var i;for(i in t)if(n||-1===c.nonBindedStateKeys.indexOf(i))if(t[i]&&t[i].constructor===Object){if(!(i in e)){e[i]=AFRAME.utils.clone(t[i]);continue}this.copyState(e[i],t[i],!0)}else e[i]=t[i]},subscribe:function(e){this.subscriptions.push(e)},unsubscribe:function(e){this.subscriptions.splice(this.subscriptions.indexOf(e),1)},shouldUpdate:function(e,t,n){for(var i=0;i<e.length;i++)if(e[i]in t||-1!==n.indexOf(e[i]))return!0;return!1},initEventHandlers:function(){var e,t=[];for(e in n=n.bind(this),c.handlers)-1===t.indexOf(e)&&(t.push(e),n(e));function n(e){var t=this;this.el.addEventListener(e,(function(n){t.dispatch(e,n.detail)}))}},renderTemplate:(o=/{{\s*(\w*\.)?([\w.]+)\s*}}/g,function(e,t,n){var a,r;if(r=e,t)for(;a=o.exec(e);)r=r.replace(a[0],"object"===(void 0===t?"undefined":i(t))?s.select(t,a[2])||"":t);return n?r:document.createRange().createContextualFragment(r)}),select:s.select}),AFRAME.registerComponent("bind",{schema:{default:{},parse:function(e){var t,n,i,o;if(e.constructor===Object)return e;if(-1===e.indexOf(":"))return e;for(t={},i=s.split(e,";"),n=0;n<i.length;n++)t[(o=s.split(i[n].trim(),":"))[0]]=o[1].trim();return t}},multiple:!0,init:function(){var e;this.data,this.keysToWatch=[],this.onStateUpdate=this.onStateUpdate.bind(this),this.system=this.el.sceneEl.systems.state,this.id&&(e=s.split(this.id,"__")[0]),this.isNamespacedBind=this.id&&e in AFRAME.components&&!AFRAME.components[e].isSingleProp||e in AFRAME.systems,this.lastData={},this.updateObj={},this.system.subscribe(this),this.onStateUpdate=this.onStateUpdate.bind(this)},update:function(){var e,t=this.data;if(this.keysToWatch.length=0,"string"==typeof t)s.parseKeysToWatch(this.keysToWatch,t);else for(e in t)s.parseKeysToWatch(this.keysToWatch,t[e]);this.onStateUpdate()},onStateUpdate:function(){var e,t,n,o,a=!1,r=this.el;if(r.parentNode){if(this.isNamespacedBind&&s.clearObject(this.updateObj),n=this.system.state,"object"!==i(this.data)){try{o=s.select(n,this.data)}catch(e){throw new Error("[aframe-state-component] Key '"+this.data+"' not found in state. #"+this.el.getAttribute("id")+"["+this.attrName+"]")}if("object"!==(void 0===o?"undefined":i(o))&&"object"!==i(this.lastData)&&this.lastData===o)return;return AFRAME.utils.entity.setComponentProperty(r,this.id,o),void(this.lastData=o)}for(e in this.data){t=this.data[e].trim();try{o=s.select(n,t)}catch(e){throw console.log(e),new Error("[aframe-state-component] Key '"+t+"' not found in state. #"+this.el.getAttribute("id")+"["+this.attrName+"]")}if("object"===(void 0===o?"undefined":i(o))||"object"===i(this.lastData[e])||this.lastData[e]!==o){if(e in AFRAME.components&&void 0===o)return void r.removeAttribute(e);this.isNamespacedBind?this.updateObj[e]=o:AFRAME.utils.entity.setComponentProperty(r,e,o),this.lastData[e]=o}}for(a in this.updateObj);this.isNamespacedBind&&a&&r.setAttribute(this.id,this.updateObj)}},remove:function(){this.system.unsubscribe(this)}}),AFRAME.registerComponent("bind-toggle",{schema:{type:"string"},multiple:!0,init:function(){this.system=this.el.sceneEl.systems.state,this.keysToWatch=[],this.onStateUpdate=this.onStateUpdate.bind(this),this.system.subscribe(this),this.onStateUpdate()},update:function(){this.keysToWatch.length=0,s.parseKeysToWatch(this.keysToWatch,this.data)},onStateUpdate:function(){var e,t,n=this.el;e=this.system.state;try{t=s.select(e,this.data)}catch(e){throw new Error("[aframe-state-component] Key '"+this.data+"' not found in state. #"+this.el.getAttribute("id")+"["+this.attrName+"]")}t?n.setAttribute(this.id,""):n.removeAttribute(this.id)},remove:function(){this.system.unsubscribe(this)}}),e.exports={composeFunctions:s.composeFunctions,composeHandlers:s.composeHandlers,select:s.select}},function(e,t,n){"use strict";var i,o,a=n(0);AFRAME.registerComponent("bind-for",{schema:{delay:{default:0},for:{type:"string",default:"item"},in:{type:"string"},key:{type:"string"},pool:{default:0},template:{type:"string"},updateInPlace:{default:!1}},init:function(){this.system=this.el.sceneEl.systems.state,this.onStateUpdate=this.onStateUpdate.bind(this),this.keysToWatch=[],this.renderedKeys=[],this.system.subscribe(this),this.el.children[0]&&"TEMPLATE"===this.el.children[0].tagName?this.template=this.el.children[0].innerHTML.trim():this.template=document.querySelector(this.data.template).innerHTML.trim();for(var e=0;e<this.data.pool;e++)this.el.appendChild(this.generateFromTemplate(null,e))},update:function(){this.keysToWatch[0]=a.split(this.data.in,".")[0],this.onStateUpdate()},onStateUpdateNaive:(o=[],function(){var e,t=this.data,n=this.el;try{e=a.select(this.system.state,t.in)}catch(e){throw new Error("[aframe-state-component] Key '"+t.in+"' not found in state. #"+n.getAttribute("id")+"["+this.attrName+"]")}o.length=0;for(var i=0;i<e.length;i++){var r=e[i];o.push(t.key?r[t.key].toString():r.toString())}for(var s=this.getElsToRemove(o,this.renderedKeys),l=0;l<s.length;l++)s[l].parentNode.removeChild(s[l]);e.length&&this.renderItems(e,o,0)}),renderItems:function(e,t,n){var i,o=this,a=this.data,r=this.el,s=e[n],l=a.key?s[a.key].toString():s.toString();if(-1===this.renderedKeys.indexOf(l))i=this.generateFromTemplate(s,n),r.appendChild(i),this.renderedKeys.push(l);else{if(e.length&&e[0].constructor===String){var c=a.key?s[a.key].toString():s.toString();(i=r.querySelector('[data-bind-for-value="'+c+'"]')).setAttribute("data-bind-for-key",n)}else{var d=this.getBindForKey(s,n);i=r.querySelector('[data-bind-for-key="'+d+'"]')}i.emit("bindforupdate",s,!1)}e[n+1]&&(this.data.delay?setTimeout((function(){o.renderItems(e,t,n+1)}),this.data.delay):this.renderItems(e,t,n+1))},onStateUpdateInPlace:function(){var e=[];return function(){var t,n,i=this.data,o=this.el;try{t=a.select(this.system.state,i.in)}catch(e){throw console.log(e),new Error("[aframe-state-component] Key '"+i.in+"' not found in state. #"+o.getAttribute("id")+"["+this.attrName+"]")}e.length=0;for(var r=0;r<t.length;r++){var s=t[r];n=i.key?s[i.key].toString():s.toString(),e.push(n)}for(var l=this.getElsToRemove(e,this.renderedKeys),c=0;c<l.length;c++)l[c].object3D.visible=!1,l[c].setAttribute("data-bind-for-active","false"),l[c].removeAttribute("data-bind-for-key"),l[c].removeAttribute("data-bind-for-value"),l[c].emit("bindfordeactivate",null,!1),l[c].pause();t.length&&this.renderItemsInPlace(t,e,0)}}(),renderItemsInPlace:function(e,t,n){var i,o=this,a=this.data,r=this.el,s=e[n],l=this.getBindForKey(s,n),c=a.key?s[a.key].toString():s.toString();if(-1===this.renderedKeys.indexOf(c)){if(r.querySelector(':scope > [data-bind-for-active="false"]'))(i=r.querySelector('[data-bind-for-active="false"]')).setAttribute("data-bind-for-key",l),i.setAttribute("data-bind-for-value",c),i.object3D.visible=!0,i.play(),i.setAttribute("data-bind-for-active","true"),i.emit("bindforupdateinplace",s,!1);else{var d=this.generateFromTemplate(s,n);d.addEventListener("loaded",(function(){d.emit("bindforupdateinplace",s,!1)})),r.appendChild(d)}this.renderedKeys.push(c)}else-1!==t.indexOf(c)&&(e.length&&e[0].constructor===String?(i=r.querySelector('[data-bind-for-value="'+c+'"]')).setAttribute("data-bind-for-key",n):i=r.querySelector('[data-bind-for-key="'+l+'"]'),i.emit("bindforupdateinplace",s,!1));e[n+1]&&(this.data.delay?setTimeout((function(){o.renderItemsInPlace(e,t,n+1)}),this.data.delay):this.renderItemsInPlace(e,t,n+1))},generateFromTemplate:function(e,t){var n=this.data;this.el.appendChild(this.system.renderTemplate(this.template,e));var i=this.el.children[this.el.children.length-1];if(!e)return i.setAttribute("data-bind-for-key",""),i.setAttribute("data-bind-for-active","false"),i;var o=this.getBindForKey(e,t);return i.setAttribute("data-bind-for-key",o),n.key||i.setAttribute("data-bind-for-value",e),i.setAttribute("data-bind-for-active","true"),i},getElsToRemove:(i=[],function(e,t){var n=this.data,o=this.el;i.length=0;for(var a=0;a<o.children.length;a++)if("TEMPLATE"!==o.children[a].tagName){var r=n.key?o.children[a].getAttribute("data-bind-for-key"):o.children[a].getAttribute("data-bind-for-value");-1===e.indexOf(r)&&-1!==t.indexOf(r)&&(i.push(o.children[a]),t.splice(t.indexOf(r),1))}return i}),getBindForKey:function(e,t){return this.data.key?e[this.data.key].toString():t.toString()},onStateUpdate:function(){this.data.updateInPlace?this.onStateUpdateInPlace():this.onStateUpdateNaive()}}),AFRAME.registerComponent("bind-item",{schema:{type:"string"},multiple:!0,init:function(){this.itemData=null,this.keysToWatch=[],this.prevValues={};var e=this.rootEl=this.el.closest("[data-bind-for-key]");if(!e)throw new Error("bind-item component must be attached to entity under a bind-for item.");e.addEventListener("bindforupdateinplace",this.updateInPlace.bind(this)),e.addEventListener("bindfordeactivate",this.deactivate.bind(this)),this.el.sceneEl.systems.state.subscribe(this)},update:function(){this.parseSelector()},updateInPlace:function(e){var t=this.propertyMap;if("false"!==this.rootEl.getAttribute("data-bind-for-active"))for(var n in e&&(this.itemData=e.detail),t){var i=this.select(this.itemData,t[n]);i!==this.prevValues[n]&&(AFRAME.utils.entity.setComponentProperty(this.el,n,i),this.prevValues[n]=i)}},onStateUpdate:function(){this.updateInPlace()},select:function(e,t){return a.select(this.el.sceneEl.systems.state.state,t,e)},deactivate:function(){this.prevValues={}},parseSelector:function(){var e=this.propertyMap={};this.keysToWatch.length=0;var t=a.split(this.id,"__")[0];if(!(t in AFRAME.components)||AFRAME.components[t].isSingleProp)e[this.id]=this.data,a.parseKeysToWatch(this.keysToWatch,this.data,!0);else for(var n=a.split(this.data,";"),i=0;i<n.length;i++){var o=a.split(n[i],":");e[this.id+"."+o[0].trim()]=o[1].trim(),a.parseKeysToWatch(this.keysToWatch,o[1].trim(),!0)}}})},function(e,t,n){"use strict";var i;e.exports=(i=[],function(e,t,n,o){var a,r,s,l,c,d,u;for(c in l=n||{},i.length=0,e)i.push(c);if(!t)return l;for(s in t)-1===i.indexOf(s)&&i.push(s);for(d=0;d<i.length;d++)c=i[d],o&&-1!==o.indexOf(c)||(a=e[c],r=t[c],((u=a&&r&&a.constructor===Object&&r.constructor===Object)&&!AFRAME.utils.deepEqual(a,r)||!u&&a!==r)&&(l[c]=r));return l})},function(e,t,n){"use strict";var i=["push","pop","shift","unshift","splice"];function o(e,t){var n=e[t];e[t]=function(){n.apply(e,arguments),e.__dirty=!0}}e.exports.wrapArray=function(e){var t;if(!e.__wrapped){for(t=0;t<i.length;t++)o(e,i[t]);e.__wrapped=!0}}}])},e.exports=i()},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("slice9",{schema:{width:{default:1,min:0},height:{default:1,min:0},left:{default:0,min:0},right:{default:0,min:0},bottom:{default:0,min:0},top:{default:0,min:0},side:{default:"front",oneOf:["front","back","double"]},padding:{default:.1,min:.01},color:{type:"color",default:"#fff"},opacity:{default:1,min:0,max:1},transparent:{default:!0},debug:{default:!1},src:{type:"map"}},multiple:!1,init:function(){var e=this.data,t=this.material=new THREE.MeshBasicMaterial({color:e.color,opacity:e.opacity,transparent:e.transparent,wireframe:e.debug}),n=this.geometry=new THREE.PlaneBufferGeometry(e.width,e.height,3,3);new THREE.TextureLoader;this.plane=new THREE.Mesh(n,t),this.el.setObject3D("mesh",this.plane),this.textureSrc=null},updateMap:function(){var e=this.data.src;if(e){if(e===this.textureSrc)return;return this.textureSrc=e,void this.el.sceneEl.systems.material.loadTexture(e,{src:e},t.bind(this))}function t(e){this.material.map=e,this.material.needsUpdate=!0,this.regenerateMesh()}this.material.map&&t(null)},regenerateMesh:function(){var e=this.data,t=this.geometry.attributes.position.array,n=this.geometry.attributes.uv.array,i=this.material.map.image;if(i){var o={left:e.left/i.width,right:e.right/i.width,top:e.top/i.height,bottom:e.bottom/i.height};h(1,o.left,1),h(2,o.right,1),h(4,0,o.bottom),h(5,o.left,o.bottom),h(6,o.right,o.bottom),h(7,1,o.bottom),h(8,0,o.top),h(9,o.left,o.top),h(10,o.right,o.top),h(11,1,o.top),h(13,o.left,0),h(14,o.right,0);var a=e.width/2,r=e.height/2,s=-a+e.padding,l=a-e.padding,c=r-e.padding,d=-r+e.padding;u(0,-a,r),u(1,s,r),u(2,l,r),u(3,a,r),u(4,-a,c),u(5,s,c),u(6,l,c),u(7,a,c),u(8,-a,d),u(9,s,d),u(10,l,d),u(11,a,d),u(13,s,-r),u(14,l,-r),u(12,-a,-r),u(15,a,-r),this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.uv.needsUpdate=!0}function u(e,n,i){t[3*e]=n,t[3*e+1]=i}function h(e,t,i){n[2*e]=t,n[2*e+1]=i}},update:function(e){var t=this.data;this.material.color.setStyle(t.color),this.material.opacity=t.opacity,this.material.transparent=t.transparent,this.material.wireframe=t.debug,this.material.side=function(e){switch(e){case"back":return THREE.BackSide;case"double":return THREE.DoubleSide;default:return THREE.FrontSide}}(t.side);var n=AFRAME.utils.diff(t,e);"src"in n?this.updateMap():("width"in n||"height"in n||"padding"in n||"left"in n||"top"in n||"bottom"in n||"right"in n)&&this.regenerateMesh()},remove:function(){},pause:function(){},play:function(){}})},function(e,t){var n=[0,90,180,270],i=["right","up","left","down"],o={NULL:{START:"thumbstart",END:"thumbend"}};i.forEach(e=>{o[e]={},o[e].START="thumb"+e+"start",o[e].END="thumb"+e+"end"});AFRAME.registerComponent("thumb-controls",{schema:{thresholdAngle:{default:89.5},thresholdPad:{default:.05},thresholdStick:{default:.75}},init:function(){var e=this.el;this.onTrackpadDown=this.onTrackpadDown.bind(this),this.onTrackpadUp=this.onTrackpadUp.bind(this),this.directionStick="",this.directionTrackpad="",e.components["tracked-controls"]&&(this.axis=e.components["tracked-controls"].axis),this.type="STICK",e.addEventListener("controllerconnected",t=>{this.axis=e.components["tracked-controls"].axis,"oculus-touch-controls"!==t.detail.name&&"windows-motion-controls"!==t.detail.name?this.type="PAD":this.type="STICK"})},play:function(){var e=this.el;e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("touchpaddown",this.onTrackpadDown),e.addEventListener("touchpadup",this.onTrackpadUp)},pause:function(){var e=this.el;e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("touchpaddown",this.onTrackpadDown),e.removeEventListener("touchpadup",this.onTrackpadUp)},onTrackpadDown:function(){var e,t=this.el;this.getDistance()<this.data.thresholdPad||(e=this.getDirection())&&(this.directionTrackpad=e,t.emit(o.NULL.START,null,!1),t.emit(o[this.directionTrackpad].START,null,!1))},onTrackpadUp:function(){var e=this.el;this.directionTrackpad&&(e.emit(o.NULL.END,null,!1),e.emit(o[this.directionTrackpad].END,null,!1),this.directionTrackpad="")},tick:function(){var e,t=this.el;if("PAD"!==this.type){if(!this.directionStick&&this.getDistance()>this.data.thresholdStick){if(!(e=this.getDirection()))return;return this.directionStick=e,t.emit(o.NULL.START,null,!1),void t.emit(o[this.directionStick].START,null,!1)}this.directionStick&&this.getDistance()<this.data.thresholdStick&&(t.emit(o.NULL.END,null,!1),t.emit(o[this.directionStick].END,null,!1),this.directionStick="")}},getDistance:function(){var e=this.axis;return this.axis?"PAD"===this.type?Math.sqrt(e[1]*e[1]+e[0]*e[0]):Math.sqrt(e[3]*e[3]+e[2]*e[2]):0},getDirection:function(){var e,t,o,a,r;for(e=this.getAngle(),a=this.data.thresholdAngle/2,o=0;o<n.length;o++){if((r=n[o]+a)>360&&(r-=360),(t=n[o]-a)<0&&(e>=360+t&&e<=360||e>=0&&e<=r))return i[o];if(e>=t&&e<=r)return i[o]}},getAngle:function(){var e,t=this.axis;return this.axis?((e="PAD"===this.type?Math.atan2(-t[1],t[0]):Math.atan2(-t[3],t[2]))<0&&(e=2*Math.PI+e),THREE.Math.radToDeg(e)):0}}),AFRAME.registerComponent("thumb-controls-debug",{dependencies:["thumb-controls"],schema:{controllerType:{type:"string"},hand:{type:"string"},enabled:{default:!1}},init:function(){var e,t,n,i,o=this.el;if(this.data.enabled||AFRAME.utils.getUrlParameter("debug-thumb")){console.log("%c debug-thumb","background: #111; color: red");var a=function(){o.components["tracked-controls"].handleAxes=()=>{},n={axis:t=[0,0,0]},o.components["tracked-controls"].axis=t,o.components["thumb-controls"].axis=t};o.components["tracked-controls"]?a():this.el.addEventListener("controllerconnected",(function(){a()})),(i=this.createCanvas()).addEventListener("click",i=>{"vive-controls"===this.data.controllerType?e?o.emit("trackpadup"):o.emit("trackpaddown"):e&&(t[0]=0,t[1]=0,o.emit("axismove",n,!1)),e=!e}),i.addEventListener("mousemove",a=>{var r;e&&(r=i.getBoundingClientRect(),t[0]=(a.clientX-r.left)/240*2-1,t[1]=(a.clientY-r.top)/240*2-1,o.emit("axismove",n,!1))}),i.addEventListener("mouseleave",i=>{e&&(t[0]=0,t[1]=0,o.emit("axismove",n,!1))})}},createCanvas:function(){var e,t;return(e=document.createElement("canvas")).classList.add("debugThumb"),e.height=240,e.width=240,e.style.bottom=0,e.style.borderRadius="250px",e.style.opacity=.5,e.style.position="fixed",e.style.zIndex=999999999,"left"===this.data.hand?e.style.left=0:e.style.right=0,(t=e.getContext("2d")).fillStyle="#333",t.fillRect(0,0,240,240),document.body.appendChild(e),e}})},function(e,t,n){var i={"./active-item.js":54,"./beat-cut-fx.js":55,"./beat-generator.js":14,"./beat-hit-sound.js":56,"./beat.js":19,"./blade.js":57,"./check-vr.js":58,"./console-shortcuts.js":59,"./controller.js":60,"./copy-texture.js":61,"./cursor-laser.js":62,"./cursor-mesh.js":63,"./curve-follow-rig-reset.js":64,"./cutfx-shader.js":65,"./debug-beat-generator.js":68,"./debug-beat-positioning.js":69,"./debug-controller.js":70,"./debug-cursor.js":71,"./debug-intro.js":72,"./debug-song-time.js":73,"./debug-state.js":74,"./delayed-proxy-event.js":75,"./difficulty-background.js":76,"./difficulty-filter.js":77,"./difficulty-text.js":78,"./follow-position.js":79,"./follow-z.js":80,"./gameover.js":81,"./gpu-preloader.js":82,"./gradient-shader.js":83,"./hand-swapper.js":85,"./handstar-shader.js":86,"./haptics-wall.js":89,"./haptics-weapon.js":90,"./headfist.js":91,"./history.js":92,"./intro-song.js":93,"./keyboard-raycastable.js":94,"./materials.js":95,"./menu-controls.js":110,"./menu-difficulty-select.js":111,"./menu-genre.js":112,"./menu-midsection.js":113,"./menu-mode.js":114,"./menu-playlist-button.js":115,"./menu-playlist.js":116,"./menu-selected-challenge-image.js":117,"./menu-slide-animation.js":118,"./multiplier-ring.js":119,"./no-frustum-cull.js":120,"./panel-shader.js":121,"./pause.js":124,"./pauser.js":125,"./play-sound.js":126,"./player-height.js":128,"./plume.js":129,"./punch.js":130,"./raycaster-target.js":131,"./recenter.js":132,"./ring.js":133,"./score-texts.js":136,"./search-thumbnail-atlas.js":137,"./search.js":138,"./song-info-positioner.js":141,"./song-preview.js":142,"./song-progress-info.js":143,"./song.js":144,"./stage-colors.js":145,"./stage-lasers.js":146,"./stars.js":147,"./stats-param.js":148,"./stepback.js":149,"./sub-object.js":150,"./super-keyboard.js":151,"./supercurve-color.js":152,"./supercurve-shader.js":153,"./supercurve.js":156,"./supercutfx-shader.js":159,"./supercutfx.js":160,"./tail.js":161,"./text-counter.js":162,"./text-geometry.js":163,"./text-truncate.js":164,"./text-uppercase.js":165,"./toggle-pause-play.js":166,"./trail.js":167,"./tunnels.js":168,"./vertex-colors-buffer.js":169,"./victory-accuracy-ring.js":170,"./victory-rank.js":171,"./visible-raycastable.js":172,"./wall-shader.js":173,"./wall.js":176,"./weapon-particles.js":177,"./zip-loader.js":178};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=53},function(e,t,n){if(AFRAME.registerComponent("active-item",{dependencies:["material"],schema:{active:{default:!1},opacity:{default:1}},init:function(){this.defaultOpacity=this.el.getAttribute("material").opacity,this.materialObj={opacity:this.data.opacity}},update:function(){var e=this.el;this.data.active?(e.setAttribute("material",this.materialObj),e.object3D.visible=!0):(e.setAttribute("material","opacity",this.defaultOpacity),e.components.animation__mouseleave&&setTimeout(()=>{e.emit("mouseleave",null,!1)}))}}),AFRAME.registerComponent("active-text-color",{dependencies:["text"],schema:{active:{default:!1},color:{default:"#333"}},init:function(){this.defaultColor=this.el.getAttribute("text").color},update:function(){var e=this.el;this.data.active?e.setAttribute("text","color",this.data.color):e.setAttribute("text","color",this.defaultColor)}}),window.AFRAME){const t=["active-item","active-text-color"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=new THREE.Vector3,o={right:0,upright:45,up:90,upleft:135,left:180,downleft:225,down:270,downright:315},a={right:new THREE.Vector2(0,1),upright:new THREE.Vector2(-.5,.5),up:new THREE.Vector2(-1,0),upleft:new THREE.Vector2(-.5,-.5),left:new THREE.Vector2(0,-1),downleft:new THREE.Vector2(.5,-.5),down:new THREE.Vector2(1,0),downright:new THREE.Vector2(.5,.5)};function r(e,t){e.x+=(Math.random()-.5)*t,e.y+=(Math.random()-.5)*t,e.z+=(Math.random()-.5)*t}if(AFRAME.registerComponent("beat-cut-fx",{schema:{color:{type:"string"},type:{oneOf:["beat","dot","mine"],default:"beat"}},init:function(){this.breaking=!1,this.fx=null,this.fxpool=null,this.pieces=[],this.pool=null,this.returnToPoolTimer=500,this.el.addEventListener("model-loaded",this.setupModel.bind(this)),this.el.addEventListener("explode",this.explode.bind(this),!1)},update:function(){const e=this.el.sceneEl,t=this.data.color;"beat"===this.data.type?(this.material=e.systems.materials[t+"BeatPieces"],this.poolBeat=e.components["pool__beat-broken-"+t],this.poolBeatFx=e.components["pool__beat-fx-"+t],this.poolPunchFx=e.components["pool__punch-fx-"+t]):"dot"===this.data.type?(this.material=e.systems.materials[t+"BeatPieces"],this.poolBeat=e.components[`pool__beat-broken-${t}-dot`],this.poolPunch=e.components[`pool__punch-broken-${t}-dot`],this.poolBeatFx=e.components["pool__beat-fx-"+t],this.poolPunchFx=e.components["pool__punch-fx-"+t]):(this.material=e.systems.materials.minePieces,this.poolBeat=e.components["pool__beat-broken-mine"],this.poolBeatFx=e.components["pool__beat-fx-mine"],this.poolPunchFx=e.components["pool__punch-fx-mine"])},setupModel:function(e){const t=e.detail.model;this.pieces=t.children;for(let e=0;e<this.pieces.length;e++){let t=this.pieces[e];t.restPosition=t.position.clone(),t.restRotation=t.rotation.clone(),t.posVelocity=new THREE.Vector3,t.rotVelocity=new THREE.Vector3,t.material=this.material}},explode:function(e){const t=e.detail.direction,n=e.detail.gameMode,s=e.detail.correctHit,l=e.detail.position,c=e.detail.rotation;let d=e.detail.beatDirection;if(l&&c&&t&&this.data.color===e.detail.color){if(this.el.object3D.position.copy(l),"classic"===n&&"mine"!==this.data.type){const e="dot"===this.data.type;e&&(d=Math.abs(t.x)>Math.abs(t.y)?"right":"down"),t.z*=.01,i.copy(t).multiplyScalar(-.0025).clampLength(0,.01);for(let t=0;t<this.pieces.length;t++){let n=this.pieces[t];if(n.posVelocity.copy(i),n.rotation.z=THREE.Math.degToRad(o[d]),s){let i=t%2==0?-.001:.001;n.posVelocity.x+=a[d].x*i,n.posVelocity.y+=a[d].y*i,!e||t<2?(r(n.posVelocity,.002),r(n.rotVelocity,.004)):(n.posVelocity.copy(this.pieces[t-2].posVelocity),n.rotVelocity.copy(this.pieces[t-2].rotVelocity))}else n.posVelocity.y+=.001,n.rotVelocity.z+=.01}}else for(let e=0;e<this.pieces.length;e++){let t=this.pieces[e];s?(t.posVelocity.copy(t.position).normalize().multiplyScalar(.002),t.posVelocity.z=-.004,r(t.posVelocity,.001),r(t.rotVelocity,.01)):(t.posVelocity.y+=.001,t.posVelocity.z-=.001)}this.pool=this["classic"===n?"poolBeat":"poolPunch"],null===this.fx&&(this.fxpool=this["classic"===n?"poolBeatFx":"poolPunchFx"],this.fx=this.fxpool.requestEntity()),this.fx&&(this.fx.play(),this.fx.object3D.position.copy(l),this.fx.object3D.rotation.copy(c),this.fx.emit("explode")),this.returnToPoolTimer=500,this.breaking=!0,this.el.play()}},returnToPool:function(){for(let e=0;e<this.pieces.length;e++){let t=this.pieces[e];t.position.copy(t.restPosition),t.rotation.copy(t.restRotation),t.posVelocity.set(0,0,0),t.rotVelocity.set(0,0,0),t.scale.set(1,1,1)}this.fx&&(this.fxpool.returnEntity(this.fx),this.fx=null),this.pool.returnEntity(this.el),this.breaking=!1},tick:function(e,t){if(this.breaking)if(this.returnToPoolTimer-=t,this.returnToPoolTimer<=0)this.returnToPool();else for(let e=0;e<this.pieces.length;e++){const n=this.pieces[e];n.position.addScaledVector(n.posVelocity,t),n.rotation.set(n.rotation.x+n.rotVelocity.x*t,n.rotation.y+n.rotVelocity.y*t,n.rotation.z+n.rotVelocity.z*t),"mine"!==this.data.type?(this.returnToPoolTimer<250&&n.scale.multiplyScalar(.94),n.posVelocity.multiplyScalar(.97),n.posVelocity.y-=3e-6*t):(n.scale.multiplyScalar(.94),n.posVelocity.multiplyScalar(.97))}}}),window.AFRAME){const t=["beat-cut-fx"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("beat-hit-sound",{directionsToSounds:{up:"",down:"",upleft:"left",upright:"right",downleft:"left",downright:"right",left:"left",right:"right"},init:function(){this.currentBeatEl=null,this.currentCutDirection="",this.processSound=this.processSound.bind(this),this.sourceCreatedCallback.bind(this);for(let e=1;e<=10;e++)this.el.setAttribute("sound__beathit"+e,{poolSize:8,positional:!1,src:"#hitSound"+e,volume:.185}),this.el.setAttribute(`sound__beathit${e}left`,{poolSize:8,positional:!1,src:`#hitSound${e}left`,volume:.185}),this.el.setAttribute(`sound__beathit${e}right`,{poolSize:8,positional:!1,src:`#hitSound${e}right`,volume:.185})},play:function(){for(let e=1;e<=10;e++)this.el.components["sound__beathit"+e].loaded||(this.el.setAttribute("sound__beathit"+e,"src",""),this.el.setAttribute("sound__beathit"+e,"src","#hitSound"+e)),this.el.components[`sound__beathit${e}left`].loaded||(this.el.setAttribute(`sound__beathit${e}left`,"src",""),this.el.setAttribute(`sound__beathit${e}left`,"src",`#hitSound${e}left`)),this.el.components[`sound__beathit${e}right`].loaded||(this.el.setAttribute(`sound__beathit${e}right`,"src",""),this.el.setAttribute(`sound__beathit${e}right`,"src",`#hitSound${e}right`))},playSound:function(e,t,n){const i=1+Math.floor(10*Math.random()),o=this.directionsToSounds[n||"up"];this.el.components[`sound__beathit${i}${o}`].playSound(this.processSound)},processSound:function(e){e.detune=0},sourceCreatedCallback:function(e){const t=this.getLayer(this.currentBeatEl.object3D.position.y);"bottom"===t?e.detune.setValueAtTime(-400,0):"top"===t&&e.detune.setValueAtTime(200,0),"down"===this.currentCutDirection&&e.detune.linearRampToValueAtTime(-400,1),"up"===this.currentCutDirection&&e.detune.linearRampToValueAtTime(400,1)},getLayer:function(e){return 1===e?"bottom":1.7===e?"top":"middle"}}),window.AFRAME){const t=["beat-hit-sound"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("blade",{schema:{enabled:{default:!1}},init:function(){const e=this.el;this.data;this.bladeHandle=e.querySelector(".bladeHandleHelper").object3D,this.bladeTip=e.querySelector(".bladeTipHelper").object3D,this.rigEl=document.getElementById("curveFollowRig"),this.strokeDirectionVector=new THREE.Vector3,this.strokeSpeed=0,this.bladeBottomPosition=new THREE.Vector3,this.bladeTipPositions=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.bladeWorldPositions=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.bladeEl=this.el.querySelector(".blade")},update:function(e){!e.enabled&&this.data.enabled&&this.bladeEl.emit("drawblade")},tickBeatSystem:function(e,t){this.data.enabled&&this.updateVelocity(t)},updateVelocity:function(e){const t=this.bladeTipPositions,n=this.bladeWorldPositions;this.data;n[2].copy(n[0]),n[3].copy(n[1]),this.bladeTip.getWorldPosition(n[0]),this.bladeHandle.getWorldPosition(n[1]),t[2].copy(n[0]),this.rigEl.object3D.worldToLocal(t[2]),this.strokeDirectionVector.copy(t[2]).sub(t[0]);const i=this.strokeDirectionVector.length();this.strokeSpeed=i/(e/1e3),this.strokeDirectionVector.z=0,this.strokeDirectionVector.normalize();const o=t.shift();t.push(o)},checkCollision:function(){const e=new THREE.Box3,t=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],n=new THREE.Triangle;return function(i){if(this.strokeSpeed<1)return!1;for(let e=0;e<3;e++)t[e].copy(this.bladeWorldPositions[e]),i.blockEl.object3D.worldToLocal(t[e]),t[e].multiplyScalar(1.75);return n.set(t[0],t[1],t[2]),e.copy(i.bbox),e.expandByScalar(.02),"left"!==i.horizontalPosition&&"right"!==i.horizontalPosition||e.expandByScalar(.07),!!e.intersectsTriangle(n)||(t[3].copy(this.bladeWorldPositions[3]),i.blockEl.object3D.worldToLocal(t[3]),n.set(t[2],t[3],t[0]),!!e.intersectsTriangle(n))}}(),createDebugCube:function(e,t){const n=new THREE.BoxGeometry(.05,.05,.05),i=new THREE.Mesh(n,new THREE.MeshBasicMaterial({color:t,side:THREE.DoubleSide}));i.position.copy(e),this.el.sceneEl.object3D.add(i)}}),window.AFRAME){const t=["blade"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerSystem("check-vr",{init:function(){AFRAME.utils.device.isMobile()&&(document.getElementById("vrButton").style.display="none"),setTimeout(()=>{AFRAME.utils.device.checkHeadsetConnected()&&this.el.emit("displayconnected")},250)}}),window.AFRAME){const t=[],n=[],i=["check-vr"];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("console-shortcuts",{play:function(){window.$=e=>document.querySelector(e),window.$$=e=>document.querySelectorAll(e),window.$$$=e=>document.querySelector(`[${e}]`).getAttribute(e),window.$$$$=e=>document.querySelector(`[${e}]`).components[e],window.scene=this.el,window.state=this.el.systems.state.state}}),window.AFRAME){const t=["console-shortcuts"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("controller",{schema:{hand:{default:"right",oneOf:["left","right"]}},init:function(){const e=this.el,t=this.data;this.controllerType="",e.addEventListener("controllerconnected",e=>{this.controllerType=e.detail.name,this.el.setAttribute("cursor",this.config[this.controllerType].cursor||{})});const n={hand:t.hand,model:!1};e.setAttribute("daydream-controls",n),e.setAttribute("oculus-go-controls",n),e.setAttribute("oculus-touch-controls",{hand:t.hand,model:!1,orientationOffset:{x:0,y:0,z:0}}),e.setAttribute("vive-controls",n),e.setAttribute("vive-focus-controls",n),e.setAttribute("windows-motion-controls",n),e.setAttribute("generic-tracked-controller-controls",n)},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown","gripdown","abuttondown","bbuttondown","xbuttondown","ybuttondown"],upEvents:["triggerup","gripup","abuttonup","bbuttonup","xbuttonup","ybuttonup"]}},"vive-controls":{cursor:{downEvents:["trackpaddown","triggerdown","gripdown"],upEvents:["trackpadup","triggerup","gripup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown","gripdown"],upEvents:["trackpadup","triggerup","gripup"]}},"windows-motion-controls":{cursor:{downEvents:["trackpaddown","triggerdown","gripdown"],upEvents:["trackpadup","triggerup","gripup"]}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}}}}),window.AFRAME){const t=["controller"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("copy-texture",{dependencies:["geometry","material"],schema:{from:{type:"selector"}},init:function(){this.data.from.addEventListener("materialtextureloaded",()=>{this.copyTexture()}),this.copyTexture()},copyTexture:function(){const e=this.el,t=this.data.from,n=e.getObject3D("mesh").material;t.getObject3D("mesh")&&(n.map=t.getObject3D("mesh").material.map,n.map&&(n.map.needsUpdate=!0,n.needsUpdate=!0))}}),window.AFRAME){const t=["copy-texture"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("cursor-laser",{dependencies:["geometry"],schema:{enabled:{default:!0}},init:function(){const e=this.el;this.weaponEl=this.el.closest(".weapon");const t=this.el.getAttribute("geometry");e.object3D.position.z=-1*t.height/2,this.originalSize=t.height,this.currentLength=t.height},update:function(){this.el.object3D.visible=this.data.enabled},tick:function(){const e=this.el;if(!this.data.enabled)return;const t=this.weaponEl.components.cursor;if(!t)return;if(!t.intersectedEl)return e.object3D.position.z=-24.98,e.object3D.scale.x=.75,e.getObject3D("mesh").scale.y=50,void(this.currentLength=1);const n=this.weaponEl.components.raycaster.intersections[0];n&&(e.object3D.scale.x=1,e.object3D.position.z=-n.distance/2,e.getObject3D("mesh").scale.y=this.currentLength=n.distance)}}),window.AFRAME){const t=["cursor-laser"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("cursor-mesh",{schema:{active:{default:!0},cursorEl:{type:"selector"}},init:function(){this.scenePivotEl=document.getElementById("scenePivot")},update:function(){this.el.object3D.visible=this.data.active},tick:function(){var e,t,n=this.data.cursorEl,i=this.el,o=this.scenePivotEl;this.data.active&&n.components.cursor&&((t=n.components.cursor.intersectedEl)?(i.object3D.visible=!0,(e=n.components.raycaster.getIntersection(t))&&(i.object3D.position.copy(e.point),o&&i.object3D.rotation.copy(o.object3D.rotation))):i.object3D.visible=!1)}}),window.AFRAME){const t=["cursor-mesh"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("curve-follow-rig-reset",{schema:{isVictory:{type:"string"}},init:function(){this.el.sceneEl.addEventListener("cleargame",()=>{this.reset()})},update:function(e){const t=this.data;this.el;!e.isVictory&&t.isVictory&&this.reset()},reset:function(){this.el.components["supercurve-follow"].curveProgress=0,this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0)}}),window.AFRAME){const t=["curve-follow-rig-reset"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerShader("cutfxShader",{schema:{src:{type:"map",is:"uniform",default:"#cutfxImg"},color:{type:"color",is:"uniform",default:"#fff"},progress:{type:"number",is:"uniform"},transparent:{default:!0},blending:{default:"additive"},side:{default:"double"},depthTest:{default:!1},depthWrite:{default:!1}},vertexShader:n(66),fragmentShader:n(67)}),window.AFRAME){const t=[],n=["cutfxShader"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform vec3 color;\nuniform float progress;\n\nvoid main() {\n  vec3 col = color;\n  float alpha = smoothstep(progress, 1.0, texture2D(src, uvs).a);\n  gl_FragColor = vec4(col, alpha);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("debug-beat-generator",{dependencies:["beat-generator"],schema:{beatEnabled:{default:!1},stageEnabled:{default:!1}},init:function(){this.beatLoader=this.el.components["beat-generator"],this.selectedBeat={color:"red",position:"middleCenterLeft",type:"arrow",orientation:"up"},this.beats={},this.onKeyDown=this.onKeyDown.bind(this),(this.data.stageEnabled||AFRAME.utils.getUrlParameter("debugstage"))&&this.addDebugStageControls(),(this.data.beatEnabled||"gameplay"===AFRAME.utils.getUrlParameter("debugstate").trim())&&(window.addEventListener("keydown",this.onKeyDown),this.addDebugBeatControls())},spawn:function(){var e=this;Object.keys(this.beats).forEach((function(t){e.generateBeat(e.beats[t])}))},generateBeat:function(e){var t;"wall"!==e.type?(t="mine"===e.type?3:"red"===e.color?0:1,this.beatLoader.generateBeat({_lineIndex:this.beatLoader.positionHumanized[e.position].index,_lineLayer:this.beatLoader.positionHumanized[e.position].layer,_cutDirection:"dot"===e.type?8:this.beatLoader.orientationsHumanized.indexOf(e.orientation),_type:t})):this.generateWall(e)},generateWall:function(e){this.beatLoader.bpm=90,this.beatLoader.generateWall({_lineIndex:this.beatLoader.positionHumanized[e.position].index,_width:1,_duration:3})},onKeyDown:function(e){switch(e.keyCode){case 32:this.spawn()}},addDebugBeatControls:function(){const e=document.createElement("div"),t=this;var n;function i(t){const n=document.createElement("div");return n.id=t,n.style.marginBottom="20px",n.style.width="500px",n.style.display="inline-block",e.appendChild(n),n}function o(e,n,i){const o=document.createElement("div"),a=i||function(){const e=o.parentElement.querySelectorAll(".button");for(let t=0;t<e.length;t++)e[t].style.background="#000";o.style.background="#66f",t.selectedBeat[o.parentElement.id]=this.id,t["selected"+o.parentElement.id.charAt(0).toUpperCase()+o.parentElement.id.slice(1)+"El"]=this};return o.classList.add("button"),o.id=e,o.style.width="100px",o.style.height="30px",o.style.background="#000",o.style.color="#fff",o.style.zIndex=999999999,o.style.padding="5px",o.style.margin="5px",o.style.font="14px sans-serif",o.style.textAlign="center",o.style.lineHeight="30px",o.style.cursor="pointer",o.style.display="inline-block",o.innerHTML=e,n.appendChild(o),o.addEventListener("click",a),o}e.style.position="absolute",e.style.right="0",e.style.top="0",e.style.padding="10px",e.style.width="500px",e.style.height="600px",document.body.appendChild(e),function(){const t=i("type");o("arrow",t),o("dot",t),o("mine",t),o("wall",t),e.appendChild(t)}(),function(){const t=i("color");o("blue",t),o("red",t),e.appendChild(t)}(),function(){const t=i("orientation");o("top",t),o("left",t),o("right",t),o("down",t),e.appendChild(t)}(),(n=o("Set Beat",e,(function(){var e="mine"!==t.selectedBeat.type?" "+t.selectedBeat.color:"",n="arrow"!==t.selectedBeat.type?"":" "+t.selectedBeat.orientation;t.selectedBeat={position:t.selectedBeat.position,type:t.selectedBeat.type,orientation:t.selectedBeat.orientation,color:t.selectedBeat.color},t.selectedPositionEl&&(t.selectedPositionEl.innerHTML=t.selectedBeat.type+e+n,t.beats[t.selectedPositionEl.id]={position:t.selectedBeat.position,type:t.selectedBeat.type,orientation:t.selectedBeat.orientation,color:t.selectedBeat.color})}))).style.width="460px",n.style.bottomMargin="10px",function(){const e=i("position");o("topLeft",e),o("topCenterLeft",e),o("topCenterRight",e),o("topRight",e),o("middleLeft",e),o("middleCenterLeft",e),o("middleCenterRight",e),o("middleRight",e),o("bottomLeft",e),o("bottomCenterLeft",e),o("bottomCenterRight",e),o("bottomRight",e)}(),function(n,i){const a=o("Spawn (Space Bar)",e,()=>{t.spawn()});a.style.width="460px",a.style.bottomMargin="10px"}()},addDebugStageControls:function(){var e=0;const t=(t,n,i)=>{const o=document.createElement("div");o.style.position="absolute",o.id="stagecontrol"+t,o.style.width="100px",o.style.height="30px",o.style.top="element"===i?"20px":"70px",o.style.background="#000",o.style.color="#fff",o.style.zIndex=999999999,o.style.padding="5px",o.style.font="14px sans-serif",o.style.textAlign="center",o.style.cursor="pointer",o.style.left=20+120*t+"px",o.innerHTML=n,"element"===i?o.addEventListener("click",()=>{document.getElementById("stagecontrol"+e).style.background="#000",o.style.background="#66f",e=t}):o.addEventListener("click",()=>{this.beatLoader.generateEvent({_type:e,_value:t})}),document.body.appendChild(o)};["sky","tunnelNeon","leftStageLasers","rightStageLasers","floor"].forEach((e,n)=>{t(n,e,"element")}),["off","blue","blue","bluefade","","red","red","redfade"].forEach((e,n)=>{t(n,e,"value")})}}),window.AFRAME){const t=["debug-beat-generator"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=["left","middleleft","middleright","right"],o=["bottom","middle","top"];if(AFRAME.registerComponent("debug-beat-positioning",{play:function(){let e=AFRAME.utils.getUrlParameter("debugbeatpositioning");e&&("punch"!==e&&"classic"!==e&&(e="classic"),this.el.emit("debugbeatpositioning"),setTimeout(()=>{const t=this.el.sceneEl.components["beat-generator"];t.data.gameMode=e,scene.components["beat-system"].data.gameMode=e,scene.components["beat-system"].updateBeatPositioning(),i.forEach(n=>{o.forEach(i=>{let o=t.requestBeat("punch"===e?"dot":"arrow","red"),a=Math.random()<.5?"left":"right";o.components.beat.onGenerate(.001,n,i,a),o.object3D.renderOrder=9999,o.play(),o=t.requestBeat("dot","blue"),a=Math.random()<.5?"down":"up",o.components.beat.onGenerate(.0015,n,i,a),o.object3D.renderOrder=9999,o.play()})});const n=scene.components.pool__wall.requestEntity();n.components.wall.onGenerate(.0015,"left",4,4,!0),n.play(),document.getElementById("beatContainer").removeAttribute("bind__visible"),document.getElementById("beatContainer").object3D.visible=!0},500))}}),window.AFRAME){const t=["debug-beat-positioning"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-controller",{init:function(){var e,t;AFRAME.utils.getUrlParameter("debug")&&(console.log("%c debug-controller enabled ","background: #111; color: red"),e=document.getElementById("rightHand"),t=document.getElementById("leftHand"),e.setAttribute("tracked-controls","autoHide",!1),e.object3D.visible=!0,t.object3D.visible=!0,t.setAttribute("tracked-controls","autoHide",!1),AFRAME.utils.getUrlParameter("headfist")||(window.addEventListener("click",t=>{t.isTrusted&&(e.emit("triggerdown"),e.emit("triggerup"))}),"oculus"===AFRAME.utils.getUrlParameter("debug")?(e.emit("controllerconnected",{name:"oculus-touch-controls"}),t.emit("controllerconnected",{name:"oculus-touch-controls"}),e.setAttribute("controller","controllerType","oculus-touch-controls"),t.setAttribute("controller","controllerType","oculus-touch-controls")):(e.emit("controllerconnected",{name:"vive-controls"}),t.emit("controllerconnected",{name:"vive-controls"}),e.setAttribute("controller","controllerType","vive-controls"),t.setAttribute("controller","controllerType","vive-controls")),this.el.emit("enter-vr",null,!1),document.addEventListener("keydown",n=>{var i,o,a,r;n.shiftKey&&(32!==n.keyCode?81!==n.keyCode?(78===n.keyCode&&(this.secondaryGripDown?(t.emit("gripup"),this.secondaryGripDown=!1):(t.emit("gripdown"),this.secondaryGripDown=!0)),77===n.keyCode&&(this.primaryGripDown?(e.emit("gripup"),this.primaryGripDown=!1):(e.emit("gripdown"),this.primaryGripDown=!0)),49===n.keyCode&&t.emit("menudown"),n.ctrlKey?(a=t.getAttribute("position"),72===n.keyCode&&(a.x-=.02),74===n.keyCode&&(a.y-=.02),75===n.keyCode&&(a.y+=.02),76===n.keyCode&&(a.x+=.02),59!==n.keyCode&&186!==n.keyCode||(a.z-=.01),222===n.keyCode&&(a.z+=.01),t.setAttribute("position",AFRAME.utils.clone(a))):(i=e.getAttribute("position"),72===n.keyCode&&(i.x-=.02),74===n.keyCode&&(i.y-=.02),75===n.keyCode&&(i.y+=.02),76===n.keyCode&&(i.x+=.02),59!==n.keyCode&&186!==n.keyCode||(i.z-=.02),222===n.keyCode&&(i.z+=.02),e.setAttribute("position",AFRAME.utils.clone(i))),n.ctrlKey?(r=t.getAttribute("rotation"),89===n.keyCode&&(r.x-=10),79===n.keyCode&&(r.x+=10),85===n.keyCode&&(r.y-=10),73===n.keyCode&&(r.y+=10),t.setAttribute("rotation",AFRAME.utils.clone(r))):(o=e.getAttribute("rotation"),89===n.keyCode&&(o.x-=10),79===n.keyCode&&(o.x+=10),85===n.keyCode&&(o.y-=10),73===n.keyCode&&(o.y+=10),e.setAttribute("rotation",AFRAME.utils.clone(o)))):this.isSecondaryTriggerDown?(t.emit("triggerup"),this.isSecondaryTriggerDown=!1):(t.emit("triggerdown"),this.isSecondaryTriggerDown=!0):this.isTriggerDown?(e.emit("triggerup"),this.isTriggerDown=!1):(e.emit("triggerdown"),this.isTriggerDown=!0))})))},play:function(){var e,t;if(this.bounds=document.body.getBoundingClientRect(),!AFRAME.utils.getUrlParameter("debug"))return;if(AFRAME.utils.getUrlParameter("headfist"))return;e=document.getElementById("rightHand"),(t=document.getElementById("leftHand")).object3D.position.set(-.2,1.5,-.5),e.object3D.position.set(.2,1.5,-.5),t.setAttribute("rotation",{x:35,y:0,z:0});const n=AFRAME.utils.getUrlParameter("type");[e,t].forEach(e=>{e.querySelector(".laser").object3D.visible=!1,"classic"===n?(e.querySelector(".bladeContainer").removeAttribute("bind__visible"),e.querySelector(".bladeContainer").object3D.visible=!0,e.querySelector(".bladeContainer").object3D.scale.set(1,1,1)):"punch"===n?(e.querySelector(".punch").removeAttribute("bind__visible"),e.querySelector(".punch").object3D.visible=!0,e.querySelector(".punch").object3D.visible=!0,e.querySelector(".bladeHandle").object3D.visible=!1):"ride"===n&&(e.querySelector(".handStar").removeAttribute("bind__visible"),e.querySelector(".handStar").object3D.visible=!0,e.querySelector(".bladeHandle").object3D.visible=!1)})},onMouseMove:function(){const e=new THREE.Vector3,t=new THREE.Vector2,n=new THREE.Vector3;return function(i){const o=this.bounds,a=this.el.sceneEl.camera,r=i.clientX-o.left,s=i.clientY-o.top;t.x=r/o.width*2-1,t.y=-s/o.height*2-1,document.getElementById("camera").object3D.getWorldPosition(n),e.set(t.x,t.y,.5).unproject(a).sub(n).normalize();const l=document.getElementById("rightHand").object3D.position,c=-n.z/e.z;a.getWorldPosition(l).add(e.multiplyScalar(c)),l.y+=.8}}()}),window.AFRAME){const t=["debug-controller"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-cursor",{init:function(){},log:function(e,t,n){t.id?console.log(`%c[${e}] ${t.id}`,"color: "+n):(console.log(`%c[${e}]`,"color: "+n),console.log(t))}}),window.AFRAME){const t=["debug-cursor"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=AFRAME.utils.getUrlParameter("skipintro");if(AFRAME.registerComponent("debug-intro",{play:function(){i&&document.getElementById("startButton").emit("click")}}),window.AFRAME){const t=["debug-intro"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-song-time",{dependencies:["song"],init:function(){AFRAME.utils.getUrlParameter("debug-song-time")&&setInterval(()=>{console.log(this.el.components.song.getCurrentTime())},250)}}),window.AFRAME){const t=["debug-song-time"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("debug-state",{play:function(){const e=AFRAME.utils.getUrlParameter("debugstate").trim();e&&setTimeout(()=>{e.split(",").forEach(e=>{this.el.sceneEl.emit("debug"+e.trim(),null,!1)})},500)}}),window.AFRAME){const t=["debug-state"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("delayed-proxy-event",{schema:{captureBubbles:{default:!1},enabled:{default:!0},event:{type:"string"},from:{type:"string"},to:{type:"string"},as:{type:"string"},bubbles:{default:!1},delay:{default:0,type:"int"}},multiple:!0,init:function(){var e,t,n,i=this.data,o=this.el,a=this;if(i.from?e="PARENT"===i.from?[o.parentNode]:document.querySelectorAll(i.from):n="CHILDREN"===i.to?o.querySelectorAll("*"):"SELF"===i.to?[o]:document.querySelectorAll(i.to),i.from)for(t=0;t<e.length;t++)this.addEventListenerFrom(e[t]);else o.addEventListener(i.event,(function(e){setTimeout(()=>{var i=a.data;if(i.enabled&&(i.captureBubbles||e.target===o))for(t=0;t<n.length;t++)n[t].emit(i.as||i.event,e.detail?e.detail:null,i.bubbles)},i.delay)}))},addEventListenerFrom:function(e){var t=this.data,n=this;e.addEventListener(t.event,(function(i){setTimeout(()=>{var t=n.data;t.enabled&&(t.captureBubbles||i.target===e)&&n.el.emit(t.as||t.event,i.detail?i.detail:null,!1)},t.delay)}))}}),window.AFRAME){const t=["delayed-proxy-event"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("difficulty-background",{schema:{enabled:{type:!1}},update:function(){this.data.enabled?this.el.setAttribute("raycastable",""):this.el.removeAttribute("raycastable")}}),window.AFRAME){const t=["difficulty-background"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("difficulty-filter",{events:{click:function(e){this.el.sceneEl.emit("difficultyfilter",e.target.parentNode.dataset.difficultyFilter)}}}),window.AFRAME){const t=["difficulty-filter"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("difficulty-text",{schema:{id:{value:"Standard-Easy"}},update:function(){this.el.setAttribute("text","value",this.data.id.replace("Standard-","").replace("-","\n"))}}),window.AFRAME){const t=["difficulty-text"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("follow-position",{schema:{target:{type:"selector"}},tick:function(){this.el.object3D.position.copy(this.data.target.object3D.position)}}),window.AFRAME){const t=["follow-position"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("follow-z",{schema:{offset:{type:"vec3"},target:{type:"selector"}},tick:function(){this.data.target&&(this.el.object3D.position.copy(this.data.offset),this.el.object3D.position.z+=this.data.target.object3D.position.z)}}),window.AFRAME){const t=["follow-z"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("gameover",{schema:{isGameOver:{default:!1}},init:function(){this.beatContainer=document.getElementById("beatContainer"),this.gameOverEls=document.querySelectorAll("[animation__gameover]")},update:function(e){this.data;!e.isGameOver&&this.data.isGameOver&&(this.triggerAnimations(),this.countDown=1),e.isGameOver&&!this.data.isGameOver&&this.reset()},tick:function(e,t){this.data.isGameOver&&this.countDown>=0&&(this.beatContainer.object3D.position.z=1.5*-Math.pow(1-this.countDown,2),this.countDown-=t/1e3)},reset:function(){this.beatContainer.object3D.position.z=0,this.el.sceneEl.setAttribute("stage-colors","color","blue")},triggerAnimations:function(){for(let e=0;e<this.gameOverEls.length;e++)this.gameOverEls[e].emit("gameover",null,!1);this.el.emit("textglowoff",null,!1),this.el.emit("bgcolorgameover",null,!1)}}),window.AFRAME){const t=["gameover"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){let i=0;if(AFRAME.registerComponent("gpu-preloader",{dependencies:["materials"],play:function(){setTimeout(()=>{this.preloadFromSelector("#mainLogo"),this.preloadFromSelector("#prevArrow"),this.preloadFromSelector("#stepback"),this.preloadFromSelector(".difficultyBackground"),this.preloadFromSelector(".genreIcon"),this.preloadFromSelector(".merkababloom"),this.preloadFromSelector(".searchResultBackground"),this.preloadMaterialsComponentTextures(),this.preloadKeyboard(),this.preloadSlice(),this.preloadEnvMap(),this.preloadFXs()},1e3)},preloadFromSelector:function(e){const t=document.querySelector(e);this.preloadTexture(t.getObject3D("mesh").material.map)},preloadMaterialsComponentTextures:function(){const e=this.el.systems.materials.textureList;for(var t=0;t<e.length;t++)this.preloadTexture(e[t])},preloadKeyboard:function(){const e=document.getElementById("keyboard").components["super-keyboard"];this.preloadTexture(e.kbImg.getObject3D("mesh").material.map),this.preloadTexture(e.keyColorPlane.getObject3D("mesh").material.map)},preloadSlice:function(){const e=document.getElementById("searchPrevPage");this.preloadTexture(e.components.slice9.material.map)},preloadEnvMap:function(){const e=document.querySelector("#wallContainer [wall]");this.preloadTexture(e.components.material.material.uniforms.environment.value)},preloadFXs:function(){const e=document.querySelector("#rigContainer [mixin~=blueBeatFX]");this.preloadTexture(e.components.material.material.uniforms.src.value);const t=document.querySelector("#rigContainer [mixin~=mineFX]");this.preloadTexture(t.components.material.material.map)},preloadTexture:function(e){e&&e.image?e.image.complete?this.el.renderer.setTexture2D(e,i++%8):console.warn("[gpu-preloader] Error preloading, image not loaded",e):console.warn("[gpu-preloader] Error preloading texture",e)}}),window.AFRAME){const t=["gpu-preloader"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerShader("gradientShader",{schema:{color1:{type:"color",is:"uniform"},color2:{type:"color",is:"uniform"}},vertexShader:n(15),fragmentShader:n(84)}),window.AFRAME){const t=[],n=["gradientShader"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nuniform vec3 color1;\nuniform vec3 color2;\n\nvoid main () {\n  float mixDistance = distance(uvs, vec2(0.5, 0));\n  float alphaDistance = min(1., (0.5 - distance(uvs, vec2(0.5))) * 2.5);\n  gl_FragColor = vec4(mix(color1, color2, pow(mixDistance, 2.4)), alphaDistance);\n}\n"},function(e,t,n){const i=["triggerdown","gripdown","abuttondown","bbuttondown","xbuttondown","ybuttondown","trackpaddown"];if(AFRAME.registerComponent("hand-swapper",{schema:{enabled:{default:!1}},init:function(){this.swapHand=this.swapHand.bind(this),i.forEach(e=>{this.el.addEventListener(e,this.swapHand)})},swapHand:function(){this.data.enabled&&this.el.sceneEl.emit("activehandswap",null,!1)}}),window.AFRAME){const t=["hand-swapper"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i);if(AFRAME.registerShader("handStar",{schema:{colorPrimary:{type:"color",is:"uniform",default:o.a.initial.primary},colorSecondary:{type:"color",is:"uniform",default:o.a.initial.secondary},colorTertiary:{type:"color",is:"uniform",default:o.a.initial.tertiary},pulse:{type:"number",is:"uniform",default:0},transparent:{default:!0},side:{default:"back"},depthTest:{default:!1}},vertexShader:n(87),fragmentShader:n(88)}),window.AFRAME){const t=[],n=["handStar"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying float fresnel;\nuniform float pulse;\n\nvoid main() {\n  vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  vec3 worldNormal = normalize(mat3(modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz) * normal);\n  vec3 viewVector =  normalize(vWorldPosition - cameraPosition);\n  fresnel = 0.08 * pow(0.4 + dot(viewVector, worldNormal), 6.0 + pulse);\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying float fresnel;\nuniform float pulse;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nuniform vec3 colorTertiary;\n\nvoid main() {\n  vec3 colorize = vWorldPosition-cameraPosition;\n  colorize = clamp(colorize + 0.5, vec3(0.0), vec3(1.0));\n  vec3 col = mix(mix(colorPrimary, colorSecondary, colorize.x), colorTertiary, colorize.z);\n  col += (fresnel * pulse) * 0.1;\n  gl_FragColor = vec4 (col, clamp(fresnel, 0.0, 1.0));\n}\n"},function(e,t,n){if(AFRAME.registerComponent("haptics-wall",{schema:{enabled:{default:!1}},init:function(){const e=this.el;this.isHittingWall=!1,e.setAttribute("haptics__wall",{dur:50,force:.15}),this.checkIfHittingWall=this.checkIfHittingWall.bind(this),e.addEventListener("mouseenter",this.checkIfHittingWall),e.addEventListener("mouseleave",this.checkIfHittingWall),this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),50)},checkIfHittingWall:function(){const e=this.el.components.raycaster__game.intersectedEls;this.isHittingWall=!1;for(let t=0;t<e.length;t++)if(e[t].components.wall)return void(this.isHittingWall=!0)},tick:function(){this.data.enabled&&this.isHittingWall&&this.el.components.haptics__wall.pulse()}}),window.AFRAME){const t=["haptics-wall"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("haptics-weapons",{schema:{enabled:{default:!1}},init:function(){const e=this.el;this.isColliding=!1,this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),100),e.setAttribute("haptics__weapon",{dur:100,force:.075}),e.addEventListener("mouseenter",t=>{if(!t.detail||!t.detail.intersectedEl||!this.data.enabled)return;const n=t.detail.intersectedEl;n.classList.contains("blade")&&n!==e?(this.isColliding=!0,this.el.components.haptics__weapon.pulse()):this.isColliding=!1}),e.addEventListener("mouseleave",e=>{this.isColliding=!1})},tick:function(){this.isColliding&&this.data.enabled&&this.el.components.haptics__weapon.pulse()}}),window.AFRAME){const t=["haptics-weapons"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=!!AFRAME.utils.getUrlParameter("headfist");if(AFRAME.registerComponent("headfist",{schema:{hand:{type:"string"},isPlaying:{default:!1}},init:function(){console.log("[headfist] "+i),i&&(this.camera=document.getElementById("camera").object3D,this.originalParent=this.el.object3D.parent)},update:function(){const e=this.el;if(i&&this.camera)return this.data.isPlaying?(this.camera.add(e.object3D),e.object3D.rotation.set(-5,0,0),e.object3D.position.set("right"===this.data.hand?.175:-.175,.15,-.2),e.components["tracked-controls"].pause(),e.components["tracked-controls-webvr"]&&e.components["tracked-controls-webvr"].pause(),void(e.components["tracked-controls-webxr"]&&e.components["tracked-controls-webxr"].pause())):void(e.object3D.parent!==this.originalParent&&(console.log("[headfist] Detach."),this.originalParent.add(e.object3D),e.components["tracked-controls-webvr"]&&e.components["tracked-controls-webvr"].play(),e.components["tracked-controls-webxr"]&&e.components["tracked-controls-webxr"].play()))}}),window.AFRAME){const t=["headfist"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("history",{schema:{challengeId:{type:"string"},songName:{type:"string"},songSubName:{type:"string"}},update:function(){const e=this.data;history.pushState("",e.songName,updateQueryParam(window.location.href,"challenge",e.challengeId)),document.title="Super Saber - "+e.songName}}),window.AFRAME){const t=["history"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("intro-song",{schema:{isPlaying:{default:!0},isSearching:{default:!1}},init:function(){this.analyserEl=document.getElementById("audioAnalyser"),this.audio=document.getElementById("introSong"),this.timeout=null},update:function(e){const t=this.audio;this.el.sceneEl.isPlaying&&(!e.isSearching&&this.data.isSearching||(!e.isPlaying&&this.data.isPlaying&&(this.analyserEl.components.audioanalyser.resumeContext(),this.analyserEl.setAttribute("audioanalyser","src",t),this.fadeInAudio()),e.isPlaying&&!this.data.isPlaying&&t.pause()))},pause:function(){this.audio.pause()},play:function(){this.fadeInAudio()},fadeInAudio:function(){if(AFRAME.utils.getUrlParameter("mute"))return;const e=this.analyserEl.components.audioanalyser.context,t=this.analyserEl.components.audioanalyser.gainNode;t.gain.setValueAtTime(0,e.currentTime),this.audio.play(),t.gain.linearRampToValueAtTime(.5,e.currentTime+.5)}}),window.AFRAME){const t=["intro-song"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("keyboard-raycastable",{dependencies:["super-keyboard"],schema:{condition:{default:""}},play:function(){this.el.components["super-keyboard"].kbImg.setAttribute("bind-toggle__raycastable",this.data.condition)}}),window.AFRAME){const t=["keyboard-raycastable"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=n(0),o=new THREE.Color;function a(e,t,n){o.set(n),e.uniforms?(e.uniforms[t].value.x=o.r,e.uniforms[t].value.y=o.g,e.uniforms[t].value.z=o.b):e[t].set(n)}function r(e,t,n,i,o,a){e.fillStyle=t,e.fillRect(n,i,o,a)}function s(e,t,n,i,o,a,r){let s;s=a>r?e.createLinearGradient(0,0,a,0):e.createLinearGradient(0,0,0,r),s.addColorStop(0,t),s.addColorStop(1,n),e.fillStyle=s,e.fillRect(i,o,a,r)}if(AFRAME.registerSystem("materials",{schema:{},init:function(){this.curve=null,this.panelMaterials=[];const e=localStorage.getItem("colorScheme")||"default";this.scheme=i.schemes[e],this.textureList=[],this.beatsCanvas=document.createElement("canvas"),this.beatsTexture=new THREE.CanvasTexture(this.beatsCanvas),this.generateBeatsTexture(),this.textureList.push(this.beatsTexture),this.envmapCanvas=document.createElement("canvas"),this.envmapTexture=new THREE.CanvasTexture(this.envmapCanvas),this.generateEnvmapTexture(),this.textureList.push(this.envmapTexture),this.fistsCanvas=document.createElement("canvas"),this.fistsTexture=new THREE.CanvasTexture(this.fistsCanvas),this.generateFistsTexture(),this.textureList.push(this.fistsTexture),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.createMaterials()}):this.createMaterials()},play:function(){this.setColorScheme()},tick:function(e,t){this.aurora.uniforms.time.value=e,this.home.animate&&(this.home.uniforms.time.value=e),this.leftFistWeapon.uniforms.time.value=e,this.leftWeapon.uniforms.time.value=e,this.rightFistWeapon.uniforms.time.value=e,this.rightWeapon.uniforms.time.value=e,this.rings.uniforms.time.value=e,this.tube.uniforms.time.value=e},createMaterials:function(){const e=this.scheme;this.tunnel=new THREE.ShaderMaterial({vertexShader:n(96),fragmentShader:n(97),uniforms:{fogColor:{value:new THREE.Color(e.primary)},color1:{value:new THREE.Color(e.primary)},color2:{value:new THREE.Color(e.secondary)},color3:{value:new THREE.Color(e.tertiary)},scale:{value:1}},transparent:!0}),this.merkaba=new THREE.MeshBasicMaterial({color:new THREE.Color(e.primary)}),this.backglow=new THREE.MeshBasicMaterial({transparent:!0,map:(new THREE.TextureLoader).load(document.getElementById("backGlowImg").src),color:new THREE.Color(e.primary)}),this.textureList.push(this.backglow.map),this.aurora=new THREE.ShaderMaterial({vertexShader:n(98),fragmentShader:n(99),uniforms:{colorPrimary:{value:new THREE.Color(e.primary)},colorSecondary:{value:new THREE.Color(e.secondary)},time:{value:0}},transparent:!0}),this.rings=new THREE.ShaderMaterial({vertexShader:n(100),fragmentShader:n(101),uniforms:{colorPrimary:{value:new THREE.Color(e.primary)},colorSecondary:{value:new THREE.Color(e.secondary)},colorTertiary:{value:new THREE.Color(e.tertiary)},time:{value:0}},transparent:!0,depthWrite:!1}),this.moon=new THREE.ShaderMaterial({vertexShader:n(102),fragmentShader:n(103),uniforms:{map:{value:(new THREE.TextureLoader).load(document.getElementById("moonImg").src)},tint:{value:new THREE.Color(e.secondarybright)}},transparent:!0}),this.textureList.push(this.moon.uniforms.map.value),this.home=new THREE.ShaderMaterial({vertexShader:n(104),fragmentShader:n(105),uniforms:{color1:{value:new THREE.Color(e.primary)},color2:{value:new THREE.Color(e.secondary)},color3:{value:new THREE.Color(e.tertiary)},src:{value:(new THREE.TextureLoader).load(document.getElementById("homeShadowImg").src)},time:{value:0}},transparent:!0}),this.textureList.push(this.home.uniforms.src.value);const t=(new THREE.TextureLoader).load(document.getElementById("weaponImg").src);t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,t.repeat.set(2,2),t.magFilter=THREE.NearestFilter,this.textureList.push(t),this.rightWeapon=new THREE.ShaderMaterial({vertexShader:n(20),fragmentShader:n(21),uniforms:{src:{value:t},color:{value:new THREE.Color(e.secondary)},thickness:{value:1.6},time:{value:0}},transparent:!0,blending:THREE.AdditiveBlending}),this.leftWeapon=new THREE.ShaderMaterial({vertexShader:n(20),fragmentShader:n(21),uniforms:{src:{value:t},color:{value:new THREE.Color(e.primary)},thickness:{value:1.6},time:{value:0}},transparent:!0,blending:THREE.AdditiveBlending}),this.leftFistWeapon=new THREE.ShaderMaterial({vertexShader:n(15),fragmentShader:n(22),uniforms:{src:{value:t},color:{value:new THREE.Color(e.primary)},time:{value:0}},side:THREE.DoubleSide,transparent:!0,blending:THREE.AdditiveBlending}),this.rightFistWeapon=new THREE.ShaderMaterial({vertexShader:n(15),fragmentShader:n(22),uniforms:{src:{value:t},color:{value:new THREE.Color(e.secondary)},time:{value:0}},side:THREE.DoubleSide,transparent:!0,blending:THREE.AdditiveBlending});const o=(new THREE.TextureLoader).load(document.getElementById("weaponImg").src),a=(new THREE.TextureLoader).load(document.getElementById("weaponHandleImg").src);o.mapping=THREE.SphericalReflectionMapping,this.textureList.push(o),this.textureList.push(a),this.leftWeaponHandle=new THREE.MeshStandardMaterial({roughness:.4,metalness:.5,color:new THREE.Color(e.primary),map:a,envMap:o}),this.rightWeaponHandle=new THREE.MeshStandardMaterial({roughness:.4,metalness:.5,color:new THREE.Color(e.secondary),map:a,envMap:o});const r=(new THREE.TextureLoader).load(document.getElementById("weapon2Img").src);r.mapping=THREE.SphericalReflectionMapping,this.leftFist=new THREE.MeshStandardMaterial({roughness:.3,metalness:.8,map:this.fistsTexture,envMap:r,transparent:!0}),this.rightFist=new THREE.MeshStandardMaterial({roughness:.3,metalness:.8,map:this.fistsTexture,envMap:r,transparent:!0}),this.beat=new THREE.MeshLambertMaterial({map:this.beatsTexture,transparent:!0}),this.blueBeatPieces=new THREE.MeshLambertMaterial({map:this.beatsTexture,color:e.secondary,emissive:e.secondary,emissiveIntensity:.2}),this.redBeatPieces=new THREE.MeshLambertMaterial({map:this.beatsTexture,color:e.primary,emissive:e.primary,emissiveIntensity:.2}),this.minePieces=new THREE.MeshLambertMaterial({color:e.tertiary,emissive:e.tertiary,emissiveIntensity:.2});const s=(new THREE.TextureLoader).load(document.getElementById("backGlowImg").src);this.redBeatGlow=new THREE.MeshBasicMaterial({color:e.primary,map:s,blending:THREE.AdditiveBlending,transparent:!0}),this.blueBeatGlow=new THREE.MeshBasicMaterial({color:e.secondary,map:s,blending:THREE.AdditiveBlending,transparent:!0}),this.textureList.push(s),this.stars=new THREE.PointsMaterial({size:1,map:(new THREE.TextureLoader).load(document.getElementById("starImg").src),blending:THREE.AdditiveBlending,transparent:!0,color:new THREE.Color(e.secondary)}),this.textureList.push(this.stars.map);const l=(new THREE.TextureLoader).load(document.getElementById("sideglowImg").src);this.textureList.push(l),this.leftsideglow=new THREE.MeshBasicMaterial({map:l,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,side:THREE.BackSide,color:new THREE.Color(i.OFF)}),this.rightsideglow=new THREE.MeshBasicMaterial({map:l,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,color:new THREE.Color(i.OFF)});const c=(new THREE.TextureLoader).load(document.getElementById("plumeImg").src);c.minFilter=THREE.LinearFilter,this.arrowBluePlume=new THREE.ShaderMaterial({vertexShader:n(7),fragmentShader:n(8),uniforms:{color:{value:new THREE.Color(e.secondary)},src:{value:c}},transparent:!0,depthTest:!1}),this.arrowRedPlume=new THREE.ShaderMaterial({vertexShader:n(7),fragmentShader:n(8),uniforms:{color:{value:new THREE.Color(e.primary)},src:{value:c}},transparent:!0,depthTest:!1}),this.dotBluePlume=new THREE.ShaderMaterial({vertexShader:n(7),fragmentShader:n(8),uniforms:{color:{value:new THREE.Color(e.secondary)},src:{value:c}},transparent:!0,depthTest:!1}),this.dotRedPlume=new THREE.ShaderMaterial({vertexShader:n(7),fragmentShader:n(8),uniforms:{color:{value:new THREE.Color(e.primary)},src:{value:c}},transparent:!0,depthTest:!1}),this.minePlume=new THREE.ShaderMaterial({vertexShader:n(7),fragmentShader:n(8),uniforms:{color:{value:new THREE.Color(e.tertiary)},src:{value:c}},transparent:!0,depthTest:!1});const d=(new THREE.TextureLoader).load(document.getElementById("tubeImg").src),u=(new THREE.TextureLoader).load(document.getElementById("tubeColorImg").src);d.generateMipmaps=!1,d.minFilter=THREE.LinearFilter,u.generateMipmaps=!1,u.minFilter=THREE.LinearFilter,this.tube=new THREE.ShaderMaterial({vertexShader:n(106),fragmentShader:n(107),uniforms:{time:{value:0},opacity:{value:0},src:{value:d},color:{value:u}},transparent:!0,depthTest:!1,side:THREE.BackSide});const h=(new THREE.TextureLoader).load(document.getElementById("handStarTrailImg").src);h.generateMipmaps=!1,h.minFilter=THREE.LinearFilter,this.handStarTrail=new THREE.ShaderMaterial({vertexShader:n(108),fragmentShader:n(109),uniforms:{colorPrimary:{value:new THREE.Color(e.primary)},colorSecondary:{value:new THREE.Color(e.secondary)},colorTertiary:{value:new THREE.Color(e.tertiary)},pulse:{value:0},src:{value:h}},transparent:!0,depthTest:!1,blending:THREE.AdditiveBlending,side:THREE.DoubleSide})},setColorScheme:function(e){this.el.sceneEl;const t=this.scheme=i.schemes[e]||i.schemes.default;a(this.arrowBluePlume,"color",t.secondary),a(this.arrowRedPlume,"color",t.primary),a(this.aurora,"colorPrimary",t.primary),a(this.aurora,"colorSecondary",t.secondary),a(this.backglow,"color",t.primary),a(this.blueBeatGlow,"color",t.secondary),a(this.blueBeatGlow,"color",t.secondary),a(this.blueBeatPieces,"color",t.secondary),a(this.blueBeatPieces,"emissive",t.secondary),a(this.dotBluePlume,"color",t.secondary),a(this.dotRedPlume,"color",t.primary),a(this.handStarTrail,"colorPrimary",t.primary),a(this.handStarTrail,"colorSecondary",t.secondary),a(this.handStarTrail,"colorTertiary",t.tertiary),a(this.home,"color1",t.primary),a(this.home,"color2",t.secondary),a(this.home,"color3",t.tertiary),a(this.leftFist,"color",t.primarybright),a(this.leftFistWeapon,"color",t.primary),a(this.leftWeapon,"color",t.primary),a(this.leftWeaponHandle,"color",t.primary),a(this.merkaba,"color",t.primary),a(this.minePieces,"color",t.tertiary),a(this.minePieces,"emissive",t.tertiary),a(this.minePlume,"color",t.tertiary),a(this.moon,"tint",t.secondarybright),a(this.redBeatGlow,"color",t.primary),a(this.redBeatGlow,"color",t.primary),a(this.redBeatPieces,"color",t.primary),a(this.redBeatPieces,"emissive",t.primary),a(this.rightFist,"color",t.secondarybright),a(this.rightWeapon,"color",t.secondary),a(this.rightFistWeapon,"color",t.secondary),a(this.rightWeaponHandle,"color",t.secondary),a(this.rings,"colorPrimary",t.primary),a(this.rings,"colorSecondary",t.secondary),a(this.rings,"colorTertiary",t.tertiary),a(this.stars,"color",t.secondary),a(this.tunnel,"fogColor",t.primary),a(this.tunnel,"color1",t.primary),a(this.tunnel,"color2",t.secondary),a(this.tunnel,"color3",t.tertiary),this.generateBeatsTexture(),this.generateEnvmapTexture(),this.generateFistsTexture(),document.querySelectorAll("a-entity[wall]").forEach(e=>{a(e.getObject3D("mesh").material,"colorTertiary",t.tertiary)}),this.panelMaterials.forEach(e=>{a(e,"colorPrimary",t.primary),a(e,"colorSecondary",t.secondary)}),a(this.curve,"fogColor",t.primary),a(this.curve,"color1",t.primary),a(this.curve,"color2",t.secondary)},generateBeatsTexture:function(){const e=this.scheme,t=new THREE.Color(e.primary),n=new THREE.Color(e.secondary),i=new THREE.Color(e.tertiary),o=this.beatsCanvas,a=o.getContext("2d");o.width=512,o.height=32,r(a,i.getStyle(),0,0,128,6),r(a,"#000",128,0,128,6),r(a,n.getStyle(),256,0,128,6),r(a,t.getStyle(),384,0,105,6),r(a,"#FFF",489,0,23,6),s(a,"#000000",n.getStyle(),0,6,512,4),s(a,"#000",t.getStyle(),0,10,512,5),s(a,"#000",i.getStyle(),0,15,512,4),s(a,`rgba(${n.r}, ${n.g}, ${n.b}, 0)`,n.getStyle(),0,19,512,5),s(a,`rgba(${t.r}, ${t.g}, ${t.b}, 0)`,t.getStyle(),0,24,512,4),s(a,`rgba(${i.r}, ${i.g}, ${i.b}, 0)`,i.getStyle(),0,28,512,4);const l=this.beatsTexture;return l.generateMipmaps=!1,l.magFilter=THREE.LinearFilter,l.minFilter=THREE.LinearFilter,l.needsUpdate=!0,l},generateFistsTexture:function(){const e=this.scheme,t=new THREE.Color(e.primarybright),n=new THREE.Color(e.secondarybright),i=this.fistsCanvas,o=i.getContext("2d");return i.width=8,i.height=128,s(o,t.getStyle(),`rgba(${t.r}, ${t.g}, ${t.b}, 0)`,0,0,4,128),s(o,n.getStyle(),`rgba(${n.r}, ${n.g}, ${n.b}, 0)`,4,0,4,128),this.fistsTexture.needsUpdate=!0,this.fistsTexture},generateEnvmapTexture:function(){const e=this.scheme,t=new THREE.Color(e.primary),n=new THREE.Color(e.secondary),i=document.getElementById("envmapTemplateImg");i.addEventListener("load",()=>{const e=i.width,o=i.height,a=this.envmapCanvas;a.width=e,a.height=o;const r=a.getContext("2d");r.drawImage(i,0,0);const s=r.getImageData(0,0,e,o),l=s.data;let c,d;for(let e=0;e<l.length;e+=4)c=l[e],d=l[e+1],c*=1-d/255,l[e+0]=Math.floor(t.r*c+n.r*d),l[e+1]=Math.floor(t.g*c+n.g*d),l[e+2]=Math.floor(t.b*c+n.b*d),l[e+3]=255;r.putImageData(s,0,0),document.getElementById("envmapImg").src=a.toDataURL("image/png")})},registerCurve:function(e){this.curve=e},registerPanel:function(e){this.panelMaterials.push(e)}}),AFRAME.registerComponent("materials",{schema:{animate:{default:!0},name:{default:""},recursive:{default:!0}},update:function(){if(""===this.data.name)return;if(this.material=this.system[this.data.name],!this.material)return void console.warn("[materials] Unknown material: "+this.data.name);let e=this.el.getObject3D("mesh");e?this.applyMaterial(e):this.el.addEventListener("object3dset",t=>{"mesh"===t.detail.type&&(e=this.el.getObject3D("mesh"),e&&this.applyMaterial(e))}),this.material.animate=this.data.animate},applyMaterial:function(e){e.detail&&(e=e.detail.model),this.data.recursive?e.traverse(e=>{"Mesh"===e.type&&(e.material=this.material)}):e.material=this.material}}),AFRAME.registerComponent("materials-color-menu",{play:function(){this.text=document.getElementById("colorName")},events:{mouseenter:function(e){this.text.setAttribute("text","value",e.target.dataset.colorName)},mouseleave:function(e){this.text.setAttribute("text","value","")},click:function(e){this.el.sceneEl.systems.materials.setColorScheme(e.target.dataset.colorScheme),this.el.sceneEl.emit("colorschemechange",e.target.dataset.colorScheme,!1)}}}),window.AFRAME){const t=["materials","materials-color-menu"],n=[],i=["materials"];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec3 vWorldPos;\nvarying vec3 vPos;\nvarying vec3 vNormal;\n\nvoid main() {\n  vNormal = normal;\n  vPos = position;\n  vWorldPos = (modelMatrix * vec4( position, 1.0 )).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="uniform sampler2D src;\nuniform float scale;\nvarying vec3 vPos;\nvarying vec3 vWorldPos;\nvarying vec3 vNormal;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 color3;\nuniform vec3 fogColor;\n\nvoid main() {\n  vec3 pw = vWorldPos - cameraPosition;\n  vec3 p = pw / scale;\n  float pz = p.z * 0.3;\n\n  // build color weights\n  float f = clamp( (sin(p.x * 0.6 + pz ) + sin(p.y * 0.3 - pz)) * 0.3 + 0.17, 0.0, 1.0);\n  float g = clamp( (sin(p.x * 0.7 + pz) + cos(p.y * 0.6 - 15.0) + sin(pz * 0.1)) * 0.25 + 0.15, 0.0, 1.0);\n  float h = clamp( (sin(p.x * 0.4 + pz + 3.0) + cos(p.y * 0.8 - 5.0) + sin(pz * 0.3)) * 0.16 + 0.08, 0.0, 1.0);\n\n\n  // mix colors using weights\n  vec3 col = vec3(0.3);\n  col = mix(col, color1, f);\n  col = mix(col, color2, g);\n  col = mix(col, color3, h);\n\n  float fog = 1.0 - clamp(length(pw) / 180.0 - 0.1, 0.0, 1.0);\n\n  // mix color with fog\n  col = mix(fogColor, col, smoothstep(0.2, 0.9, fog));\n\n  // calc shadow (using normal and fixed light pos + fade to black in y)\n  float shadow = 0.5 + dot(vec3(0.0, 1.0, 1.0), vNormal) * 0.5;\n  float shadowGrad = clamp((vPos.y + 2.0) / 6.0, 0.1, 1.0);\n  // fade in fog\n  shadow = mix(1.0, shadow, fog);\n  shadowGrad = mix(1.0, shadowGrad, smoothstep(0.3, 1.0, fog));\n\n  gl_FragColor = vec4(col * shadow * shadowGrad, smoothstep(0.3, 0.6, fog));\n  //gl_FragColor = vec4(vec3(fog), 1.0);\n}"},function(e,t){e.exports="uniform float time;\nvarying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  float t = time * 0.0005;\n  vec3 pos = position;\n  pos.y += sin(t + uv.x * 3.0 + pos.x * 0.01) * 20.0;\n  pos.y += sin(-t * 1.3 + uv.x * 7.0 + pos.x * 0.008) * 10.0;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n}"},function(e,t){e.exports="uniform float time;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nvarying vec2 uvs;\n\nvoid main() {\n  vec3 col = vec3(1.0);\n  float t = time * 0.001;\n  col *= 0.80 + sin(-t * 3.4 + 5.5 + uvs.x * 6.0) * 0.1;\n  col *= 0.80 + sin(t * 1.4 + 0.5 + uvs.x * 12.0) * 0.2;\n  col *= 0.80 + sin(t * 1.0 + 0.2 + uvs.x * 30.0) * 0.2;\n  col *= 0.90 + sin(-t * 1.6 + 5.2 + uvs.x * 43.0) * 0.1;\n  col *= 0.95 + sin(-t * 0.3 + 1.2 + uvs.x * 50.0) * 0.05;\n  col *= 0.95 + sin(t * 0.8 + 1.2 + uvs.x * 80.0) * 0.05;\n  col *= 0.94 + sin(-t + 0.1 + uvs.x * 180.0) * 0.01;\n  col *= 0.90 + sin(t * 2.49 + 0.1 + uvs.x * 120.0) * 0.01;\n  col *= 0.86 + sin(-t * 1.7 + 4.7 + uvs.x * 80.0) * 0.03;\n  col *= 0.86 + sin(-t * 1.2 + 0.7 + uvs.x * 180.0) * 0.02;\n\n  // border fades\n  float alpha = 1.0;\n  alpha *= 1.0 - smoothstep(0.0, 1.0, uvs.y);\n  alpha *= smoothstep(0.0, 0.3, uvs.y);\n  alpha *= sin(uvs.x * 3.141592);\n\n  // colorize\n  col = col * mix(colorPrimary, colorSecondary, uvs.y);\n  gl_FragColor = vec4(col, alpha);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"},function(e,t){e.exports="uniform float time;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nuniform vec3 colorTertiary;\nvarying vec2 uvs;\n#define PI 3.14159265358979\n\nfloat pulse(float x, float t, float r){\n  return 1.0 - smoothstep(0.0, r, abs((x - t)));\n}\n\nvoid main() {\n  float t = time * 0.002;\n  vec2 uv = uvs - 0.5;\n  uv = vec2(-uv.y, uv.x);\n  float d = length(uv);\n  float f = pulse(d, 0.44, 0.012);\n  float f2 = pulse(d, 0.44, 0.002);\n\n  float g = pulse(d, 0.20, 0.01);\n  float g1 = pulse(d, 0.20, 0.0018);\n\n  float g2 = pulse(d, 0.21, 0.01);\n  float g3 = pulse(d, 0.21, 0.0018);\n\n  float ang = abs(atan(uv.y, uv.x)) / PI;\n  float angalpha = sin(ang * 20.0 - t * 0.1) * 0.4 + 0.6;\n\n  float sparks = pulse(angalpha, 0.4, 0.17) * (pulse(d, 0.435, 0.035) + pulse(d, 0.205, 0.026)) * 0.14;\n  sparks += pulse(angalpha, 0.4, 0.2) * (pulse(d, 0.44, 0.002) + pulse(d, 0.2, 0.0018)) * 0.4;\n  sparks *= sin(ang * 14.0 + t) * 0.5 + 0.5;\n  vec3 col = mix(colorPrimary, colorSecondary, ang);\n  col = mix (col, colorPrimary, g3);\n  col = mix (col, colorSecondary, g1);\n  col = mix (col, colorTertiary, sparks * 2.4);\n   gl_FragColor = vec4(col, ((f + g + g2) * 0.1 + (f2 + g1 + g3) * 0.4) * angalpha + sparks);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D map;\nuniform vec3 tint;\n\nvoid main() {\n  vec4 tex = texture2D(map, uvs);\n  vec3 col = mix(tex.rgb * tint, tex.rgb, uvs.y);\n  gl_FragColor = vec4(col, tex.a );\n}\n"},function(e,t){e.exports="uniform float time;\nvarying vec3 vWorldPos;\nvarying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  vWorldPos = (modelMatrix * vec4( position, 1.0 )).xyz;\n  vec3 pos = vec3(position.x, position.y + sin(time * 0.002 - position.z) * 0.05 + 0.04, position.z);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nvarying vec3 vWorldPos;\nuniform sampler2D src;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 color3;\n\nvoid main() {\n  vec4 tex = texture2D(src, uvs);\n  vec3 p = vWorldPos + cameraPosition;\n  float pz = p.z * 0.36;\n  float f = clamp( (sin(p.x + pz ) + sin(p.y - pz)) * 0.35 + 0.14, 0.0, 1.0);\n  float g = clamp( (sin(p.x + pz + 2.0) + cos(p.y * 0.6 - 15.0) + sin(pz * 0.5)) * 0.3 + 0.1, 0.0, 1.0);\n  float h = clamp( (sin(p.x * 0.7 + pz + 2.0) + cos(p.y * 0.8 - 5.0) + sin(pz * 0.8)) * 0.3 + 0.05, 0.0, 1.0);\n\n  vec3 col = vec3(0.1);\n  col = mix(col, color1, f);\n  col = mix(col, color2, g);\n  col = mix(col, color3, h);\n\n  gl_FragColor = vec4((col * 1.5) * tex.r, 1.0);\n}"},function(e,t){e.exports="varying vec2 uvs;\nuniform float time;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(e,t){e.exports="varying vec2 uvs;\nuniform sampler2D src;\nuniform sampler2D color;\nuniform float time;\nuniform float opacity;\n\nvoid main() {\n  vec2 uvanim = vec2(\n    mod(uvs.x + sin(time / 20000.0), 1.0),\n    mod(uvs.y + time / 2000.0, 1.0));\n  vec4 texAlpha = texture2D(src, uvanim);\n  float alpha = texAlpha.a * smoothstep(0.0, 0.5, uvs.y) * (1.0 - smoothstep(0.5, 1.0, uvs.y));\n  gl_FragColor = vec4(texture2D(color, uvs).rgb, alpha * 0.7 * opacity);\n}\n"},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying vec2 uvs;\n\nvoid main() {\n  uvs = uv;\n  vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="varying vec3 vWorldPosition;\nvarying vec2 uvs;\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\nuniform vec3 colorTertiary;\nuniform float pulse;\nuniform sampler2D src;\n\nvoid main() {\n  vec3 colorize = vWorldPosition-cameraPosition;\n  colorize = clamp(colorize + 0.5, vec3(0.0), vec3(1.0));\n  vec3 col = mix(mix(colorPrimary, colorSecondary, colorize.x), colorTertiary, colorize.z);\n  col += vec3(pulse) * 0.1;\n  gl_FragColor = vec4 (col, texture2D(src, uvs).a);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("menu-controls",{schema:{enabled:{default:!0}},events:{thumbdownstart:function(){this.data.enabled&&this.el.sceneEl.emit("searchnextpage",null,!1)},thumbleftstart:function(){this.data.enabled&&this.el.sceneEl.emit("menuchallengeunselect",null,!1)},thumbupstart:function(){this.data.enabled&&this.el.sceneEl.emit("searchprevpage",null,!1)}}}),window.AFRAME){const t=["menu-controls"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-difficulty-select",{init:function(){this.el.sceneEl.addEventListener("menuchallengeselect",()=>{this.el.object3D.visible=!1,setTimeout(()=>{this.el.components.layout.update(),this.el.object3D.visible=!0},150)})},events:{click:function(e){this.el.sceneEl.emit("menudifficultyselect",e.target.closest(".difficultyOption").dataset.difficulty,!1)}}}),window.AFRAME){const t=["menu-difficulty-select"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-genre",{init:function(){this.el.addEventListener("click",e=>{this.el.sceneEl.emit("genreselect",e.target.closest(".genre").dataset.bindForKey)})}}),window.AFRAME){const t=["menu-genre"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-midsection",{schema:{active:{default:!1},selectedChallenge:{default:""}},update:function(e){e.active&&!this.data.active&&this.el.emit("hidedifficultysection",null,!1),(!e.active&&this.data.active||this.data.selectedChallenge&&e.selectedChallenge!==this.data.selectedChallenge)&&this.el.emit("showdifficultysection",null,!1)}}),window.AFRAME){const t=["menu-midsection"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=n(0),o={classicvr:-.6,punchvr:.87,ride2d:.87,ridevr:.15,viewer2d:.15},a={classicvr:"classic",punchvr:"punch",ride2d:"ride",ridevr:"ride",viewer2d:"viewer"};if(AFRAME.registerComponent("menu-mode",{schema:{colorScheme:{default:"default"},hasVR:{default:!1}},init:function(){this.el.addEventListener("click",e=>{const t=e.target.closest("[data-mode]"),n=t.dataset.mode,i=t.dataset.name;this.el.sceneEl.emit("gamemode",n,!1),this.data.hasVR&&localStorage.setItem("gameMode",i),this.setModeOption(i)})},update:function(){this.data.hasVR?(this.setModeOption(localStorage.getItem("gameMode")||"punchvr"),this.el.sceneEl.emit("gamemode",a[localStorage.getItem("gameMode")||"punchvr"])):this.setModeOption("ride2d")},setModeOption:function(e){const t=this.el.querySelectorAll(".modeItem");document.getElementById("modeIcon").object3D.position.y=o[e];for(let n=0;n<t.length;n++){const o=t[n],a=o.dataset.name===e;o.emit(a?"select":"deselect",null,!1);const r=o.querySelector(".modeBackground");r.emit(a?"select":"deselect",null,!1),r.setAttribute("mixin","modeBackgroundSelect"+(a?"":" modeBackgroundHover"));o.querySelector(".modeThumb").emit(a?"select":"deselect",null,!1);o.querySelector(".modeTitle").setAttribute("text","color",a?i.WHITE:i.schemes[this.data.colorScheme].secondary);o.querySelector(".modeInstructions").setAttribute("text","color",a?i.WHITE:i.schemes[this.data.colorScheme].primary)}}}),window.AFRAME){const t=["menu-mode"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-playlist-button",{schema:{isFavorited:{default:!1},selectedChallenge:{default:""}},init:function(){const e=this.el;e.setAttribute("animation__scaleup",{property:"scale",from:"1 1 1",to:"1.2 1.2 1.2",dur:800,autoplay:!1,easing:"easeInOutElastic"}),e.setAttribute("animation__scaledown",{property:"scale",from:"1.2 1.2 1.2",to:"1 1 1",dur:100,autoplay:!1,easing:"easeInOutCubic"})},update:function(e){!e.isFavorited&&this.data.isFavorited&&e.selectedChallenge===this.data.selectedChallenge&&(this.el.object3D.position.z=.01,this.el.components.animation__scaleup.beginAnimation(),setTimeout(()=>{this.el.components.animation__scaledown.beginAnimation(),this.el.object3D.position.z=0},800))}}),window.AFRAME){const t=["menu-playlist-button"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-playlist",{init:function(){this.eventDetail={id:"",title:""},this.el.addEventListener("click",e=>{const t=e.target.closest(".playlist");this.eventDetail.id=t.dataset.playlist,this.eventDetail.title=t.dataset.title,this.el.sceneEl.emit("playlistselect",this.eventDetail)})}}),window.AFRAME){const t=["menu-playlist"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-selected-challenge-image",{schema:{coverURL:{type:"string"}},update:function(){this.el.setAttribute("material","src",this.data.coverURL)}}),window.AFRAME){const t=["menu-selected-challenge-image"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("menu-slide-animation",{schema:{isSearching:{default:!1},menuSelectedChallengeId:{type:"string"}},init:function(){this.isLeft=!1},update:function(e){const t=this.data;if(this.isLeft)return!e.menuSelectedChallengeId||t.menuSelectedChallengeId||t.isSearching||this.rightMenu(),void(!e.isSearching||t.isSearching||t.menuSelectedChallengeId||this.rightMenu());this.isLeft||(!e.menuSelectedChallengeId&&t.menuSelectedChallengeId&&this.leftMenu(),!e.isSearching&&t.isSearching&&this.leftMenu())},rightMenu:function(){this.isLeft&&(this.el.components.animation__menuright.beginAnimation(),this.isLeft=!1)},leftMenu:function(){this.isLeft||(this.el.components.animation__menuleft.beginAnimation(),this.isLeft=!0)}}),window.AFRAME){const t=["menu-slide-animation"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i={0:0,1:.5,2:0,3:.25,4:.5,5:.75,6:0,7:.125,8:.25,9:.375,10:.5,11:.625,12:.75,13:.875};if(AFRAME.registerComponent("multiplier-ring",{dependencies:["geometry","material"],schema:{combo:{default:0},multiplier:{default:1}},init:function(){this.animationSet={from:void 0,to:void 0},this.progress=this.el.getObject3D("mesh").material.uniforms.progress,this.el.setAttribute("animation",{property:"components.material.material.uniforms.progress.value",dur:100,autoplay:!1})},update:function(){this.updateRing()},updateRing:function(){const e=this.data,t=this.el,n=this.progress;if(8===e.multiplier)return void(n.value=1);const o=this.animationSet;o.from=n.value,o.to=i[e.combo],t.setAttribute("animation",o),t.components.animation.beginAnimation()}}),window.AFRAME){const t=["multiplier-ring"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("no-frustum-cull",{init:function(){this.el.object3D.frustumCulled=!1}}),window.AFRAME){const t=["no-frustum-cull"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i);if(AFRAME.registerShader("panelShader",{schema:{activePanel:{type:"number",is:"uniform",default:0},brightness:{type:"number",is:"uniform",default:.3},borderWidth:{type:"number",is:"uniform",default:.004},borderRadius:{type:"number",is:"uniform",default:.15},colorPrimary:{type:"color",is:"uniform",default:o.a.initial.primary},colorSecondary:{type:"color",is:"uniform",default:o.a.initial.secondary},midSection:{type:"number",is:"uniform",default:0},opacity:{type:"number",is:"uniform",default:1},ratio:{type:"number",is:"uniform",default:.5},transparent:{default:!0}},vertexShader:n(122),fragmentShader:n(123),update:function(e){this.updateVariables(e,"attribute"),this.updateVariables(e,"uniform"),this.el.sceneEl.systems.materials.registerPanel(this.material)}}),window.AFRAME){const t=[],n=["panelShader"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvoid main() {\n  uvs.xy = uv.xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},function(e,t){e.exports="#if __VERSION__ == 100\n  #extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform vec3 colorPrimary;\nuniform vec3 colorSecondary;\n\n#define PI 3.141592\n#define DIFF_SECTION_WIDTH 0.06\n\nuniform float borderWidth;\nuniform float borderRadius;\nuniform float brightness;\nuniform float ratio;\nuniform float midSection;\nuniform float opacity;\nuniform float activePanel;\n\nvarying vec2 uvs;\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,vec2(0.0))) + min(max(d.x,d.y), 0.0);\n}\n\nvoid main()\n{\n  vec2 uv = uvs;\n  vec2 uv2 = uv * 2.0 - 1.0; // from -1 to 1\n  uv2.x *= ratio;\n\n  vec3 col = mix(colorSecondary * uv.y, colorPrimary * uv.y, uv.x) * (brightness + activePanel * 0.4);\n  vec3 borderCol = mix(colorSecondary, colorPrimary, uv.y);\n\n  vec2 size = vec2(0.83 * ratio, 0.86) - borderRadius;\n  float grad = sdBox(uv2, size) - borderRadius;\n  grad = min(grad, sdBox(uv2 - size, vec2(borderRadius)));\n  grad = min(grad, sdBox(uv2 + size, vec2(borderRadius)));\n  grad = -grad;\n  float aa = fwidth(grad);\n\n  float isShape = smoothstep(-aa, 0.0, grad);\n  float alpha = clamp(isShape + smoothstep(-0.15, 0.15, grad), 0.0, 1.0);\n  float isBorder = smoothstep(-aa - borderWidth, aa - borderWidth, grad) - smoothstep(-aa + borderWidth, aa + borderWidth, grad);\n  float mid = clamp(midSection, 0.0, 1.0);\n  col *= 1.0 - mid * (step(0.5 - DIFF_SECTION_WIDTH * mid, uv.x) - step(0.5 + DIFF_SECTION_WIDTH * midSection, uv.x)) * 0.3;\n\n  gl_FragColor = vec4(mix(col * isShape, borderCol, isBorder), alpha * opacity);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("pause",{schema:{isPaused:{default:!1}},update:function(){this.data.isPaused&&this.el.isPlaying?this.el.pause():this.data.isPaused||this.el.isPlaying||!this.el.sceneEl.isPlaying||this.el.play()}}),window.AFRAME){const t=["pause"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("pauser",{schema:{enabled:{default:!0}},init:function(){this.pauseGame=this.pauseGame.bind(this),document.addEventListener("keydown",e=>{27===e.keyCode&&this.pauseGame()}),this.el.sceneEl.addEventListener("controllerconnected",e=>{"vive-controls"===e.detail.name?this.el.addEventListener("menudown",this.pauseGame):(this.el.addEventListener("thumbstickdown",this.pauseGame),this.el.addEventListener("trackpaddown",this.pauseGame))}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.pauseGame()})},pauseGame:function(){this.data.enabled&&this.el.sceneEl.emit("pausegame",null,!1)}}),window.AFRAME){const t=["pauser"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var i=n(127);if(AFRAME.registerSystem("play-sound",{init:function(){this.lastSoundPlayed="",this.lastSoundPlayedTime=0,this.pools={}},createPool:function(e,t){this.pools[e]||(this.pools[e]=new i(e,t))},playSound:function(e,t){this.pools[e]||this.createPool(e,t),this.pools[e].play(),this.lastSoundPlayed=e,this.lastSoundTime=this.el.time}}),AFRAME.registerComponent("play-sound",{schema:{enabled:{default:!0},event:{type:"string"},sound:{type:"string"},volume:{type:"number",default:1}},multiple:!0,init:function(){this.el.addEventListener(this.data.event,e=>{this.data.enabled&&this.system.playSound(this.src,this.data.volume)})},update:function(){this.src=this.data.sound,this.data.sound.startsWith("#")&&(this.src=document.querySelector(this.data.sound).getAttribute("src"))}}),window.AFRAME){const t=["play-sound"],n=[],i=["play-sound"];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports=function(e,t){var n,i=0,o=[];return(n=new Audio(e)).volume=t,o.push(n),{play:function(){0===o[i].currentTime&&o[i].ended||((n=new Audio(e)).volume=t,o.push(n),i++),(0===o[i].currentTime||o[i].ended)&&o[i].play(),i=(i+1)%o.length}}}},function(e,t,n){function i(e,t){return e-t}if(AFRAME.registerComponent("player-height",{init:function(){this.beatOffset=0,this.heights=[],this.height=0,this.el.sceneEl.addEventListener("menuchallengeselect",this.updateHeight.bind(this)),this.el.sceneEl.addEventListener("playbuttonclick",this.updateHeight.bind(this))},pause:function(){this.heights.length=0},updateHeight:function(){const e=this.heights;e.length>3&&e.shift(),e.push(this.el.object3D.position.y),this.height=function(e){e.sort(i);const t=e.length/2;return t%1?e[t-.5]:(e[t-1]+e[t])/2}(e);const t=(n=this.height,o=1.6,a=2.2,Math.min(Math.max(n,o),a));var n,o,a,r,s;this.beatOffset=(s=0)+(.2-s)*(t-(r=1.6))/(2.2-r)}}),window.AFRAME){const t=["player-height"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("plume",{schema:{color:{default:""},cutDirection:{default:""},horizontalPosition:{default:"middleleft",oneOf:["left","middleleft","middleright","right"]},songPosition:{default:0},type:{default:"arrow",oneOf:["arrow","dot","mine"]},verticalPosition:{default:"middle",oneOf:["bottom","middle","top"]}},horizontalPositions:{left:-.95,middleleft:-.6,middleright:.6,right:.95},init:function(){this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.handsEls=this.el.sceneEl.querySelectorAll(".handStar"),this.handPos=new THREE.Vector3,this.verticalPositions=this.el.sceneEl.components["beat-system"].verticalPositions,this.el.sceneEl.addEventListener("cleargame",this.returnToPool.bind(this))},update:function(){"mine"===this.data.type?this.poolName="pool__plume-mine":this.poolName=`pool__plume-${this.data.type}-${this.data.color}`},onGenerate:function(e,t,n,i){this.data;const o=this.el,a=this.curveEl.components.supercurve;a.getPointAt(e,o.object3D.position),a.alignToCurve(e,o.object3D),o.object3D.position.x+=this.horizontalPositions[t],o.object3D.position.y+=this.verticalPositions[n]+i,o.object3D.rotation.z=Math.random()*Math.PI*2,this.songPosition=e},tock:function(){if(this.el.object3D.position.z>this.curveFollowRig.object3D.position.z+10)this.returnToPool();else for(let e=0;e<this.handsEls.length;e++){const t=this.handsEls[e];t.object3D.getWorldPosition(this.handPos),this.handPos.distanceToSquared(this.el.object3D.position)<.2&&t.emit("plumepulse")}},returnToPool:function(){this.el.object3D.position.set(0,0,-9999),this.el.object3D.visible=!1,this.el.isPlaying&&this.el.sceneEl.components[this.poolName].returnEntity(this.el)}}),window.AFRAME){const t=["plume"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("punch",{schema:{enabled:{default:!1}},init:function(){this.currentPos=new THREE.Vector3,this.direction=0,this.lastSample=new THREE.Vector3,this.lastSampleTime=0,this.speed=0,this.bbox=new THREE.Box3,this.bboxEl=this.el.querySelector(".punchBbox")},play:function(){this.rig=this.el.closest("#curveFollowRig")},tick:function(e,t){this.data.enabled&&(this.direction=this.currentPos.copy(this.el.object3D.position).sub(this.lastSample),this.speed=this.direction.length()/((e-this.lastSampleTime)/1e3),this.lastSample.copy(this.el.object3D.position),this.lastSampleTime=e)},tickBeatSystem:function(){this.bbox.setFromObject(this.bboxEl.getObject3D("mesh"))},checkCollision:function(){const e=new THREE.Box3,t=new THREE.Vector3(0,0,.2);return function(n){return e.copy(n.bbox).translate(n.el.object3D.position).expandByScalar(.1).expandByVector(t),this.bbox.intersectsBox(e)}}()}),window.AFRAME){const t=["punch"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var i,o;if(AFRAME.registerComponent("raycaster-target",{schema:{bindToggle:{default:""},depth:{type:"number"},height:{type:"number"},position:{type:"vec3",default:{x:0,y:0,z:0}},rotation:{type:"vec3",default:{x:0,y:0,z:0}},useBoxTarget:{default:!1},width:{type:"number"}},init:(i={primitive:"box"},o={primitive:"plane"},function(){var e,t,n=this.data,a=this.el;(t=document.createElement("a-entity")).classList.add("raycasterTarget"),n.bindToggle?t.setAttribute("bind-toggle__raycastable",n.bindToggle):t.setAttribute("data-raycastable",""),n.useBoxTarget?((e=i).depth=n.depth,e.height=n.height,e.width=n.width):((e=o).height=n.height,e.width=n.width),t.setAttribute("geometry",e),t.object3D.visible=!1,t.object3D.position.copy(n.position),t.object3D.rotation.x=THREE.Math.degToRad(n.rotation.x),t.object3D.rotation.y=THREE.Math.degToRad(n.rotation.y),t.object3D.rotation.z=THREE.Math.degToRad(n.rotation.z),a.appendChild(t)})}),window.AFRAME){const t=["raycaster-target"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var i,o,a,r;if(AFRAME.registerComponent("recenter",{schema:{enabled:{default:!0}},init:function(){this.el.sceneEl;this.recenter=this.recenter.bind(this),document.querySelectorAll("[tracked-controls]").forEach(e=>{e.addEventListener("menudown",this.recenter),e.addEventListener("thumbstickdown",this.recenter)}),this.el.addEventListener("recenter",this.recenter)},recenter:(i=new THREE.Euler,o=new THREE.Matrix4,a=new THREE.Matrix4,r=new THREE.Matrix4,function(){const e=this.el;if(!this.data.enabled)return;const t=e.sceneEl.camera.el.object3D;o.identity(),i.set(0,-1*t.rotation.y,0),a.makeRotationFromEuler(i),r.makeTranslation(-1*t.position.x,0,-1*t.position.z),o.multiply(a).multiply(r),o.decompose(e.object3D.position,e.object3D.quaternion,e.object3D.scale),e.object3D.updateMatrixWorld(!0),e.emit("recentered",null,!1)})}),window.AFRAME){const t=["recenter"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerShader("ring",{schema:{blur:{default:.01,is:"uniform"},color:{type:"color",is:"uniform"},progress:{default:0,is:"uniform"},radiusInner:{default:.6,is:"uniform"},radiusOuter:{default:1,is:"uniform"}},vertexShader:n(134),fragmentShader:n(135)}),window.AFRAME){const t=[],n=["ring"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 vUv;\n\nvoid main () {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="#if __VERSION__ == 100\n  #extension GL_OES_standard_derivatives : enable\n#endif\n#define PI 3.14159265358979\nuniform float blur;\nuniform float progress;\nuniform float radiusInner;\nuniform float radiusOuter;\nuniform vec3 color;\n\nvarying vec2 vUv;\n\nvoid main () {\n  // make uvs go from -1 to 1\n  vec2 uv = vec2(vUv.x * 2.0 - 1.0, vUv.y * 2.0 - 1.0);\n  // calculate distance of fragment to center\n  float r = uv.x * uv.x + uv.y * uv.y;\n  // calculate antialias\n  float aa = fwidth(r);\n  // make full circle (radiusOuter - radiusInner)\n  float col = (1.0 - smoothstep(radiusOuter - aa, radiusOuter + blur + aa, r)) * smoothstep(radiusInner - aa, radiusInner + blur + aa, r);\n  // radial gradient\n  float a = smoothstep(-PI-aa, PI+aa, atan(uv.y, uv.x));\n  // progress angle\n  float p = 1.0 - progress - blur;\n  // apply progress to full circle (1 for done part, 0 for part to go)\n  col *= smoothstep(p, p + blur, a);\n  // multiply by user color\n  gl_FragColor = vec4(color * col, col);\n}\n"},function(e,t,n){if(AFRAME.registerComponent("score-texts",{schema:{isLoading:{default:!1}},init:function(){this.textEls=this.el.querySelectorAll("[text]");for(let e=0;e<this.textEls.length;e++)this.textEls[e].setAttribute("animation__fadein",{autoplay:!1,property:"components.text.material.uniforms.opacity.value",delay:250,dur:750,easing:"easeInOutCubic",from:0,to:1})},update:function(e){if(e.isLoading&&!this.data.isLoading){for(let e=0;e<this.textEls.length;e++)this.textEls[e].components.animation__fadein.beginAnimation();this.el.sceneEl.emit("textglownormal",null,!1)}if(!e.isLoading&&this.data.isLoading){for(let e=0;e<this.textEls.length;e++)this.textEls[e].components.text.material.uniforms.opacity.value=0;this.el.sceneEl.emit("textglowoff",null,!1)}}}),window.AFRAME){const t=["score-texts"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);n(6);if(AFRAME.registerComponent("search-thumbnail-atlas",{dependencies:["geometry","material"],schema:{dummyUpdater:{type:"string"}},init:function(){const e=this.canvas=document.createElement("canvas");e.setAttribute("id","thumbnailAtlasMap"),e.height=512,e.width=64,e.style.visibility="hidden",this.ctx=e.getContext("2d"),this.clearCanvas(),document.body.appendChild(e);const t=this.alphaCanvas=document.createElement("canvas");t.setAttribute("id","thumbnailAlphaMap"),t.height=512,t.width=64,t.style.visibility="hidden",this.alphaCtx=t.getContext("2d"),document.body.appendChild(t),this.el.components.material.material.alphaMap=new THREE.CanvasTexture(t),this.el.setAttribute("material","src",e),this.images=[],this.lastNumResults=6},update:function(){const e=this.el.sceneEl.systems.state.state.searchResultsPage;for(let t=0;t<e.length;t++){let n=this.images[t]=this.images[t]||document.createElement("img");n.crossOrigin="anonymous",n.src=e[t].coverURL,n.complete?this.draw(n,t):n.onload=()=>{this.draw(n,t)}}e.length!==this.lastNumResults&&this.updateAlphaMap(e.length),this.lastNumResults=e.length},draw:function(e,t){this.ctx.drawImage(e,0,t*(512/384*64),64,512/384*64),this.el.getObject3D("mesh").material.map.needsUpdate=!0},clearCanvas:function(){const e=this.canvas;this.ctx.fillStyle="#111",this.ctx.fillRect(0,0,e.width,e.height)},updateAlphaMap:function(e){const t=this.alphaCanvas,n=this.alphaCtx;n.fillStyle="#FFF",n.fillRect(0,0,t.width,t.height),n.fillStyle="#000",n.fillRect(0,e*(512/384*64),t.width,t.height-e*(512/384*64)),this.el.getObject3D("mesh").material.alphaMap.needsUpdate=!0,this.el.getObject3D("mesh").material.needsUpdate=!0}}),window.AFRAME){const t=["search-thumbnail-atlas"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=n(139),o=n(23),a=n(140).map(o);if(AFRAME.registerComponent("search",{schema:{difficultyFilter:{default:"All"},genre:{default:""},playlist:{default:""},query:{default:""}},init:function(){this.eventDetail={query:"",results:a,url:"",page:0},this.keyboardEl=document.getElementById("keyboard"),this.popularHits=a,function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(this.popularHits),this.queryObject={hitsPerPage:0,query:""},this.el.sceneEl.addEventListener("searchclear",()=>{this.search("")})},update:function(e){this.popularHits&&(this.search(this.data.query),e.query&&!this.data.query&&(this.keyboardEl.components["super-keyboard"].data.value="",this.keyboardEl.components["super-keyboard"].updateTextInput("")),this.debouncedSearch=i(this.search.bind(this),1e3))},play:function(){this.el.sceneEl.emit("searchresults",this.eventDetail),this.search("")},events:{superkeyboardchange:function(e){e.target===this.el&&this.debouncedSearch(e.detail.value)}},search:function(e){if(!e&&"All"===this.data.difficultyFilter&&!this.data.genre&&!this.data.playlist&&this.popularHits)return this.eventDetail.results=this.popularHits,this.eventDetail.query="",void this.el.sceneEl.emit("searchresults",this.eventDetail);if(this.eventDetail.query=e,this.queryObject.query=e,this.queryObject.hitsPerPage=e?30:150,"favorites"===this.data.playlist)return this.eventDetail.results=JSON.parse(localStorage.getItem("favorites-v2")),void this.el.sceneEl.emit("searchresults",this.eventDetail);let t="https://beatsaver.com/api/search/text/CURRENT_PAGE_INDEX?sortOrder=Rating&automapper=true&q="+encodeURIComponent(e);if(this.data.playlist)t=`https://api.beatsaver.com/playlists/id/${this.data.playlist}/CURRENT_PAGE_INDEX`;else if(this.data.genre){const e={Pop:"pop","R&B":"rb",Rap:"hip-hop-rap",Rock:"rock",Soundtrack:"tv-movie-soundtrack","Video Games":"video-game-soundtrack",Electronic:"electronic","Hip Hop":"hip-hop-rap",House:"house","J-Pop":"j-pop","K-Pop":"k-pop",Meme:"comedy-meme",Alternative:"alternative",Anime:"anime",Comedy:"comedy-meme",Dubstep:"dubstep",Dance:"dance"}[this.data.genre];t="https://beatsaver.com/api/search/text/CURRENT_PAGE_INDEX?sortOrder=Rating&automapper=true&tags="+encodeURIComponent(e)}else if(e&&e.length<3)return;fetch(t.replaceAll("CURRENT_PAGE_INDEX",0)).then(e=>e.json()).then(e=>{var n=(e.docs||e.maps).map(o);this.eventDetail.results=n,this.eventDetail.url=t,this.eventDetail.urlPage=0,this.el.sceneEl.emit("searchresults",this.eventDetail)})}}),AFRAME.registerComponent("search-result-list",{init:function(){new MutationObserver(e=>{for(let t=0;t<e.length;t++)"data-index"===e[t].attributeName&&this.refreshLayout()}).observe(this.el,{attributes:!0,childList:!1,subtree:!0})},events:{click:function(e){this.el.sceneEl.emit("menuchallengeselect",e.target.closest(".searchResult").dataset.id,!1)}},refreshLayout:function(){this.el.emit("layoutrefresh",null,!1)}}),window.AFRAME){const t=["search","search-result-list"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,r=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),d=Object.prototype.toString,u=Math.max,h=Math.min,m=function(){return c.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=o.test(e);return s||a.test(e)?r(e.slice(2),s?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var i,o,a,r,s,l,c=0,d=!1,f=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=i,a=o;return i=o=void 0,c=t,r=e.apply(a,n)}function y(e){return c=e,s=setTimeout(E,t),d?b(e):r}function v(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-c>=a}function E(){var e=m();if(v(e))return x(e);s=setTimeout(E,function(e){var n=t-(e-l);return f?h(n,a-(e-c)):n}(e))}function x(e){return s=void 0,g&&i?b(e):(i=o=void 0,r)}function S(){var e=m(),n=v(e);if(i=arguments,o=this,l=e,n){if(void 0===s)return y(l);if(f)return s=setTimeout(E,t),b(l)}return void 0===s&&(s=setTimeout(E,t)),r}return t=A(t)||0,p(n)&&(d=!!n.leading,a=(f="maxWait"in n)?u(A(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g),S.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=l=o=s=void 0},S.flush=function(){return void 0===s?r:x(m())},S}}).call(this,n(2))},function(e,t){e.exports=[{id:"2144",name:"Shut Up and Dance - WALK THE MOON",description:"Difficulties: Expert+ (Added 11/15), Expert, Hard, Normal\r\nYouTube Preview: https://youtu.be/x9hJbTlPQUY",uploader:{id:30311,name:"bennydabeast",uniqueSet:!0,hash:"5cff0b7298cc5a672c84e98d",avatar:"https://cdn.beatsaver.com/avatar/30311.jpg",type:"SIMPLE"},metadata:{bpm:128,duration:200,songName:"Shut Up and Dance",songSubName:"WALK THE MOON",songAuthorName:"BennyDaBeast",levelAuthorName:"bennydabeast"},stats:{plays:0,downloads:47856,upvotes:15705,downvotes:243,score:.9584},uploaded:"2018-11-21T01:27:00Z",automapper:!1,ranked:!1,qualified:!1,versions:[{hash:"89cf8bb07afb3c59ae7b5ac00337d62261c36fb4",key:"2144",state:"Published",createdAt:"2018-11-21T01:27:00Z",sageScore:3,diffs:[{njs:10,offset:0,notes:301,bombs:4,obstacles:24,nps:1.578,length:407,characteristic:"Standard",difficulty:"Normal",events:380,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:190.781,paritySummary:{errors:64,warns:19,resets:0}},{njs:10,offset:0,notes:486,bombs:4,obstacles:24,nps:2.547,length:407,characteristic:"Standard",difficulty:"Hard",events:380,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:190.781,paritySummary:{errors:76,warns:34,resets:0}},{njs:10,offset:0,notes:620,bombs:4,obstacles:24,nps:3.246,length:407.5,characteristic:"Standard",difficulty:"Expert",events:380,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:191.016,paritySummary:{errors:88,warns:68,resets:0}},{njs:12,offset:0,notes:894,bombs:0,obstacles:0,nps:4.68,length:407.5,characteristic:"Standard",difficulty:"ExpertPlus",events:380,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:191.016,paritySummary:{errors:99,warns:120,resets:0}}],downloadURL:"https://cdn.beatsaver.com/89cf8bb07afb3c59ae7b5ac00337d62261c36fb4.zip",coverURL:"https://cdn.beatsaver.com/89cf8bb07afb3c59ae7b5ac00337d62261c36fb4.jpg",previewURL:"https://cdn.beatsaver.com/89cf8bb07afb3c59ae7b5ac00337d62261c36fb4.mp3"}],createdAt:"2018-11-21T01:27:00Z",updatedAt:"2018-11-21T01:27:00Z",lastPublishedAt:"2018-11-21T01:27:00Z"},{id:"66e6",name:"League of Legends - Legends never die (ft. Against The Current)",description:"A special request from Prima1URGE",uploader:{id:4285107,name:"kikaeaeon",uniqueSet:!0,hash:"5cff0b7498cc5a672c85109b",avatar:"https://cdn.beatsaver.com/avatar/103715469822816256.png",type:"DISCORD"},metadata:{bpm:140,duration:236,songName:"Legends Never Die",songSubName:"",songAuthorName:"League of Legends & Against The Current",levelAuthorName:"KikaeAeon"},stats:{plays:0,downloads:30647,upvotes:10346,downvotes:160,score:.9549},uploaded:"2019-09-30T10:19:45.606Z",automapper:!1,ranked:!1,qualified:!1,versions:[{hash:"732bd4072b89d4b3bf0e63db812a7ffc3096e837",key:"66e6",state:"Published",createdAt:"2019-09-30T10:19:45.606Z",sageScore:6,diffs:[{njs:12,offset:0,notes:705,bombs:0,obstacles:10,nps:3.041,length:541,characteristic:"Standard",difficulty:"Expert",events:1693,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:231.857,paritySummary:{errors:4,warns:2,resets:0}},{njs:16,offset:0,notes:876,bombs:0,obstacles:10,nps:3.778,length:541,characteristic:"Standard",difficulty:"ExpertPlus",events:1693,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:231.857,paritySummary:{errors:3,warns:2,resets:0}}],downloadURL:"https://cdn.beatsaver.com/732bd4072b89d4b3bf0e63db812a7ffc3096e837.zip",coverURL:"https://cdn.beatsaver.com/732bd4072b89d4b3bf0e63db812a7ffc3096e837.jpg",previewURL:"https://cdn.beatsaver.com/732bd4072b89d4b3bf0e63db812a7ffc3096e837.mp3"}],createdAt:"2019-09-30T10:19:45.606Z",updatedAt:"2019-09-30T10:19:45.606Z",lastPublishedAt:"2019-09-30T10:19:45.606Z"},{id:"570",name:"Mr. Blue Sky | Electric Light Orchestra",description:"Channel your inner Baby Groot.  Normal, Hard, Expert\r\nSpecial thanks to BennydaBeast for his help on this track!",uploader:{id:41378,name:"greatyazer",uniqueSet:!0,hash:"5cff0b7298cc5a672c84ea71",avatar:"https://www.gravatar.com/avatar/5cff0b7298cc5a672c84ea71?d=retro",type:"SIMPLE"},metadata:{bpm:174,duration:222,songName:"Mr. Blue Sky",songSubName:"Electric Light Orchestra",songAuthorName:"GreatYazer",levelAuthorName:"greatyazer"},stats:{plays:0,downloads:53449,upvotes:29661,downvotes:731,score:.9547},uploaded:"2018-06-16T16:53:34Z",automapper:!1,ranked:!0,qualified:!1,versions:[{hash:"236173d5ba7dc379d480b9cb5fb6b4fa5abe77da",key:"570",state:"Published",createdAt:"2018-06-16T16:53:34Z",sageScore:5,diffs:[{njs:10,offset:0,notes:462,bombs:0,obstacles:25,nps:2.228,length:601.313,characteristic:"Standard",difficulty:"Normal",events:816,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:207.349,paritySummary:{errors:132,warns:16,resets:0},stars:1.46},{njs:10,offset:0,notes:639,bombs:0,obstacles:40,nps:3.082,length:601.313,characteristic:"Standard",difficulty:"Hard",events:816,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:207.349,paritySummary:{errors:109,warns:27,resets:0}},{njs:10,offset:0,notes:825,bombs:0,obstacles:40,nps:3.979,length:601.313,characteristic:"Standard",difficulty:"Expert",events:816,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:207.349,paritySummary:{errors:119,warns:57,resets:0}}],downloadURL:"https://cdn.beatsaver.com/236173d5ba7dc379d480b9cb5fb6b4fa5abe77da.zip",coverURL:"https://cdn.beatsaver.com/236173d5ba7dc379d480b9cb5fb6b4fa5abe77da.jpg",previewURL:"https://cdn.beatsaver.com/236173d5ba7dc379d480b9cb5fb6b4fa5abe77da.mp3"}],createdAt:"2018-06-16T16:53:34Z",updatedAt:"2018-06-16T16:53:34Z",lastPublishedAt:"2018-06-16T16:53:34Z"},{id:"3cf5",name:"Caramelldansen",description:"Preview: https://youtu.be/V5p0HOzunY0\n\n\nTwitter: https://twitter.com/Dack731",uploader:{id:4285250,name:"dack",uniqueSet:!0,hash:"5cff0b7598cc5a672c852c6f",avatar:"https://cdn.beatsaver.com/avatar/297344689798119424.png",type:"DISCORD"},metadata:{bpm:165,duration:178,songName:"Caramelldansen (Speedcake Remix)",songSubName:"Caramell",songAuthorName:"Dack",levelAuthorName:"Dack"},stats:{plays:0,downloads:30551,upvotes:19321,downvotes:422,score:.9543},uploaded:"2019-03-09T22:54:54Z",automapper:!1,ranked:!1,qualified:!1,versions:[{hash:"cf5e32d6b7f30095f7198da5894139c92336cad7",key:"3cf5",state:"Published",createdAt:"2019-03-09T22:54:54Z",sageScore:4,diffs:[{njs:14,offset:0,notes:722,bombs:52,obstacles:28,nps:4.254,length:466.75,characteristic:"Standard",difficulty:"Expert",events:597,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:169.727,paritySummary:{errors:37,warns:23,resets:0}}],downloadURL:"https://cdn.beatsaver.com/cf5e32d6b7f30095f7198da5894139c92336cad7.zip",coverURL:"https://cdn.beatsaver.com/cf5e32d6b7f30095f7198da5894139c92336cad7.jpg",previewURL:"https://cdn.beatsaver.com/cf5e32d6b7f30095f7198da5894139c92336cad7.mp3"}],createdAt:"2019-03-09T22:54:54Z",updatedAt:"2019-03-09T22:54:54Z",lastPublishedAt:"2019-03-09T22:54:54Z"},{id:"133b",name:"Daddy - PSY",description:"Insanely fun dance map! Enjoy!\nSee the map in action (Expert): https://www.youtube.com/watch?v=7jOIdfo0j4Q\n\nThank you to my playtesters:\nDuoVR (https://www.twitch.tv/duovr)\nSourgurl (https://www.twitch.tv/sourgurl)\nRexxxzi (https://www.twitch.tv/rexxxzi)\nAshleyriott (https://www.twitch.tv/ashleyriott)",uploader:{id:38202,name:"fafurion",uniqueSet:!1,hash:"5cff0b7398cc5a672c84f945",avatar:"https://www.gravatar.com/avatar/5cff0b7398cc5a672c84f945?d=retro",type:"SIMPLE"},metadata:{bpm:132,duration:232,songName:"Daddy",songSubName:"PSY",songAuthorName:"Fafurion",levelAuthorName:"fafurion"},stats:{plays:0,downloads:21881,upvotes:11227,downvotes:192,score:.9542},uploaded:"2018-09-02T23:43:45Z",automapper:!1,ranked:!1,qualified:!1,versions:[{hash:"dc489921185f92dfecb9cb07b84fc556123bd134",key:"133b",state:"Published",createdAt:"2018-09-02T23:43:45Z",sageScore:5,diffs:[{njs:10,offset:0,notes:671,bombs:0,obstacles:16,nps:3.012,length:490.125,characteristic:"Standard",difficulty:"Hard",events:1586,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:222.784,paritySummary:{errors:38,warns:39,resets:0}},{njs:10,offset:0,notes:831,bombs:0,obstacles:16,nps:3.73,length:490.125,characteristic:"Standard",difficulty:"Expert",events:1587,chroma:!1,me:!1,ne:!1,cinema:!1,seconds:222.784,paritySummary:{errors:44,warns:40,resets:0}}],downloadURL:"https://cdn.beatsaver.com/dc489921185f92dfecb9cb07b84fc556123bd134.zip",coverURL:"https://cdn.beatsaver.com/dc489921185f92dfecb9cb07b84fc556123bd134.jpg",previewURL:"https://cdn.beatsaver.com/dc489921185f92dfecb9cb07b84fc556123bd134.mp3"}],createdAt:"2018-09-02T23:43:45Z",updatedAt:"2018-09-02T23:43:45Z",lastPublishedAt:"2018-09-02T23:43:45Z"}]},function(e,t,n){if(AFRAME.registerComponent("song-info-positioner",{schema:{victory:{default:!1}},update:function(){this.data.victory?this.el.object3D.position.y=-1.2:this.el.object3D.position.y=-1}}),window.AFRAME){const t=["song-info-positioner"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){n(6);if(AFRAME.registerComponent("song-preview-system",{schema:{selectedChallengeId:{type:"string"},selectedChallengeVersion:{type:"string"}},init:function(){this.audio=document.createElement("audio"),this.audio.volume=.5},update:function(e){const t=this.data;console.log("update-song",e,t),t.selectedChallengeId&&e.selectedChallengeId!==t.selectedChallengeId?(this.audio.pause(),this.audio.setAttribute("src","https://cdn.beatsaver.com/"+t.selectedChallengeVersion+".mp3"),this.audio.currentTime=0,this.audio.play()):t.selectedChallengeId||this.audio.pause()}}),window.AFRAME){const t=["song-preview-system"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("song-progress-info",{dependencies:["geometry","material"],schema:{enabled:{default:!1}},init:function(){this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),1e3),this.progress=this.el.getObject3D("mesh"),this.progress.geometry.translate(.285,0,0),this.el.sceneEl.addEventListener("cleargame",()=>{this.progress.scale.x=1e-4})},update:function(e){this.progress.scale.x=1e-4},updateInfo:function(){const e=this.el.sceneEl.components.song.source;if(!e||!e.buffer)return;const t=this.el.sceneEl.components.song.getCurrentTime()/e.buffer.duration;t&&(this.progress.scale.x=t)},tick:function(){this.data.enabled&&this.updateInfo()}}),window.AFRAME){const t=["song-progress-info"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){n(6);const i={once:!0};let o=AFRAME.utils.getUrlParameter("skip");if(o=o?parseInt(o)/1e3:0,AFRAME.registerComponent("song",{schema:{audio:{type:"string"},analyserEl:{type:"selector",default:"#audioAnalyser"},challengeId:{default:""},isBeatsPreloaded:{default:!1},isGameOver:{default:!1},isLoading:{default:!1},isPlaying:{default:!1},isVictory:{default:!1}},init:function(){this.analyserSetter={buffer:!0},this.audioAnalyser=this.data.analyserEl.components.audioanalyser,this.context=this.audioAnalyser.context,this.isAudioPlaying=!1,this.songStartTime=0,this.onSongComplete=this.onSongComplete.bind(this),this.audioAnalyser.gainNode.gain.value=.5,this.el.addEventListener("gamemenurestart",this.onRestart.bind(this)),this.el.addEventListener("wallhitstart",this.onWallHitStart.bind(this)),this.el.addEventListener("wallhitend",this.onWallHitEnd.bind(this))},update:function(e){const t=this.data;if(!e.isLoading&&t.isLoading&&t.audio)this.processAudio();else if(!e.audio&&t.audio&&t.isLoading)this.processAudio();else if(e.isGameOver||!t.isGameOver){if(e.isGameOver&&!t.isGameOver&&(this.audioAnalyser.gainNode.value=.5),!e.isVictory&&t.isVictory)return this.data.analyserEl.addEventListener("audioanalyserbuffersource",e=>{this.audioAnalyser.resumeContext();const t=this.audioAnalyser.gainNode.gain;t.cancelScheduledValues(0),t.setValueAtTime(.05,0),this.source=e.detail,this.source.start(),this.el.emit("victory")},i),void this.audioAnalyser.refreshSource();!e.isBeatsPreloaded&&this.data.isBeatsPreloaded&&this.source&&this.startAudio(),!e.challengeId||t.challengeId?(e.isPlaying&&!t.isPlaying&&(this.audioAnalyser.suspendContext(),this.isAudioPlaying=!1),!e.isPlaying&&t.isPlaying&&this.source&&(this.audioAnalyser.resumeContext(),this.isAudioPlaying=!0)):this.stopAudio()}else this.onGameOver()},processAudio:function(){this.el.sceneEl.emit("songprocessstart",null,!1),this.getAudio().then(e=>{this.el.sceneEl.emit("songprocessfinish",null,!1)}).catch(console.error)},getAudio:function(){const e=this.data;return this.source&&this.stopAudio(),this.isAudioPlaying=!1,new Promise(t=>{e.analyserEl.addEventListener("audioanalyserbuffersource",e=>{this.source=e.detail,t(this.source)},i),this.analyserSetter.src=this.data.audio,e.analyserEl.setAttribute("audioanalyser",this.analyserSetter)})},stopAudio:function(){this.source?(this.source.onended=null,this.isAudioPlaying&&this.source.stop(),this.source.disconnect(),this.source=null,this.isAudioPlaying=!1):console.warn("[song] Tried to stopAudio, but not playing.")},onSongComplete:function(){this.data.isPlaying&&this.el.emit("songcomplete")},onGameOver:function(){this.isAudioPlaying=!1;const e=this.source.playbackRate;e.setValueAtTime(e.value,this.context.currentTime),e.linearRampToValueAtTime(0,this.context.currentTime+3.5);const t=this.audioAnalyser.gainNode.gain;t.setValueAtTime(t.value,this.context.currentTime),t.linearRampToValueAtTime(0,this.context.currentTime+3.5),setTimeout(()=>{this.data.isGameOver&&this.stopAudio()},3500)},onRestart:function(){this.isAudioPlaying=!1,this.source&&this.source.disconnect();this.audioAnalyser.gainNode.gain.cancelScheduledValues(0),this.data.analyserEl.addEventListener("audioanalyserbuffersource",e=>{this.source=e.detail,this.el.sceneEl.emit("songloadfinish",null,!1)},i),this.audioAnalyser.refreshSource()},onWallHitStart:function(){this.audioAnalyser.gainNode.gain.linearRampToValueAtTime(.1,this.context.currentTime+.1)},onWallHitEnd:function(){this.audioAnalyser.gainNode.gain.linearRampToValueAtTime(.5,this.context.currentTime+.1)},startAudio:function(){this.audioAnalyser.gainNode.gain.setValueAtTime(.5,this.context.currentTime),this.songStartTime=this.context.currentTime,this.source.onended=this.onSongComplete,this.source.start(0,o||0),this.isAudioPlaying=!0},getCurrentTime:function(){return this.context.currentTime-this.songStartTime}}),window.AFRAME){const t=["song"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i);const a=[{name:"bgcolor",property:"backglow.color"},{name:"leftglow",property:"leftsideglow.color"},{name:"rightglow",property:"rightsideglow.color"}],r=[{id:"off",dur:500,to:"off"},{id:"primary",dur:5,to:"primary"},{id:"primarybright",dur:500,from:"tertiary",to:"primarybright"},{id:"secondary",dur:5,to:"secondary"},{id:"secondarybright",dur:500,from:"tertiary",to:"secondarybright"}],s=["off","secondary","secondary","secondarybright","","primary","primary","primarybright","primarybright"];AFRAME.registerComponent("stage-colors",{schema:{colorScheme:{default:"default"}},init:function(){this.el.addEventListener("cleargame",this.resetColors.bind(this)),this.el.sceneEl.addEventListener("playbuttonclick",this.resetColors.bind(this)),function(e,t){for(let n=0;n<a.length;n++){const i=a[n];for(let n=0;n<r.length;n++){const a=r[n];e.setAttribute(`animation__${i.name}${a.id}`,{property:"systems.materials."+i.property,type:"color",isRawProperty:!0,easing:"linear",dur:a.dur,from:a.from?o.a.schemes[t][a.from]:"",startEvents:`${i.name}${a.id}`,to:o.a.schemes[t][a.to]})}}}(this.el.sceneEl,this.data.colorScheme)},update:function(e){e.colorScheme&&this.data.colorScheme!==e.colorScheme&&function(e,t){for(let n=0;n<a.length;n++){const i=a[n];for(let n=0;n<r.length;n++){const a=r[n],s=`animation__${i.name}${a.id}`;a.from&&e.setAttribute(s,"from",o.a.schemes[t][a.from]),e.setAttribute(s,"to",o.a.schemes[t][a.to])}}}(this.el.sceneEl,this.data.colorScheme)},play:function(){this.el.emit("bgcolorsecondary",null,!1)},setColor:function(e,t){s[t]||(t=5),e.startsWith("curve")?this.el.emit(e+"stageeventcolor",s[t].replace("bright",""),!1):this.el.emit(`${e}color${s[t]}`,null,!1)},setColorInstant:function(e,t){const n=this.el.sceneEl.systems.materials;if("stars"===e){let e;return e=0===t?o.a.schemes[this.data.colorScheme].secondarybright:o.a.schemes[this.data.colorScheme].secondary,void c(n.stars,"color",e)}const i=o.a.schemes[this.data.colorScheme][s[t]];"moon"===e&&c(n.moon,"tint",i)},resetColors:function(){this.el.emit("bgcolorsecondary",null,!1),this.el.emit("curveevenstageeventcolor","off",!1),this.el.emit("curveoddstageeventcolor","off",!1)}});const l=new THREE.Color;function c(e,t,n){l.set(n),e.uniforms?(e.uniforms[t].value.x=l.r,e.uniforms[t].value.y=l.g,e.uniforms[t].value.z=l.b):e[t].set(n)}if(window.AFRAME){const t=["stage-colors"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("stage-lasers",{schema:{enabled:{default:!0}},init:function(){this.speed=0,this.lasers=[this.el.children[0].object3D,this.el.children[1].object3D,this.el.children[2].object3D]},pulse:function(e){this.speed=e/8},tick:function(e,t){0!==this.speed&&(t/=1e3,!this.data.enabled&&(this.speed*=.97,Math.abs(this.speed)<.01)?this.speed=0:(this.lasers[0].rotation.z+=this.speed*t,this.lasers[1].rotation.z-=this.speed*t*1.01,this.lasers[2].rotation.z+=this.speed*t*1.02))}}),window.AFRAME){const t=["stage-lasers"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=n(0);if(AFRAME.registerComponent("stars",{schema:{color:{type:"color",default:i.initial.secondary},count:{default:500},radius:{default:300}},init:function(){const e=()=>(Math.random()-.5)*this.data.radius*2,t=new THREE.BufferGeometry;this.material=this.el.sceneEl.systems.materials.stars;const n=[];for(let t=0;t<this.data.count;t++)n.push(e(),e(),4*e());t.setAttribute("position",new THREE.Float32BufferAttribute(n,3)),t.computeBoundingSphere();const i=new THREE.Points(t,this.material);this.el.setObject3D("stars",i)},update:function(){this.material.color.setStyle(this.data.color)}}),window.AFRAME){const t=["stars"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("stats-param",{init:function(){"true"===AFRAME.utils.getUrlParameter("stats")&&this.el.setAttribute("stats","")}}),window.AFRAME){const t=["stats-param"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("stepback",{init:function(){this.message=document.getElementById("stepback"),this.camera=document.getElementById("camera"),this.lastTime=0,this.limit=-.9,this.throttling=300},tick:function(e,t){if(!(e-this.lastTime<this.throttling)){var n=this.camera.object3D.position,i=this.message.object3D.position;n.z<this.limit?(this.throttling=10,this.message.object3D.visible=!0,this.message.getObject3D("mesh").material.opacity=1-Math.abs(n.z-i.z),i.x=n.x,i.y=n.y):(this.message.object3D.visible=!1,this.throttling=500),this.lastTime=e}}}),window.AFRAME){const t=["stepback"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("sub-object",{schema:{from:{type:"selector"},name:{type:"string"}},init:function(){var e=this.el,t=this.data;t.from.addEventListener("model-loaded",n=>{const i=n.detail.model.getObjectByName(t.name);e.setObject3D("mesh",i.clone()),e.setAttribute("material","shader","flat"),e.emit("subobjectloaded",null,!1)})}}),window.AFRAME){const t=["sub-object"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var i={superkeyboard:{wrapCount:20,inputOffsetY:.008,inputOffsetX:.08,img:"keyboard.png",hoverImg:"keyboard-hover.png",layout:[{key:"1",x:.013,y:.03,w:.093,h:.176},{key:"2",x:.106,y:.03,w:.088,h:.176},{key:"3",x:.194,y:.03,w:.077,h:.176},{key:"4",x:.271,y:.03,w:.085,h:.176},{key:"5",x:.356,y:.03,w:.081,h:.176},{key:"6",x:.437,y:.03,w:.081,h:.176},{key:"8",x:.603,y:.03,w:.082,h:.176},{key:"7",x:.519,y:.03,w:.084,h:.176},{key:"9",x:.685,y:.03,w:.076,h:.176},{key:"0",x:.76,y:.03,w:.088,h:.176},{key:"Delete",x:.867,y:.03,w:.124,h:.176},{key:"q",x:.013,y:.213,w:.098,h:.186},{key:"w",x:.111,y:.213,w:.107,h:.186},{key:"e",x:.218,y:.213,w:.096,h:.186},{key:"r",x:.313,y:.213,w:.095,h:.186},{key:"t",x:.408,y:.213,w:.094,h:.186},{key:"y",x:.503,y:.213,w:.099,h:.186},{key:"u",x:.602,y:.213,w:.097,h:.186},{key:"i",x:.701,y:.213,w:.085,h:.186},{key:"o",x:.786,y:.213,w:.099,h:.186},{key:"p",x:.885,y:.213,w:.097,h:.186},{key:"a",x:.063,y:.408,w:.1,h:.182},{key:"s",x:.163,y:.408,w:.097,h:.182},{key:"d",x:.26,y:.408,w:.098,h:.182},{key:"f",x:.358,y:.408,w:.094,h:.182},{key:"g",x:.452,y:.408,w:.1,h:.182},{key:"h",x:.552,y:.408,w:.105,h:.182},{key:"j",x:.657,y:.408,w:.085,h:.182},{key:"k",x:.743,y:.408,w:.105,h:.182},{key:"l",x:.848,y:.408,w:.1,h:.182},{key:"z",x:.107,y:.596,w:.106,h:.197},{key:"x",x:.213,y:.596,w:.1,h:.197},{key:"c",x:.313,y:.596,w:.093,h:.197},{key:"v",x:.406,y:.596,w:.096,h:.197},{key:"b",x:.502,y:.596,w:.093,h:.197},{key:"n",x:.595,y:.596,w:.099,h:.197},{key:"m",x:.694,y:.596,w:.106,h:.197},{key:" ",x:.372,y:.798,w:.249,h:.169},{key:"Insert",x:.017,y:-.001,w:.038,h:.018}]}};if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var o={roboto:17,aileronsemibold:20,dejavu:20.5,exo2bold:20,exo2semibold:20.3,kelsonsans:22.8,monoid:19.5,mozillavr:9.5,sourcecodepro:20.3};function a(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e[n];return null}if(AFRAME.registerComponent("super-keyboard",{schema:{align:{default:"left",oneOf:["left","center","right"]},blinkingSpeed:{type:"int",default:400},filters:{type:"array"},font:{default:"aileronsemibold"},hand:{type:"selector"},imagePath:{default:"."},injectToRaycasterObjects:{default:!0},inputColor:{type:"color",default:"#6699ff"},interval:{type:"int",default:50},keyBgColor:{type:"color",default:"#000"},keyColor:{type:"color",default:"#6699ff"},keyHoverColor:{type:"color",default:"#1A407F"},keyPressColor:{type:"color",default:"#5290F6"},label:{type:"string",default:""},labelColor:{type:"color",default:"#aaa"},maxLength:{type:"int",default:0},model:{default:"basic"},show:{default:!0},value:{type:"string",default:""},width:{default:.8}},init:function(){this.el.addEventListener("mousedown",this.click.bind(this)),this.changeEventDetail={},this.keys=null,this.focused=!1,this.keyHover=null,this.prevCheckTime=null,this.shift=!1,this.rawValue=this.data.value,this.defaultValue=this.data.value,this.userFilterFunc=null,this.intervalId=0,this.kbImg=document.createElement("a-entity"),this.kbImg.classList.add("keyboardRaycastable"),this.kbImg.classList.add("superKeyboardImage"),this.kbImg.addEventListener("raycaster-intersected",this.hover.bind(this)),this.kbImg.addEventListener("raycaster-intersected-cleared",this.blur.bind(this)),this.el.appendChild(this.kbImg),this.label=document.createElement("a-entity"),this.label.setAttribute("text",{align:"center",font:this.data.font,baseline:"bottom",lineHeight:40,shader:"msdf",negate:!0,value:this.data.label,color:this.data.labelColor,width:this.data.width,wrapCount:30}),this.el.appendChild(this.label),this.textInput=document.createElement("a-entity"),this.textInput.setAttribute("mixin","superKeyboardTextInput"),this.textInput.setAttribute("text",{align:this.data.align,font:this.data.font,lineHeight:35,value:this.data.value,color:this.data.inputColor,width:this.data.width,wrapCount:20}),this.el.appendChild(this.textInput),this.cursor=document.createElement("a-entity"),this.cursor.object3D.position.set(0,0,.001),this.cursor.setAttribute("material",{shader:"flat",color:this.data.inputColor}),this.textInput.appendChild(this.cursor),this.cursorUpdated=!1,this.keyBgColor=new THREE.Color,this.keyHoverColor=new THREE.Color,this.keyPressColor=new THREE.Color;var e=this;document.addEventListener("keydown",(function(t){if("t"===t.key){for(var n="",i="abcdefghijklmopqrstuvQWIEUTGASDLIGKBXACQWETL102394676457",o=Math.floor(20*Math.random()),a=0;a<o;a++)n+=i[Math.floor(Math.random()*i.length)];e.el.setAttribute("super-keyboard",{value:n})}})),document.addEventListener("show",this.open.bind(this)),this.hand=null,this.handListenersSet=!1,this.raycaster=null},update:function(e){var t=i[this.data.model],n=this.data.width,o=this.data.width/2;if(void 0!==t){e&&this.defaultValue===e.defaultValue?this.updateTextInput(this.filter(this.rawValue)):(this.rawValue=this.data.value,this.defaultValue=this.data.value,this.updateTextInput(this.filter(this.data.value))),this.data.width===e.width&&this.data.height===e.height&&this.data.keyColor===e.keyColor||(this.kbImg.setAttribute("geometry",{primitive:"plane",width:n,height:o}),this.kbImg.setAttribute("material",{shader:"flat",src:this.data.imagePath+"/"+t.img,color:this.data.keyColor,transparent:!0})),this.data.label===e.label&&this.data.labelColor===e.labelColor&&this.data.width===e.width||(this.label.setAttribute("text",{value:this.data.label,color:this.data.labelColor,width:this.data.width}),this.label.object3D.position.set(0,.4*n,-.02)),this.data.width===e.width&&this.data.keyBgColor===e.keyBgColor||this.initKeyColorPlane();var a="center"!==this.data.align?t.inputOffsetX*n:0;"right"===this.data.align&&(a*=-1),this.data.font===e.font&&this.data.inputColor===e.inputColor&&this.data.width===e.width&&this.data.align===e.align||this.textInput.setAttribute("text",{font:this.data.font,color:this.data.inputColor,width:n,wrapCount:t.wrapCount,align:this.data.align});for(var r=0;r<t.layout.length;r++){var s=t.layout[r];"Insert"===s.key&&(this.inputRect=s)}this.textInput.object3D.position.set(a,n/4-(this.inputRect.y+this.inputRect.h/2)*n/2+t.inputOffsetY*n,.002),this.data.width!==e.width&&this.cursor.setAttribute("geometry",{primitive:"plane",width:.03*n,height:.01*n}),this.updateCursorPosition(),this.setupHand(),this.keyBgColor.set(this.data.keyBgColor),this.keyHoverColor.set(this.data.keyHoverColor),this.keyPressColor.set(this.data.keyPressColor),this.data.show?this.open():this.close()}else console.error('super-keyboard ERROR: model "'+this.data.model+'" undefined.')},tick:function(e){var t;if(!(this.prevCheckTime&&e-this.prevCheckTime<this.data.interval))if(this.prevCheckTime){if(this.raycaster&&this.focused&&(t=this.raycaster.getIntersection(this.kbImg)))for(var n=t.uv,o=i[this.data.model].layout,a=0;a<o.length;a++){var r=o[a];if(n.x>r.x&&n.x<r.x+r.w&&1-n.y>r.y&&1-n.y<r.y+r.h){this.keyHover!==r&&(this.keyHover=r,this.updateKeyColorPlane(this.keyHover.key,this.keyHoverColor));break}}}else this.prevCheckTime=e},play:function(){this.cursorUpdated&&this.startBlinking()},pause:function(){this.stopBlinking()},initKeyColorPlane:function(){var e=i[this.data.model],t=this.keyColorPlane=document.createElement("a-entity");t.classList.add("superKeyboardKeyColorPlane"),t.object3D.position.z=.001,t.object3D.visible=!1,t.setAttribute("geometry",{primitive:"plane",buffer:!1}),t.setAttribute("material",{shader:"flat",color:this.data.keyBgColor,transparent:!0}),e.hoverImg&&t.setAttribute("material",{src:this.data.imagePath+"/"+e.hoverImg}),t.addEventListener("componentinitialized",(function(t){"material"===t.detail.name&&(e.hoverImg||(this.getObject3D("mesh").material.blending=THREE.AdditiveBlending))})),this.el.appendChild(t)},updateKeyColorPlane:function(e,t){var n=i[this.data.model],o=this.keyColorPlane;if(e){for(var a=0;a<n.layout.length;a++){var r=n.layout[a];if(r.key===e){var s=this.data.width,l=this.data.width/2,c=s/2,d=l/2,u=r.w*s,h=r.h*l;o.object3D.scale.x=u,o.object3D.scale.y=h,o.object3D.position.x=r.x*s-c+u/2,o.object3D.position.y=(1-r.y)*l-d-h/2,o.getObject3D("mesh").material.color.copy(t);var m=o.getObject3D("mesh").geometry,p=m.faceVertexUvs[0],A=1-r.y;p[0][0].set(r.x,A),p[0][1].set(r.x,A-r.h),p[0][2].set(r.x+r.w,A),p[1][0].set(r.x,A-r.h),p[1][1].set(r.x+r.w,A-r.h),p[1][2].set(r.x+r.w,A),m.uvsNeedUpdate=!0;break}}o.object3D.visible=!0}else o.object3D.visible=!1},setupHand:function(){if(this.hand&&this.hand.ownRaycaster&&this.hand.removeAttribute("raycaster"),this.data.hand?this.hand=this.data.hand:this.hand=document.querySelector(["[cursor]","[vive-controls]","[tracked-controls]","[oculus-touch-controls]","[windows-motion-controls]","[hand-controls]","[daydream-controls] [cursor] > [raycaster]"].join(",")),this.hand){if(!this.hand.hasLoaded)return void this.hand.addEventListener("loaded",this.setupHand.bind(this));var e=this.hand.components.raycaster,t={};if(e){if(this.hand.ownRaycaster=!1,this.data.injectToRaycasterObjects){var n=e.data.objects.split(",");-1===n.indexOf(".keyboardRaycastable")&&n.push(".keyboardRaycastable"),t.objects=n.join(",").replace(/^,/,""),this.hand.setAttribute("raycaster",t)}}else this.hand.ownRaycaster=!0,t.showLine=this.data.show,t.enabled=this.data.show,this.data.injectToRaycasterObjects&&(t.objects=".keyboardRaycastable"),this.hand.setAttribute("raycaster",t);this.raycaster=this.hand.components.raycaster}else console.error('super-keyboard: no controller found. Add <a-entity> with controller or specify with super-keyboard="hand: #selectorToController".')},filter:function(e){if(""===e)return"";for(var t=0;t<this.data.filters.length;t++)switch(this.data.filters[t]){case"custom":this.userFilterFunc&&(e=this.userFilterFunc(e));break;case"allupper":e=e.toUpperCase();break;case"alllower":e=e.toLowerCase();break;case"title":e=e.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1)})).join(" ");break;case"numbers":e=e.split("").filter((function(e){return!isNaN(parseInt(e))||"."===e})).join("");break;case"first":e=e[0].toUpperCase()+e.substr(1);break;case"trim":e=e.trim()}return this.data.maxLength>0?e.substr(0,this.data.maxLength):e},click:function(e){if(this.keyHover){switch(this.keyHover.key){case"Enter":this.accept();break;case"Insert":return;case"Delete":this.rawValue=this.rawValue.substr(0,this.rawValue.length-1);var t=this.filter(this.rawValue);this.el.setAttribute("super-keyboard","value",t),this.updateTextInput(t),this.changeEventDetail.value=t,this.el.emit("superkeyboardchange",this.changeEventDetail);break;case"Shift":this.shift=!this.shift,this.keyHover.el.setAttribute("material","color",this.shift?this.data.keyHoverColor:this.data.keyBgColor);break;case"Escape":this.dismiss();break;default:if(this.data.maxLength>0&&this.rawValue.length>this.data.maxLength)break;this.rawValue+=this.shift?this.keyHover.key.toUpperCase():this.keyHover.key;t=this.filter(this.rawValue);this.el.setAttribute("super-keyboard","value",t),this.updateTextInput(t),this.changeEventDetail.value=t,this.el.emit("superkeyboardchange",this.changeEventDetail)}this.updateKeyColorPlane(this.keyHover.key,this.keyPressColor);var n=this;setTimeout((function(){n.updateKeyColorPlane(n.keyHover.key,n.keyHoverColor)}),100),this.updateCursorPosition()}},open:function(){this.el.object3D.visible=!0,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!0,enabled:!0})},close:function(){this.el.object3D.visible=!1,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!1,enabled:!1})},accept:function(){this.el.object3D.visible=!1,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!1,enabled:!1}),this.el.emit("superkeyboardinput",{value:this.data.value}),this.data.show=!1},dismiss:function(){this.data.value=this.defaultValue,this.updateTextInput(),this.el.object3D.visible=!1,this.hand&&this.hand.ownRaycaster&&this.hand.setAttribute("raycaster",{showLine:!1,enabled:!1}),this.el.emit("superkeyboarddismiss"),this.data.show=!1},blur:function(){this.focused=!1,this.keyHover&&"Shift"!==this.keyHover.key&&(this.keyColorPlane.object3D.visible=!1),this.keyHover=null},hover:function(e){this.focused=!0},startBlinking:function(){this.stopBlinking(),this.intervalId=window.setInterval(this.blink.bind(this),this.data.blinkingSpeed)},stopBlinking:function(){window.clearInterval(this.intervalId),this.intervalId=0},blink:function(){this.cursor.object3D.visible=!this.cursor.object3D.visible},setCustomFilter:function(e){this.userFilterFunc=e},addCustomModel:function(e,t){e&&(i[e]=t)},updateCursorPosition:function(){var e=this.textInput.components.text.currentFont;if(!e){var t=this;return this.cursor.object3D.visible=!1,void window.setTimeout((function(){t.updateCursorPosition(),t.startBlinking()}),700)}var n=this.data.width,r=i[this.data.model],s=-this.inputRect.h/2*n/2.4+r.inputOffsetY*n,l=this.data.width/this.textInput.components.text.data.wrapCount,c=0,d=o[this.textInput.components.text.data.font];void 0===d&&(d=20);for(var u=0;u<Math.min(11,this.data.value.length);u++){var h=a(e.chars,this.data.value.charCodeAt(u));c+=h.width+h.xadvance*(32===h.id?2:1)}"center"===this.data.align?c=c*l*d*.0011/2+.02*n:"left"===this.data.align?(c=c*l*d*.0011+.02*n,c-=n/2):"right"===this.data.align&&(c=-c*l*d*.0011-.02*n,c+=n/2),this.cursor.object3D.position.set(.92*c,s+.05,.001),this.cursorUpdated=!0},updateTextInput:function(e){this.textInput.setAttribute("text","value",function(e,t){if(!e)return"";if(e.length>=t)return"..."+e.substring(e.length-t,e.length);return e}(e||this.data.value,12))}}),window.AFRAME){const t=["super-keyboard"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=new THREE.Color;if(AFRAME.registerComponent("supercurve-color",{init:function(){const e=this.el;e.sceneEl.addEventListener("curveevenstageeventcolor",e=>{e.detail&&"off"!==e.detail?this.setColor("color1",e.detail):this.setColor("color1","primary")}),e.sceneEl.addEventListener("curveoddstageeventcolor",e=>{e.detail&&"off"!==e.detail?this.setColor("color2",e.detail):this.setColor("color2","secondary")})},setColor:function(e,t){const n=this.el.components.material.material.uniforms[e].value,o=this.el.sceneEl.systems.materials.scheme[t];i.set(o),n.x=i.r,n.y=i.g,n.z=i.b}}),window.AFRAME){const t=["supercurve-color"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i);if(AFRAME.registerShader("supercurve",{schema:{cameraPercent:{type:"number",is:"uniform"},color1:{type:"color",is:"uniform",default:o.a.initial.primary},color2:{type:"color",is:"uniform",default:o.a.initial.secondary},fogColor:{type:"color",is:"uniform",default:o.a.initial.primary},side:{default:"double"},transparent:{default:!0}},fragmentShader:n(154),vertexShader:n(155),update:function(e){this.updateVariables(e,"attribute"),this.updateVariables(e,"uniform"),this.el.sceneEl.systems.materials.registerCurve(this.material)}}),window.AFRAME){const t=[],n=["supercurve"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 vUvs;\nvarying vec3 vWorldPos;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 fogColor;\nuniform float opacity;\n\n#define BLACK vec3(0.0)\n#define YELLOW vec3(250.0 / 255.0, 244.0 / 255.0, 180.0 / 255.0)\n\nvoid main() {\n  vec3 col;\n\n  // Lines.\n  float f1 = clamp(sin(vUvs.x * 12.9 + 1.4) - 0.99, 0.0, 1.0) * 80.0;\n  float f2 = clamp(sin(3.1416 + vUvs.x * 12.9 + 1.45) - 0.99, 0.0, 1.0) * 80.0;\n\n  // Gradients.\n  f1 += sin(vWorldPos.y - vWorldPos.x - vWorldPos.z * 0.4 + 1.4) * 0.1 + 0.1;\n  f2 += sin(vWorldPos.y - vWorldPos.x - vWorldPos.z * 0.3 + 5.5) * 0.1 + 0.1;\n  float f3 = sin(vWorldPos.y - vWorldPos.x - vWorldPos.z * 0.1 + 10.3) * 0.1 + 0.1;\n\n  // Build color.\n  col = mix(BLACK, color1, f1);\n  col = mix(col, color2, f2);\n  col = mix(col, YELLOW, f3);\n\n  // Fog.\n  float far = 100.0;\n  float fog = 1.0 - clamp(length(vWorldPos - cameraPosition) / 400.0, 0.0, 1.0);\n\n  col = mix(fogColor, col, fog);\n\n  // fade beginning and end\n  float alpha = 0.0;\n  alpha += smoothstep(0.0, 0.003, vUvs.y);\n  alpha -= smoothstep(0.997, 1.0, vUvs.y);\n\n  gl_FragColor = vec4(col, alpha * (fog * fog));\n}\n"},function(e,t){e.exports="varying vec2 vUvs;\nvarying vec3 vWorldPos;\n\nvoid main() {\n  vWorldPos = (modelMatrix * vec4(position, 1.0)).xyz;\n  vUvs = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t,n){n(157),n(158);const i=new THREE.Vector3,o=new THREE.Vector3;if(AFRAME.registerComponent("supercurve",{schema:{debug:{default:!1}},init:function(){this.buffers={},this.curve=null,this.fullLength=null,this.indexes={},this.length=null,this.points=[]},play:function(){this.generateCurve(1500)},generateCurve:function(e){this.length=e,e+=200,this.fullLength=e,this.points.length=0,this.points.push(new THREE.Vector3(0,0,0)),this.points.push(new THREE.Vector3(0,0,-100));let t,n=100;for(let i=2;i<=Math.ceil(e/100)-1;i++)t=this.points[i-1],n+=100,this.points.push(new THREE.Vector3(t.x+(10*Math.random()*2-10),t.y+(10*Math.random()*2-10),-1*n));const i=new THREE.CatmullRomCurve3(this.points),o=e-i.getLength(),a=i.getTangent(1,new THREE.Vector3),r=this.points[this.points.length-1].clone().add(a.multiplyScalar(o));this.points.push(r),this.setCurve(this.points),this.el.emit("supercurvegenerate")},setCurve:function(e){const t=this.buffers,n=(this.data,this.el),a=this.indexes;this.points=e;const r=this.curve=new THREE.CatmullRomCurve3(e),s=r.getLength(),l=r.getSpacedPoints(350),c=s/350,d=new THREE.BufferGeometry;t.position=new Float32Array(2106),t.normal=new Float32Array(2106),t.uvs=new Float32Array(1404),a.position=0,a.normal=0,a.uvs=0;const u=new THREE.Vector3(-1.5,0,-1*c/2),h=new THREE.Vector3(1.5,0,-1*c/2);for(let e=0;e<l.length;e++){const r=e/(l.length-1),s=l[e];if(0===l[e].x&&0===l[e].y&&0===l[e].z?(l[e].set(.001,0,.001),o.y=-1*Math.abs(o.y)):(o.copy(i).cross(l[e]).normalize(),o.y=-1*o.y),this.getPositionRelativeToTangent(r,u,i),t.position[a.position++]=i.x,t.position[a.position++]=i.y,t.position[a.position++]=i.z,t.normal[a.normal++]=o.x,t.normal[a.normal++]=o.y,t.normal[a.normal++]=o.z,t.uvs[a.uvs++]=0,t.uvs[a.uvs++]=r,this.getPositionRelativeToTangent(r,h,i),t.position[a.position++]=i.x,t.position[a.position++]=i.y,t.position[a.position++]=i.z,t.normal[a.normal++]=o.x,t.normal[a.normal++]=o.y,t.normal[a.normal++]=o.z,t.uvs[a.uvs++]=1,t.uvs[a.uvs++]=r,this.data.debug){const e=document.createElement("a-box");e.setAttribute("geometry",{width:.1,height:.1,depth:.1}),e.setAttribute("material",{shader:"flat",color:"#333"}),e.object3D.position.copy(s),e.object3D.position.y+=.1,n.appendChild(e)}}if(d.setAttribute("normal",new THREE.BufferAttribute(t.normal,3)),d.setAttribute("position",new THREE.BufferAttribute(t.position,3)),d.setAttribute("uv",new THREE.BufferAttribute(t.uvs,2)),n.getObject3D("mesh"))n.getObject3D("mesh").geometry=THREE.BufferGeometryUtils.toTrianglesDrawMode(d,THREE.TriangleStripDrawMode);else{const e=new THREE.Mesh(THREE.BufferGeometryUtils.toTrianglesDrawMode(d,THREE.TriangleStripDrawMode));n.setObject3D("mesh",e)}},getPointAt:function(e,t){e=this.songProgressToCurveProgress(e),this.curve.getPointAt(e,t)},getTangentAt:function(e,t){e=this.songProgressToCurveProgress(e),this.curve.getTangentAt(e,t)},getPositionRelativeToTangent:function(){const e=new THREE.Object3D,t=new THREE.Vector3,n=new THREE.Vector3;return function(i,o,a,r){this.curve;return e.parent||this.el.sceneEl.object3D.add(e),this.getPointAt(i,e.position),this.getTangentAt(i,n),r?e.lookAt(t.copy(e.position).sub(n)):e.lookAt(t.copy(e.position).add(n)),e.updateMatrixWorld(),a.copy(o),e.localToWorld(a),a}}(),alignToCurve:function(){new THREE.Vector3,new THREE.Vector3;const e=new THREE.Vector3(0,0,-.01),t=new THREE.Vector3;return function(n,i){this.getPositionRelativeToTangent(n,e,t),i.lookAt(t),i.position.y+=.01}}(),songProgressToCurveProgress:function(e){return e*this.length/this.fullLength},curveProgressToSongProgress:function(e){return e*this.fullLength/this.length}}),AFRAME.registerComponent("supercurve-follow",{schema:{enabled:{default:!1},speed:{type:"number"},target:{type:"selector"}},init:function(){this.curveProgress=0,this.songProgress=0},update:function(){this.supercurve=this.data.target.components.supercurve},tick:function(){new THREE.Vector3(0,0,1),new THREE.Vector3;return function(e,t){const n=this.data;this.el;if(!n.enabled||!t)return;if(this.curveProgress>=1)return;const i=this.supercurve,o=i.curve;if(!o)return;this.curveProgress=this.curveProgress||0;const a=n.speed*(t/1e3);if(this.curveProgress+=a/this.supercurve.fullLength,this.data.target.components.material.material.uniforms.cameraPercent.value=this.curveProgress,this.curveProgress>=1)return this.curveProgress=1,void(this.data.target.components.material.material.uniforms.cameraPercent.value=this.curveProgress);o.getPointAt(this.curveProgress,this.el.object3D.position),this.songProgress=i.curveProgressToSongProgress(this.curveProgress),i.alignToCurve(this.songProgress,this.el.object3D)}}()}),window.AFRAME){const t=["supercurve","supercurve-follow"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){const n=THREE.Math,i=THREE.Vector3,o=THREE.Matrix4;function a(){this.type="Curve",this.arcLengthDivisions=200}var r,s,l;Object.assign(a.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e,t){var n;void 0===e&&(e=5),t?(n=t).length=0:n=[];for(var i=0;i<=e;i++)n.push(this.getPoint(i/e));return n},getSpacedPoints:function(e,t){var n;void 0===e&&(e=5),t?(n=t).length=0:n=[];for(var i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n},getLength:(l=[],function(){var e=this.getLengths(void 0,l);return e[e.length-1]}),getLengths:function(e,t){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1,t&&(t.length=0);var n,i,o=t||[],a=this.getPoint(0),r=0;for(o.push(0),i=1;i<=e;i++)r+=(n=this.getPoint(i/e)).distanceTo(a),o.push(r),a=n;return this.cacheArcLengths=o,o},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),o=0,a=i.length;n=t||e*i[a-1];for(var r,s=0,l=a-1;s<=l;)if((r=i[o=Math.floor(s+(l-s)/2)]-n)<0)s=o+1;else{if(!(r>0)){l=o;break}l=o-1}if(i[o=l]===n)return o/(a-1);var c=i[o];return(o+(n-c)/(i[o+1]-c))/(a-1)},getTangent:(r=new THREE.Vector3,s=new THREE.Vector3,function(e,t){var n,i=e-1e-4,o=e+1e-4;return i<0&&(i=0),o>1&&(o=1),this.getPoint(i,r),this.getPoint(o,s),t?(n=t).copy(s).sub(r):n=s.clone().sub(r),n.normalize()}),getTangentAt:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){var a,r,s,l=new i,c=[],d=[],u=[],h=new i,m=new o;for(a=0;a<=e;a++)r=a/e,c[a]=this.getTangentAt(r),c[a].normalize();d[0]=new i,u[0]=new i;var p=Number.MAX_VALUE,A=Math.abs(c[0].x),f=Math.abs(c[0].y),g=Math.abs(c[0].z);for(A<=p&&(p=A,l.set(1,0,0)),f<=p&&(p=f,l.set(0,1,0)),g<=p&&l.set(0,0,1),h.crossVectors(c[0],l).normalize(),d[0].crossVectors(c[0],h),u[0].crossVectors(c[0],d[0]),a=1;a<=e;a++)d[a]=d[a-1].clone(),u[a]=u[a-1].clone(),h.crossVectors(c[a-1],c[a]),h.length()>Number.EPSILON&&(h.normalize(),s=Math.acos(n.clamp(c[a-1].dot(c[a]),-1,1)),d[a].applyMatrix4(m.makeRotationAxis(h,s))),u[a].crossVectors(c[a],d[a]);if(!0===t)for(s=Math.acos(n.clamp(d[0].dot(d[e]),-1,1)),s/=e,c[0].dot(h.crossVectors(d[0],d[e]))>0&&(s=-s),a=1;a<=e;a++)d[a].applyMatrix4(m.makeRotationAxis(c[a],s*a)),u[a].crossVectors(c[a],d[a]);return{tangents:c,normals:d,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),THREE.Curve=a},function(e,t){const n=THREE.Vector3,i=THREE.Curve;function o(){var e=0,t=0,n=0,i=0;function o(o,a,r,s){e=o,t=r,n=-3*o+3*a-2*r-s,i=2*o-2*a+r+s}return{initCatmullRom:function(e,t,n,i,a){o(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,r,s){var l=(t-e)/a-(n-e)/(a+r)+(n-t)/r,c=(n-t)/r-(i-t)/(r+s)+(i-n)/s;o(t,n,l*=r,c*=r)},calc:function(o){var a=o*o;return e+t*o+n*a+i*(a*o)}}}var a=new n,r=new o,s=new o,l=new o;function c(e,t,n,o){i.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=o||.5}c.prototype=Object.create(i.prototype),c.prototype.constructor=c,c.prototype.isCatmullRomCurve3=!0,c.prototype.getPoint=function(e,t){var i,o,c,d,u=t||new n,h=this.points,m=h.length,p=(m-(this.closed?0:1))*e,A=Math.floor(p),f=p-A;if(this.closed?A+=A>0?0:(Math.floor(Math.abs(A)/m)+1)*m:0===f&&A===m-1&&(A=m-2,f=1),this.closed||A>0?i=h[(A-1)%m]:(a.subVectors(h[0],h[1]).add(h[0]),i=a),o=h[A%m],c=h[(A+1)%m],this.closed||A+2<m?d=h[(A+2)%m]:(a.subVectors(h[m-1],h[m-2]).add(h[m-1]),d=a),"centripetal"===this.curveType||"chordal"===this.curveType){var g="chordal"===this.curveType?.5:.25,b=Math.pow(i.distanceToSquared(o),g),y=Math.pow(o.distanceToSquared(c),g),v=Math.pow(c.distanceToSquared(d),g);y<1e-4&&(y=1),b<1e-4&&(b=y),v<1e-4&&(v=y),r.initNonuniformCatmullRom(i.x,o.x,c.x,d.x,b,y,v),s.initNonuniformCatmullRom(i.y,o.y,c.y,d.y,b,y,v),l.initNonuniformCatmullRom(i.z,o.z,c.z,d.z,b,y,v)}else"catmullrom"===this.curveType&&(r.initCatmullRom(i.x,o.x,c.x,d.x,this.tension),s.initCatmullRom(i.y,o.y,c.y,d.y,this.tension),l.initCatmullRom(i.z,o.z,c.z,d.z,this.tension));return u.set(r.calc(f),s.calc(f),l.calc(f)),u},c.prototype.copy=function(e){i.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},c.prototype.toJSON=function(){var e=i.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},c.prototype.fromJSON=function(e){i.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,o=e.points.length;t<o;t++){var a=e.points[t];this.points.push((new n).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},THREE.CatmullRomCurve3=c},function(e,t,n){if(AFRAME.registerShader("superCutFxShader",{schema:{startTime:{type:"float",is:"uniform"},timeMs:{type:"time",is:"uniform"},color:{type:"color",is:"uniform"}},vertexShader:"\n    varying vec2 uvs\n    varying vec3 worldPos\n    void main() {\n      uvs.xy = uv.xy\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 )\n    }\n  ",fragmentShader:"\n    uniform float startTime\n    uniform float timeMs\n    uniform vec3 color\n    varying vec2 uvs\n    varying vec3 worldPos\n\n    void main() {\n      float time = (timeMs - startTime) / 2000.0\n      vec2 p = uvs.xy - 0.5\n      float r = p.x * p.x + p.y * p.y\n      float alpha = 1.0 - smoothstep(time - 0.01, time, r)\n      alpha *= smoothstep(time - 0.1, time, r)\n      alpha *= 1.0 - time * 5.5\n      gl_FragColor = vec4(color, alpha)\n    }\n  "}),window.AFRAME){const t=[],n=["superCutFxShader"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=new THREE.Color;if(AFRAME.registerComponent("supercutfx",{schema:{colorPrimary:{type:"string"},colorSecondary:{type:"string"}},init:function(){this.rigEl=document.getElementById("curveFollowRig"),this.startTime=-1100},createSuperCut:function(e,t){const n=this.el,o=this.el.getObject3D("mesh");o.material.transparent=!0,this.rigEl.object3D.worldToLocal(n.object3D.position.copy(e.position)),n.object3D.position.z-=.25,n.object3D.visible=!0,this.startTime=n.sceneEl.time,i.set("red"===t?this.data.colorPrimary:this.data.colorSecondary);const a=o.material.uniforms.color.value;a.x=i.r,a.y=i.g,a.z=i.b,o.material.uniforms.startTime.value=this.startTime-50,n.play()},tick:function(e){e>this.startTime+1e3&&(this.el.object3D.visible=!1,this.el.pause())}}),window.AFRAME){const t=["supercutfx"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("tail",{schema:{height:{default:.1},segments:{default:10,type:"int"},target:{type:"selector"},width:{default:1}},init:function(){const e=this.data,t=this.geometry=new THREE.PlaneBufferGeometry(e.width,e.height,e.segments,1);t.deleteAttribute("normal"),t.translate(e.width/2,0,0);const n=this.el.sceneEl.systems.materials.handStarTrail,i=new THREE.Mesh(t,n);i.frustumCulled=!1,this.el.setObject3D("mesh",i),this.positions=t.attributes.position.array,this.numVerts=2*e.segments+2,this.geometry=t,this.target=e.target.object3D,this.targetPos=new THREE.Vector3},tick:function(e,t){const n=this.positions,i=this.targetPos;let o,a=this.numVerts/2*3,r=this.data.height/2;for(let e=this.numVerts/2-1;e>0;e--)o=3*e,n[o]=n[o-3],n[o+1]=n[o-2],n[o+2]=n[o-1],o+=a,n[o]=n[o-3],n[o+1]=n[o-2],n[o+2]=n[o-1];this.target.getWorldPosition(i),n[0]=i.x,n[1]=i.y+r,n[2]=i.z-.1,n[a+0]=i.x,n[a+1]=i.y-r,n[a+2]=i.z-.1,this.geometry.attributes.position.needsUpdate=!0}}),window.AFRAME){const t=["tail"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("text-counter",{dependencies:["text"],schema:{decimals:{default:0},dur:{default:2e3,type:"int"},enabled:{default:!1},emit:{default:!1},prefix:{default:""},suffix:{default:""},value:{default:0,type:"float"}},init:function(){this.currentValue=0,this.hasCompleted=!1,this.textValue={value:""}},update:function(e){this.currentValue=0,this.textValue.value=`${this.data.prefix}${this.decimals(0)}${this.data.suffix}`,this.el.setAttribute("text",this.textValue),this.hasCompleted=!1},tick:function(e,t){this.data.enabled&&!this.hasCompleted&&(this.currentValue+=this.data.value*(t/this.data.dur),this.currentValue>=this.data.value&&(this.currentValue=this.data.value,this.data.emit&&this.el.emit("textcounterdone",null,!1),this.hasCompleted=!0),this.textValue.value=`${this.data.prefix}${this.decimals(this.currentValue)}${this.data.suffix}`,this.el.setAttribute("text",this.textValue))},decimals:function(e){var t=Math.pow(10,this.data.decimals);return(parseInt(e*t)/t).toFixed(this.data.decimals)}}),window.AFRAME){const t=["text-counter"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var i=(0,AFRAME.utils.debug)("aframe-text-component:error"),o=new THREE.FontLoader;if(AFRAME.registerComponent("text-geometry",{schema:{bevelEnabled:{default:!1},bevelSize:{default:8,min:0},bevelThickness:{default:12,min:0},curveSegments:{default:12,min:0},font:{type:"asset",default:"https://rawgit.com/ngokevin/kframe/master/components/text-geometry/lib/helvetiker_regular.typeface.json"},height:{default:.05,min:0},size:{default:.5,min:0},style:{default:"normal",oneOf:["normal","italics"]},weight:{default:"normal",oneOf:["normal","bold"]},value:{default:""}},update:function(e){const t=this.data,n=this.el;if(!t.value)return;let a=n.getObject3D("mesh");a||(a=new THREE.Mesh,n.setObject3D("mesh",a)),t.font.constructor===String?o.load(t.font,(function(e){const n=AFRAME.utils.clone(t);n.font=e,a.geometry=new THREE.TextGeometry(t.value,n),a.geometry.translate(-.18,0,-.07)})):t.font.constructor===Object?(a.geometry=new THREE.TextGeometry(t.value,t),a.geometry.translate(-.18,0,-.07)):i("Must provide `font` (typeface.json) or `fontPath` (string) to text component.")}}),window.AFRAME){const t=["text-geometry"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("text-truncate",{schema:{value:{type:"string"},length:{type:"int",default:10}},update:function(){this.el.setAttribute("text","value",function(e,t){if(!e)return"";if(e.length>=t)return e.substring(0,t-3)+"...";return e}(this.data.value,this.data.length))}}),window.AFRAME){const t=["text-truncate"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("text-uppercase",{schema:{value:{type:"string"}},update:function(){this.el.setAttribute("text","value",this.data.value.toUpperCase())}}),window.AFRAME){const t=["text-uppercase"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("toggle-pause-play",{schema:{isPlaying:{default:!1}},update:function(){const e=this.data.isPlaying?"pause":"play";parent.postMessage(JSON.stringify({verify:"game-action",action:e}),"*")}}),window.AFRAME){const t=["toggle-pause-play"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i);if(AFRAME.registerComponent("trail",{schema:{color:{default:"primary"},colorScheme:{default:"default"},enabled:{default:!1},hand:{type:"string"}},init:function(){const e=this.geometry=new THREE.BufferGeometry,t=this.maxPoints=12,n=this.vertices=new Float32Array(36*t),i=this.colors=new Float32Array(48*t);this.bladeColor={alpha:1},this.rigContainer=document.getElementById("rigContainer"),this.bladeEl=this.el.querySelector(".blade"),this.layers=0,this.bladeTrajectory=[{top:new THREE.Vector3(-.5,0,0),center:new THREE.Vector3(0,0,0),bottom:new THREE.Vector3(.5,0,0)},{top:new THREE.Vector3(-.5,.5,0),center:new THREE.Vector3(0,.5,0),bottom:new THREE.Vector3(.5,.5,0)},{top:new THREE.Vector3(-.5,1,0),center:new THREE.Vector3(0,1,0),bottom:new THREE.Vector3(.5,1,0)}],this.newSample=null,e.setAttribute("position",new THREE.BufferAttribute(n,3).setUsage(THREE.DynamicDrawUsage)),e.setAttribute("vertexColor",new THREE.BufferAttribute(i,4).setUsage(THREE.DynamicDrawUsage));const o=new THREE.ShaderMaterial({side:THREE.DoubleSide,vertexColors:THREE.VertexColors,transparent:!0,depthTest:!1,blending:THREE.AdditiveBlending,vertexShader:["varying vec4 vColor;","attribute vec4 vertexColor;","void main() {","vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);","vColor = vertexColor;","gl_Position = projectionMatrix * modelViewPosition;","}"].join(""),fragmentShader:["varying vec4 vColor;","uniform float pulse;","void main() {","gl_FragColor = vec4(vColor.xyz, vColor.a + pulse);","}"].join(""),uniforms:{pulse:{value:0}}}),a=this.mesh=new THREE.Mesh(e,o);a.frustumCulled=!1,a.vertices=n,this.rigContainer.setObject3D("trail__"+this.data.hand,a)},update:function(e){if(this.mesh.visible=this.data.enabled,!e.enabled&&this.data.enabled&&(this.enabledTime=this.el.sceneEl.time),e.colorScheme!==this.data.colorScheme){this.bladeColor=new THREE.Color(o.a.schemes[this.data.colorScheme][this.data.color]);this.bladeColor.red=this.bladeColor.r,this.bladeColor.green=this.bladeColor.g,this.bladeColor.blue=this.bladeColor.b}},tock:function(e,t){this.data.enabled&&(!this.mesh.visible&&e>this.enabledTime+250&&(this.mesh.visible=!0),this.mesh.material.uniforms.pulse.value*=.9,this.sampleBladePosition())},pulse:function(){this.mesh.material.uniforms.pulse.value=1},addLayer:function(e){const t=this.bladeColor,n=this.colors,i=this.segments,o=this.vertices;let a=2/i;this.layers>=this.maxLayers&&(this.layers=0);const r=this.layers*e;e=r+e;const s=this.layers*i*18,l=this.layers*i*24;for(let c=0;c<i;++c)o[s+18*c]=c*a-1,o[s+18*c+1]=r,o[s+18*c+2]=0,n[l+24*c]=t.red,n[l+24*c+1]=t.green,n[l+24*c+2]=t.blue,n[l+24*c+3]=t.alpha,o[s+18*c+3]=c*a-1,o[s+18*c+4]=e,o[s+18*c+5]=0,n[l+24*c+4]=t.red,n[l+24*c+5]=t.green,n[l+24*c+6]=t.blue,n[l+24*c+7]=t.alpha,o[s+18*c+6]=c*a-1+a,o[s+18*c+7]=e,o[s+18*c+8]=0,n[l+24*c+8]=t.red,n[l+24*c+9]=t.green,n[l+24*c+10]=t.blue,n[l+24*c+11]=t.alpha,o[s+18*c+9]=c*a-1+a,o[s+18*c+10]=r,o[s+18*c+11]=0,n[l+24*c+12]=t.red,n[l+24*c+13]=t.green,n[l+24*c+14]=t.blue,n[l+24*c+15]=t.alpha,o[s+18*c+12]=c*a-1,o[s+18*c+13]=r,o[s+18*c+14]=0,n[l+24*c+16]=t.red,n[l+24*c+17]=t.green,n[l+24*c+18]=t.blue,n[l+24*c+19]=t.alpha,o[s+18*c+15]=c*a-1+a,o[s+18*c+16]=e,o[s+18*c+17]=0,n[l+24*c+20]=t.red,n[l+24*c+21]=t.green,n[l+24*c+22]=t.blue,n[l+24*c+23]=t.alpha;this.layers++,this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.vertexColor.needsUpdate=!0,this.geometry.attributes.uv.needsUpdate=!0},initGeometry:function(){const e=this.bladeColor,t=this.geometry.attributes.vertexColor.array,n=this.geometry.attributes.position.array,i=this.bladeTrajectory;let o,a,r;for(let s=1;s<i.length;s++){1===s&&(a=o),o=1-(i.length-s)/i.length;const l=i[s];r=i[s-1],n[36*s]=r.center.x,n[36*s+1]=r.center.y,n[36*s+2]=r.center.z,t[48*s]=e.red,t[48*s+1]=e.green,t[48*s+2]=e.blue,t[48*s+3]=.2*a,n[36*s+3]=l.top.x,n[36*s+4]=l.top.y,n[36*s+5]=l.top.z,t[48*s+4]=e.red,t[48*s+5]=e.green,t[48*s+6]=e.blue,t[48*s+7]=o,n[36*s+6]=r.top.x,n[36*s+7]=r.top.y,n[36*s+8]=r.top.z,t[48*s+8]=e.red,t[48*s+9]=e.green,t[48*s+10]=e.blue,t[48*s+11]=a,n[36*s+9]=r.center.x,n[36*s+10]=r.center.y,n[36*s+11]=r.center.z,t[48*s+12]=e.red,t[48*s+13]=e.green,t[48*s+14]=e.blue,t[48*s+15]=.2*a,n[36*s+12]=l.center.x,n[36*s+13]=l.center.y,n[36*s+14]=l.center.z,t[48*s+16]=e.red,t[48*s+17]=e.green,t[48*s+18]=e.blue,t[48*s+19]=.2*o,n[36*s+15]=l.top.x,n[36*s+16]=l.top.y,n[36*s+17]=l.top.z,t[48*s+20]=e.red,t[48*s+21]=e.green,t[48*s+22]=e.blue,t[48*s+23]=o,n[36*s+18]=r.bottom.x,n[36*s+19]=r.bottom.y,n[36*s+20]=r.bottom.z,t[48*s+24]=e.red,t[48*s+25]=e.green,t[48*s+26]=e.blue,t[48*s+27]=0,n[36*s+21]=l.center.x,n[36*s+22]=l.center.y,n[36*s+23]=l.center.z,t[48*s+28]=e.red,t[48*s+29]=e.green,t[48*s+30]=e.blue,t[48*s+31]=.2*o,n[36*s+24]=r.center.x,n[36*s+25]=r.center.y,n[36*s+26]=r.center.z,t[48*s+32]=e.red,t[48*s+33]=e.green,t[48*s+34]=e.blue,t[48*s+35]=.2*a,n[36*s+27]=r.bottom.x,n[36*s+28]=r.bottom.y,n[36*s+29]=r.bottom.z,t[48*s+36]=e.red,t[48*s+37]=e.green,t[48*s+38]=e.blue,t[48*s+39]=0,n[36*s+30]=l.bottom.x,n[36*s+31]=l.bottom.y,n[36*s+32]=l.bottom.z,t[48*s+40]=e.red,t[48*s+41]=e.green,t[48*s+42]=e.blue,t[48*s+43]=0,n[36*s+33]=l.center.x,n[36*s+34]=l.center.y,n[36*s+35]=l.center.z,t[48*s+44]=e.red,t[48*s+45]=e.green,t[48*s+46]=e.blue,t[48*s+47]=.2*o,a=o}this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.vertexColor.needsUpdate=!0},sampleBladePosition:function(){let e;this.bladeTrajectory.length===this.maxPoints?(e=this.newSample=this.bladeTrajectory.shift(),e.top.set(0,-.5,0),e.center.set(0,0,0),e.bottom.set(0,.5,0)):this.newSample?(this.newSample.top.set(0,-.5,0),this.newSample.center.set(0,0,0),this.newSample.bottom.set(0,.5,0),e=this.newSample):e={top:new THREE.Vector3(0,-.5,0),center:new THREE.Vector3(0,0,0),bottom:new THREE.Vector3(0,.5,0)};const t=this.bladeEl.object3D;t.localToWorld(e.top),t.localToWorld(e.center),t.localToWorld(e.bottom),this.rigContainer.object3D.worldToLocal(e.top),this.rigContainer.object3D.worldToLocal(e.center),this.rigContainer.object3D.worldToLocal(e.bottom),this.bladeTrajectory.push(e),this.initGeometry()}}),window.AFRAME){const t=["trail"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("tunnels",{dependencies:["pool_tunnels"],schema:{isPlaying:{default:!1},songDuration:{default:0}},init:function(){this.addTunnel=this.addTunnel.bind(this),this.clearTunnels=this.clearTunnels.bind(this),this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.timeout=0,this.tunnels=[],this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),1e3),this.el.addEventListener("cleargame",this.clearTunnels),this.el.addEventListener("gamemenuexit",this.clearTunnels),this.el.addEventListener("gamemenurestart",this.clearTunnels)},update:function(e){!e.isPlaying&&this.data.isPlaying&&this.requestTunnel(),e.isPlaying&&!this.data.isPlaying&&this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},play:function(){this.pool=this.el.components.pool__tunnels},requestTunnel:function(){this.timeout=setTimeout(this.addTunnel,Math.floor(3e3+1e4*Math.random()))},addTunnel:function(){const e=this.pool.requestEntity();if(!e)return;e.setAttribute("render-order","tunnel"),e.object3D.visible=!0;const t=this.curveEl.components.supercurve;let n=(this.el.components.song.getCurrentTime()+20)/this.data.songDuration;n>1&&(n=1),t.getPointAt(n,e.object3D.position),t.alignToCurve(n,e.object3D),e.play(),this.tunnels.push(e),this.requestTunnel()},clearTunnels:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);for(let e=0;e<this.tunnels.length;e++)this.tunnels[e].object3D.visible=!1,this.pool.returnEntity(this.tunnels[e]);this.tunnels.length=0},tick:function(e,t){if(0!=this.tunnels.length)for(let e=0;e<this.tunnels.length;e++){if(!(this.tunnels[e].object3D.position.z>this.curveFollowRig.object3D.position.z+5))return;{const t=this.tunnels.splice(e,1)[0];t.object3D.visible=!1,this.pool.returnEntity(t)}}}}),window.AFRAME){const t=["tunnels"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var i=new THREE.Color;if(AFRAME.registerComponent("vertex-colors-buffer",{schema:{baseColor:{type:"color"},itemSize:{default:3}},update:function(e){var t,n,o,a,r=this.data,s=this.el,l=this;if((a=this.el.getObject3D("mesh"))&&a.geometry)if((o=a.geometry).attributes.position){for(o.attributes.color||o.setAttribute("color",new THREE.BufferAttribute(new Float32Array(o.attributes.position.array.length),3)),t=o.attributes.color.array,i.set(r.baseColor),n=0;n<t.length;n+=r.itemSize)t[n]=i.r,t[n+1]=i.g,t[n+2]=i.b;o.attributes.color.needsUpdate=!0}else console.warn("Geometry has no vertices",s);else s.addEventListener("object3dset",(function t(n){"mesh"===n.detail.type&&(s.removeEventListener("object3dset",t),l.update(e))}))}}),window.AFRAME){const t=["vertex-colors-buffer"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("victory-accuracy-ring",{dependencies:["geometry","material"],schema:{accuracy:{default:0}},update:function(){this.el.getObject3D("mesh").material.uniforms.progress.value=0,this.el.setAttribute("animation","to",this.data.accuracy/100),this.el.components.animation.beginAnimation()}}),window.AFRAME){const t=["victory-accuracy-ring"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i={sphericalEnvMap:"",roughness:.8,metalness:.4},o={sphericalEnvMap:"#envmapImg",roughness:.2,metalness:.6};if(AFRAME.registerComponent("victory-rank",{schema:{isVictory:{default:!1},rank:{type:"string"}},update:function(e){const t=this.el,n=this.data.rank;if(e.isVictory&&!this.data.isVictory&&this.el.object3D.scale.set(.001,.001,.001),n)switch(t.setAttribute("text-geometry","value",n),n[0]){case"S":t.setAttribute("material",Object.assign({color:"#F0e077"},o));break;case"A":t.setAttribute("material",Object.assign({color:"#6FF9EA"},o));break;case"B":t.setAttribute("material",Object.assign({color:"#F8d"},o));break;case"C":t.setAttribute("material",Object.assign({color:"#F971C3"},i));break;case"D":t.setAttribute("material",Object.assign({color:"#1E6269"},i));break;case"F":t.setAttribute("material",Object.assign({color:"#e3170a"},i))}}}),window.AFRAME){const t=["victory-rank"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){if(AFRAME.registerComponent("visible-raycastable",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data,this.data?this.el.setAttribute("raycastable",""):this.el.removeAttribute("raycastable","")}}),window.AFRAME){const t=["visible-raycastable"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i=n(0);if(AFRAME.registerShader("wallShader",{schema:{colorTertiary:{type:"color",is:"uniform",default:i.initial.tertiary},environment:{type:"map",is:"uniform",default:"#envmapImg"},hitLeft:{type:"vec3",is:"uniform",default:{x:0,y:9e3,z:0}},hitRight:{type:"vec3",is:"uniform",default:{x:0,y:9e3,z:0}},iTime:{type:"time",is:"uniform"},opacity:{type:"number",is:"uniform"}},vertexShader:n(174),fragmentShader:n(175)}),window.AFRAME){const t=[],n=["wallShader"],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t){e.exports="varying vec2 uvs;\nvarying vec3 nrml;\nvarying vec3 worldPos;\n\nvoid main() {\n  uvs.xy = uv.xy;\n  nrml.xyz = normal.xyz;\n  vec4 p = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  worldPos = (modelMatrix * vec4( position, 1.0 )).xyz;\n  gl_Position = p;\n}\n"},function(e,t){e.exports="uniform float iTime;\nuniform float opacity;\nuniform sampler2D environment;\nuniform vec3 colorTertiary;\nuniform vec3 hitLeft;\nuniform vec3 hitRight;\nvarying vec2 uvs;\nvarying vec3 nrml;\nvarying vec3 worldPos;\n\n#define SEED 19.1252\n#define time (3.0 + iTime) / 1000.0\n\nfloat noise(vec3 uv) {\n  return fract(sin(uv.x*123243. + uv.y*424. + uv.z*642. + SEED) * 1524.);\n}\n\nvec4 drawHit(vec3 p, vec3 center, vec3 color) {\n  center.z -= 0.1;\n  float dist = 1.0 - smoothstep(0.0, 0.3, length(p - center));\n  float glitch = noise(floor(p*3.0)) * 0.06 - 0.03;\n  float alpha = 1.0 - smoothstep(0.0, 0.01, abs(p.z-center.z + glitch));\n  alpha += 1.0 - smoothstep(0.0, 0.01, abs(p.y-center.y + glitch));\n  return vec4(color * dist, alpha * dist + alpha);\n}\n\nvoid main() {\n  vec2 uv1 = uvs.xy-0.5;\n  float alpha = 0.0;\n  // border\n  alpha += smoothstep(0.44, 0.50, abs(uv1.x));\n  alpha += smoothstep(0.44, 0.50, abs(uv1.y));\n  alpha += smoothstep(0.486, 0.49, abs(uv1.x));\n  alpha += smoothstep(0.486, 0.49, abs(uv1.y));\n  alpha = min(1.0, alpha * 0.5);\n\n  // weapon collision\n  vec4 hit;\n  hit = drawHit(worldPos, hitRight, colorTertiary);\n  hit += drawHit(worldPos, hitLeft, colorTertiary);\n\n  // reflection\n  vec3 ray = reflect(normalize(cameraPosition - worldPos + sin(worldPos.z) * 0.1 + cos(worldPos.z * 0.3) * 0.3), nrml);\n  float m = 2.0 * sqrt(pow(ray.x, 2.0) + pow(ray.y, 2.0) + pow(ray.z, 2.0));\n  vec2 uv = ray.xy / m + 0.5;\n  vec3 col = texture2D(environment, uv).rgb * 0.3;\n\n  gl_FragColor = vec4(mix(col, colorTertiary, alpha) + hit.rgb, (alpha * 0.2 + 0.8) * opacity + hit.a);\n}\n"},function(e,t,n){"use strict";n.r(t);n(19);if(AFRAME.registerComponent("wall",{dependencies:["material"],init:function(){this.curveEl=document.getElementById("curve"),this.curveFollowRig=document.getElementById("curveFollowRig"),this.el.setObject3D("mesh",new THREE.Mesh),this.geometry=null,this.isCeiling=!1,this.isRaycastable=!1,this.localPosition=new THREE.Vector3,this.songPosition=void 0,this.tick=AFRAME.utils.throttleTick(this.tick.bind(this),1e3)},play:function(){this.el.object3D.visible=!0},tick:function(e,t){const n=this.curveFollowRig.components["supercurve-follow"].songProgress;!this.isRaycastable&&n+.01>=this.songPosition&&(this.isRaycastable=!0,this.el.setAttribute("data-wall-active",""),this.isCeiling||(this.el.setAttribute("data-weapon-particles",""),this.el.setAttribute("raycastable-game",""))),n>=this.backPosition+.01&&this.returnToPool()},onGenerate:function(e,t,n,i,o,a){const r=this.el;this.isCeiling=o,this.backPosition=a,this.songPosition=e,this.setWallGeometry(e,t,n,i,o),r.getObject3D("mesh").material.uniforms.opacity.value=0,r.object3D.position.y=-5,r.components.animation__fadein.beginAnimation(),r.components.animation__scalein.beginAnimation()},setWallGeometry:function(){const e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(i,o,a,r,s){const l=this.el.sceneEl.components["beat-system"],c=this.curveEl.components.supercurve,d=i,u=i+r/c.length,h=s?1.5:2.5,m=-1*l.horizontalPositions[o]-a/2+.25;t.x=m-a/2,n.x=m+a/2;const p=(this.geometry=new THREE.BoxBufferGeometry(a,h,1,1,1,30)).attributes.position.array;for(let i=0;i<p.length;i+=3){const o=p[i+2]+.5;c.getPositionRelativeToTangent(d+o*(u-d),p[i]<0?t:n,e),p[i]=e.x,p[i+1]+=e.y+h/2,p[i+2]=e.z}let A=l.verticalPositions.middle+l.size/2;"punch"===l.data.gameMode&&(A-=.1),this.el.getObject3D("mesh").geometry=this.geometry,this.el.getObject3D("mesh").position.y=s?A:.1}}(),returnToPool:function(){this.el.object3D.visible=!1,this.el.removeAttribute("data-weapon-particles"),this.el.removeAttribute("data-wall-active"),this.el.removeAttribute("raycastable-game"),this.isCeiling=!1,this.isRaycastable=!1,this.el.isPlaying&&this.el.sceneEl.components.pool__wall.returnEntity(this.el),this.geometry&&this.geometry.dispose()}}),window.AFRAME){const t=["wall"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){const i={direction:{x:0,y:-.25,z:-1}},o={direction:{x:0,y:1,z:-1}};if(AFRAME.registerComponent("weapon-particles",{schema:{enabled:{default:!1},gameMode:{default:""},hand:{type:"string"}},init:function(){this.hiddenIntersection={x:999,y:0,z:0},this.intersectedEl=null,this.weaponEnter=this.weaponEnter.bind(this),this.weaponLeave=this.weaponLeave.bind(this)},update:function(e){e.gameMode!==this.data.gameMode&&this.el.setAttribute("raycaster__game","punch"===this.data.gameMode?i:o)},pause:function(){this.el.removeEventListener("mouseenter",this.weaponEnter),this.el.removeEventListener("mouseleave",this.weaponLeave)},play:function(){this.el.addEventListener("mouseenter",this.weaponEnter),this.el.addEventListener("mouseleave",this.weaponLeave)},weaponEnter:function(e){this.data.enabled&&e.target===this.el&&e.detail.intersectedEl.hasAttribute("data-weapon-particles")&&(this.intersectedEl=e.detail.intersectedEl)},weaponLeave:function(e){if(e.detail.target===this.el){if(this.intersectedEl.components.wall||"floor"===this.intersectedEl.id){const e=this.data.hand===RIGHT?"hitRight":"hitLeft";this.intersectedEl.getObject3D("mesh").material.uniforms[e].value=this.hiddenIntersection}this.intersectedEl=null}},tick:function(e,t){if(!this.data.enabled||!this.intersectedEl)return;const n=this.el.components.raycaster__game.getIntersection(this.intersectedEl);if(n&&(this.intersectedEl.components.wall||"floor"===this.intersectedEl.id)){const e="right"===this.data.hand?"hitRight":"hitLeft";this.intersectedEl.getObject3D("mesh").material.uniforms[e].value=n.point}}}),window.AFRAME){const t=["weapon-particles"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){AFRAME.registerComponent("zip-loader",{schema:{difficulties:{type:"array"},isLoading:{default:"false"},version:{type:"string"},directDownload:{type:"string"},bpm:{type:"number"}},init:function(){this.loadingIndicator=document.getElementById("zipLoaderIndicator"),this.cachedZip=null,this.cachedVersion=null,this.message={},this.worker=new Worker("build/zip.js"),this.worker.onmessage=this.onMessage.bind(this),this.worker.onerror=console.error},update:function(e){const t=this.data;e.version&&e.version!==t.version&&this.cachedVersion!==t.version&&(this.message.abort=!0,this.message.difficulties=JSON.stringify(this.data.difficulties),this.message.version=e.version,this.message.directDownload=this.data.directDownload,this.message.bpm=this.data.bpm,this.message.hash=this.data.hash,this.worker.postMessage(this.message)),t.version&&e.version!==t.version&&(this.cachedVersion=null,this.cachedZip=null,this.fetchZip(t.version)),e.isLoading||!this.data.isLoading||this.cachedVersion!==this.data.version||this.cachedZip||this.el.emit("songloaderror")},fetchZip:function(e){this.el.emit("ziploaderstart",null,!1),this.message.abort=!1,this.message.difficulties=JSON.stringify(this.data.difficulties),this.message.version=e,this.message.directDownload=this.data.directDownload,this.message.bpm=this.data.bpm,this.message.hash=this.data.hash,this.worker.postMessage(this.message)},onMessage:function(e){switch(e.data.message){case"error":this.el.emit("songloaderror");break;case"progress":if(e.data.version!==this.data.version)return;this.loadingIndicator.setAttribute("material","progress",e.data.progress);break;case"load":{let t;this.cachedVersion=e.data.version,this.cachedZip=e.data.data;const n=e.data.data.beats;for(t in n)break;if(!t)return this.cachedZip=null,void(e.data.version===this.data.version&&this.el.emit("songloaderror"));e.data.version===this.data.version&&this.el.emit("ziploaderend",e.data.data,!1);break}}}});if(window.AFRAME){const t=["zip-loader"],n=[],i=[];if(e.hot.dispose(e=>{e.needsReplace=!0,t.forEach(e=>{delete AFRAME.components[e];const t=AFRAME.scenes[0].querySelectorAll(`[${e}]`);for(let n=0;n<t.length;n++)t[n].isEntity&&(t[n].setAttribute("data-__hot-"+e,JSON.stringify(t[n].getDOMAttribute(e))),t[n].removeAttribute(e))}),n.forEach(e=>{delete AFRAME.shaders[e];const t=AFRAME.scenes[0].querySelectorAll("[material]");for(let n=0;n<t.length;n++)t[n].isEntity&&t[n].getAttribute("material").shader===e&&(t[n].setAttribute("data-__hot-material",JSON.stringify(t[n].getDOMAttribute("material"))),t[n].removeAttribute("material"))}),i.forEach(e=>{delete AFRAME.systems[e],delete AFRAME.scenes[0].systems[e]})}),e.hot.data&&e.hot.data.needsReplace){t.forEach(e=>{const t="data-__hot-"+e,n=document.querySelectorAll(`[${t}]`);for(let i=0;i<n.length;i++)n[i].setAttribute(e,JSON.parse(n[i].getAttribute(t)),!0),n[i].removeAttribute(t)});const e="data-__hot-material",n=document.querySelectorAll(`[${e}]`);for(let t=0;t<n.length;t++)n[t].setAttribute("material",JSON.parse(n[t].getAttribute(e)),!0),n[t].removeAttribute(e)}e.hot.accept()}},function(e,t,n){var i={"./index.js":180};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=179},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o);n(6);const r=n(23),s={};let l=!1;const c={Easy:"Easy",Expert:"Expert",ExpertPlus:"Expert+",Hard:"Hard",Normal:"Normal"},d={},u={author:"Juancho Pancho",difficulty:"Expert",id:"31",image:"assets/img/molerat.jpg",songDuration:100,songName:"Friday",songLength:100,songSubName:"Rebecca Black"},h="true"===AFRAME.utils.getUrlParameter("skipintro"),m=localStorage.getItem("colorScheme")||"default";let p=localStorage.getItem("favorites-v2");if(p)try{p=JSON.parse(p)}catch(e){p=[]}else p=[];function A(e){let t=Math.ceil(e.search.results.length/6);e.search.hasPrev=e.search.page>0,e.search.hasNext=e.search.page<t-1,e.search.songNameTexts="",e.search.songSubNameTexts="",e.searchResultsPage.length=0,e.searchResultsPage.__dirty=!0;for(let t=6*e.search.page;t<6*e.search.page+6;t++){const n=e.search.results[t];if(!n)break;e.searchResultsPage.push(n),e.search.songNameTexts+=f(n.metadata.songName,22).toUpperCase()+"\n",e.search.songSubNameTexts+=f(n.metadata.songSubName||n.metadata.songAuthorName||"Unknown Artist",32)+"\n"}for(let t=0;t<e.searchResultsPage.length;t++)e.searchResultsPage[t].index=t;x(e)}function f(e,t){return e?e.length>=t?e.substring(0,t-3)+"...":e:""}AFRAME.registerState({nonBindedStateKeys:["genres"],initialState:{activeHand:localStorage.getItem("hand")||"right",challenge:{audio:"",author:"",difficulty:"",beatmapCharacteristic:"",id:AFRAME.utils.getUrlParameter("challenge"),image:"",isBeatsPreloaded:!1,numBeats:void 0,songDuration:0,songName:"",songNameShort:"",songSubName:"",metadata:{}},colorPrimary:a.a.schemes[m].primary,colorScheme:m,colorSecondary:a.a.schemes[m].secondary,colorSecondaryBright:a.a.schemes[m].secondarybright,colorTertiary:a.a.schemes[m].tertiary,controllerType:"",damage:0,difficultyFilter:"All",difficultyFilterMenuOpen:!1,favorites:p,gameMode:"ride",genre:"",genres:n(181),genreMenuOpen:!1,has3DOFVR:!1,has6DOFVR:!1,hasSongLoadError:!1,hasVR:AFRAME.utils.device.checkHeadsetConnected()||"true"===AFRAME.utils.getUrlParameter("debugvr"),introActive:!h,inVR:"true"===AFRAME.utils.getUrlParameter("debugvr"),isIOS:AFRAME.utils.device.isIOS(),isGameOver:!1,isLoading:!1,isMenuOpening:!h,isPaused:!1,isPlaying:!1,isSearching:!1,isSongProcessing:!1,isVictory:!1,isZipFetching:!1,mainMenuActive:!1,menuActive:h,menuDifficulties:[],menuDifficultiesIds:[],menuSelectedChallenge:{author:"",difficulty:"",beatmapCharacteristic:"",downloads:"",downloadsText:"",genre:"",id:"",index:-1,image:"",isFavorited:!1,numBeats:void 0,songDuration:0,songInfoText:"",songLength:void 0,numBeats:void 0,songName:"",songSubName:"",version:"",metadata:{}},optionsMenuOpen:!1,playlist:"",playlists:n(182),playlistMenuOpen:!1,playlistTitle:"",score:{accuracy:100,accuracyScore:0,accuracyInt:100,activePanel:!1,beatsHit:0,beatsMissed:0,beatsText:"",combo:0,finalAccuracy:100,maxCombo:0,rank:"",score:0},search:{activePanel:!0,page:0,hasError:!1,hasNext:!1,hasPrev:!1,query:"",queryText:"",results:[],songNameTexts:"",songSubNameTexts:"",url:"",urlPage:0},searchResultsPage:[],speed:10},handlers:{activehandswap:e=>{e.activeHand="right"===e.activeHand?"left":"right",localStorage.setItem("activeHand",e.activeHand)},beathit:(e,t)=>{e.damage>.25&&(e.damage-=.25),e.score.beatsHit++,e.score.combo++,e.score.combo>e.score.maxCombo&&(e.score.maxCombo=e.score.combo),t.score=isNaN(t.score)?100:t.score,e.score.accuracyScore+=t.percent,e.score.score+=Math.floor(t.score),w(e)},beatmiss:e=>{e.score.beatsMissed++,v(e),w(e)},beatwrong:e=>{e.score.beatsMissed++,v(e),w(e)},beatloaderpreloadfinish:e=>{e.menuActive||(e.challenge.isBeatsPreloaded=!0)},colorschemechange:(e,t)=>{e.colorScheme=t,e.colorPrimary=a.a.schemes[t].primary,e.colorSecondary=a.a.schemes[t].secondary,e.colorSecondaryBright=a.a.schemes[t].secondarybright,e.colorTertiary=a.a.schemes[t].tertiary,localStorage.setItem("colorScheme",t)},controllerconnected:(e,t)=>{e.controllerType=t.name,e.has6DOFVR=-1!==["oculus-quest-controls","oculus-touch-controls","vive-controls","windows-motion-controls","generic-tracked-controller-controls"].indexOf(e.controllerType),e.has3DOFVR=-1!==["oculus-go-controls","daydream-controls"].indexOf(e.controllerType)},debugbeatpositioning:e=>{e.gameMode="classic",e.introActive=!1,e.menuActive=!1},debuggameplay:e=>{E(e),Object.assign(e.challenge,e.menuSelectedChallenge),e.menuActive=!1,e.menuSelectedChallenge.id="",e.isSearching=!1,e.isLoading=!1},debuggameover:e=>{e.isGameOver=!0,e.menuActive=!1},debugloading:e=>{u.id="-1",Object.assign(e.menuSelectedChallenge,u),Object.assign(e.challenge,u),e.menuActive=!1,e.isSongProcessing=!0},debugvictory:e=>{Object.assign(e.menuSelectedChallenge,u),Object.assign(e.challenge,u),e.isVictory=!0,e.menuActive=!1,e.score.accuracy=74.99,e.score.beatsHit=125,e.score.beatsMissed=125,e.score.maxCombo=123,e.score.rank="A",e.score.score=9001,e.introActive=!1,S(e)},difficultyfilter:(e,t)=>{e.difficultyFilter=t,e.difficultyFilterMenuOpen=!1,e.menuSelectedChallenge.id=""},difficultyfiltermenuclose:e=>{e.difficultyFilterMenuOpen=!1},difficultyfiltermenuopen:e=>{e.difficultyFilterMenuOpen=!0},displayconnected:e=>{if(e.hasVR=!0,!l)try{"getVRDisplays"in navigator&&navigator.getVRDisplays().then(e=>{e.length&&(l=!0)})}catch(e){}},favoritetoggle:e=>{const t=e.menuSelectedChallenge.id,n=s[t];if(n)if(e.menuSelectedChallenge.isFavorited){e.menuSelectedChallenge.isFavorited=!1;for(let n=0;n<e.favorites.length;n++)if(e.favorites[n].id===t)return e.favorites.splice(n,1),void localStorage.setItem("favorites-v2",JSON.stringify(e.favorites))}else{if(e.menuSelectedChallenge.isFavorited=!0,e.favorites.filter(e=>e.id===t).length)return;e.favorites.push(n),localStorage.setItem("favorites-v2",JSON.stringify(e.favorites))}},gamemenuresume:e=>{e.isPaused=!1},gamemenurestart:e=>{E(e),e.challenge.isBeatsPreloaded=!1,e.isGameOver=!1,e.isPaused=!1,e.isLoading=!0,e.isVictory=!1},gamemenuexit:e=>{E(e),e.challenge.isBeatsPreloaded=!1,e.isGameOver=!1,e.isPaused=!1,e.isVictory=!1,e.menuActive=!0,e.menuSelectedChallenge.id=e.challenge.id,e.menuSelectedChallenge.difficulty=e.challenge.difficulty,e.menuSelectedChallenge.beatmapCharacteristic=e.challenge.beatmapCharacteristic,e.menuSelectedChallenge.difficultyId=e.challenge.difficultyId,e.challenge.id=""},gamemode:(e,t)=>{e.gameMode=t},genreclear:e=>{e.genre="",e.menuSelectedChallenge.id=""},genreselect:(e,t)=>{e.genre=t,e.genreMenuOpen=!1,e.menuSelectedChallenge.id="",e.playlist="",e.search.query=""},genremenuclose:e=>{e.genreMenuOpen=!1},genremenuopen:e=>{e.genreMenuOpen=!0},keyboardclose:e=>{e.isSearching=!1},keyboardopen:e=>{e.isSearching=!0,e.menuSelectedChallenge.id=""},menuback:e=>{e.difficultyFilterMenuOpen=!1,e.genreMenuOpen=!1,e.isSearching=!1,e.optionsMenuOpen=!1,e.playlistMenuOpen=!1},menuchallengeselect:(e,t)=>{let n=s[t];if(!n)return;Object.assign(e.menuSelectedChallenge,n),e.menuSelectedChallenge.songName=f(n.metadata.songName,24),e.menuDifficulties.length=0,e.menuDifficultiesIds.length=0;const i=JSON.parse(n.metadata.characteristics);for(const t of Object.keys(i))if(!["90Degree","360Degree"].includes(t))for(const n of Object.keys(i[t])){if(null===i[t][n])continue;let o=c[n],a=o;"Standard"!==t&&(a=t+"\n"+a),e.menuDifficulties.unshift({id:t+"-"+n,filename:n+t,difficultyName:o,renderName:a,beatmapCharacteristic:t,difficulty:n})}e.menuDifficulties.sort(y);for(const t of e.menuDifficulties)e.menuDifficultiesIds.push(t.id);const o=e.menuDifficulties[0];e.menuSelectedChallenge.difficulty=o.difficulty,e.menuSelectedChallenge.beatmapCharacteristic=o.beatmapCharacteristic,e.menuSelectedChallenge.difficultyId=o.id,e.menuSelectedChallenge.image=e.menuSelectedChallenge.coverURL,R(e,n),e.challenge.audio="",x(e),e.isSearching=!1;const a=!!e.favorites.filter(e=>e.id===t).length;e.menuSelectedChallenge.isFavorited=a,e.hasSongLoadError=!1,d[t]&&(e.hasSongLoadError=!0)},menuchallengeunselect:e=>{e.menuSelectedChallenge.id="",e.menuSelectedChallenge.difficultyId="",e.menuSelectedChallenge.difficulty="",e.menuSelectedChallenge.beatmapCharacteristic=""},menudifficultyselect:(e,t)=>{let n;for(const i of e.menuDifficulties)if(i.id===t){n=i;break}e.menuSelectedChallenge.difficultyId=t,e.menuSelectedChallenge.difficulty=n.difficulty,e.menuSelectedChallenge.beatmapCharacteristic=n.beatmapCharacteristic,R(e,e.menuSelectedChallenge)},menuopeningend:e=>{e.isMenuOpening=!1},minehit:e=>{v(e)},optionsmenuopen:e=>{e.optionsMenuOpen=!0},pausegame:e=>{e.isPlaying&&(e.isPaused=!0)},playbuttonclick:e=>{if(""===e.menuSelectedChallenge.id)return;if(d[e.menuSelectedChallenge.id])return;let t="frontpage";e.playlist&&(t="playlist"),e.search.query&&(t="search"),e.genre&&(t="genre"),E(e),Object.assign(e.challenge,e.menuSelectedChallenge),e.menuActive=!1,e.menuSelectedChallenge.id="",e.menuSelectedChallenge.difficulty="",e.menuSelectedChallenge.beatmapCharacteristic="",e.isSearching=!1,e.isLoading=!0,e.loadingText="Loading..."},playlistclear:(e,t)=>{e.menuSelectedChallenge.id="",e.playlist=""},playlistselect:(e,t)=>{e.genre="",e.menuSelectedChallenge.id="",e.playlist=t.id,e.playlistTitle=t.title,e.playlistMenuOpen=!1,e.search.query=""},playlistmenuclose:e=>{e.playlistMenuOpen=!1},playlistmenuopen:e=>{e.playlistMenuOpen=!0},searcherror:(e,t)=>{e.search.hasError=!0},searchprevpage:e=>{0!==e.search.page&&(e.search.page--,A(e))},searchnextpage:e=>{e.search.page>Math.floor(e.search.results.length/6)||(e.search.page++,A(e),void 0!==e.search.url&&e.search.page+3>Math.floor(e.search.results.length/6)&&(e.search.urlPage=e.search.urlPage+1,fetch(e.search.url.replaceAll("CURRENT_PAGE_INDEX",e.search.urlPage)).then(e=>e.json()).then(t=>{var n=(t.docs||t.maps).map(r);for(e.search.results.push(...n),i=0;i<n.length;i++){let e=n[i];s[e.id]=e}})))},searchresults:(e,t)=>{var n;for(e.search.hasError=!1,e.search.page=0,e.search.url=t.url,e.search.urlPage=t.urlPage,e.search.query=t.query,e.search.queryText=f(t.query,10),e.search.results=t.results,n=0;n<t.results.length;n++){let e=t.results[n];s[e.id]=e}A(e),e.menuSelectedChallenge.id="",e.isSearching&&(e.genre="",e.playlist="")},songcomplete:e=>{if("ride"===e.gameMode||!e.inVR)return e.challenge.isBeatsPreloaded=!1,e.isVictory=!1,e.menuActive=!0,void(e.challenge.id="");e.isVictory=!0,e.score.score=isNaN(e.score.score)?0:e.score.score,w(e),e.score.finalAccuracy=e.score.accuracy;const t=parseFloat(e.score.accuracy);e.score.rank=t>=97?"S":t>=90?"A":t>=80?"B":t>=70?"C":t>=60?"D":"F",S(e)},songloadcancel:e=>{e.challenge.isBeatsPreloaded=!1,e.challenge.audio="",e.challenge.id="",e.challenge.version="",e.isZipFetching=!1,e.isLoading=!1,e.isSongProcessing=!1,e.menuActive=!0},songloaderror:e=>{d[e.menuSelectedChallenge.id||e.challenge.id]=!0,e.hasSongLoadError=!0,e.loadingText="Sorry! There was an error loading this song.\nPlease select another song.",e.challenge.id="",e.challenge.isBeatsPreloaded=!1,e.isSongProcessing=!1,e.isZipFetching=!1},songprocessfinish:e=>{e.isSongProcessing=!1,e.isLoading=!1},songprocessstart:e=>{e.isSongProcessing=!0,e.loadingText="Wrapping up..."},"enter-vr":e=>{e.inVR=AFRAME.utils.device.checkHeadsetConnected()},"exit-vr":e=>{e.inVR=!1,e.isPlaying&&(e.isPaused=!0)},startgame:e=>{e.introActive=!1,e.menuActive=!0},victoryfake:e=>{e.score.accuracy="74.99",e.score.rank="C"},wallhitstart:e=>{v(e)},ziploaderend:(e,t)=>{e.challenge.audio=t.audio,e.hasSongLoadError=!1,e.menuSelectedChallenge.version="",e.isZipFetching=!1},ziploaderstart:e=>{e.challenge.isBeatsPreloaded=!1,e.isZipFetching=!0}},computeState:e=>{e.isPlaying=!(e.menuActive||e.isLoading||e.isPaused||e.isVictory||e.isGameOver||e.isZipFetching||e.isSongProcessing||!e.challenge.id||e.introActive);const t=e.menuActive||e.isPaused||e.isVictory||e.isGameOver||e.isLoading||e.introActive;e.leftRaycasterActive=t&&"left"===e.activeHand&&e.inVR,e.rightRaycasterActive=t&&"right"===e.activeHand&&e.inVR,e.mainMenuActive=e.menuActive&&!e.genreMenuOpen&&!e.difficultyFilterMenuOpen&&!e.playlistMenuOpen&&!e.optionsMenuOpen&&!e.isSearching,e.score.active="ride"!==e.gameMode&&e.inVR&&(e.isPlaying||e.isPaused)}});const g=["easy","normal","hard","expert","expertPlus"],b=["Standard"];function y(e,t){const n=g.indexOf(e.difficulty),i=g.indexOf(t.difficulty);if(n<i)return-1;if(n>i)return 1;const o=b.indexOf(e.beatmapCharacteristic),a=b.indexOf(t.beatmapCharacteristic);return o>a?-1:o<a?1:0}function v(e){e.isPlaying&&e.inVR&&(e.score.combo=0)}function E(e){e.damage=0,e.score.accuracy=100,e.score.accuracyInt=100,e.score.accuracyScore=0,e.score.beatsHit=0,e.score.beatsMissed=0,e.score.finalAccuracy=100,e.score.combo=0,e.score.maxCombo=0,e.score.score=0}function x(e){e.menuSelectedChallenge.index=-1;for(let t=0;t<e.searchResultsPage.length;t++)if(e.searchResultsPage[t].id===e.menuSelectedChallenge.id){e.menuSelectedChallenge.index=t;break}}function S(e){e.score.beatsText=`${e.score.beatsHit} / ${e.score.beatsMissed+e.score.beatsHit} BEATS`}function R(e,t){let n=JSON.parse(t.metadata.characteristics)[e.menuSelectedChallenge.beatmapCharacteristic][e.menuSelectedChallenge.difficulty];e.menuSelectedChallenge.songInfoText=`Mapped by ${f(t.metadata.levelAuthorName,55)}\n${t.genre&&"Uncategorized"!==t.genre?t.genre+"\n":""}${function(e){e/=60;const t=""+Math.floor(e);var n=Math.round(60*(e-t));return n<10&&(n="0"+n),`${t}:${n}`}(t.metadata.duration)} / ${n.notes} notes\n${n.bombs} bombs | ${n.obstacles} obstacles\nNJS: ${n.njs}`}function w(e){const t=e.score.beatsHit+e.score.beatsMissed;e.score.accuracy=e.score.accuracyScore/(100*t)*100,e.score.accuracy=e.score.accuracy.toFixed(2),e.score.accuracyInt=parseInt(e.score.accuracy)}},function(e,t){e.exports=[{name:"Pop",row:1,column:1},{name:"R&B",row:1,column:2},{name:"Rap",row:1,column:3},{name:"Rock",row:1,column:4},{name:"Soundtrack",row:1,column:5},{name:"Video Games",row:1,column:6},{name:"Electronic",row:2,column:1},{name:"Hip Hop",row:2,column:2},{name:"House",row:2,column:3},{name:"J-Pop",row:2,column:4},{name:"K-Pop",row:2,column:5},{name:"Meme",row:2,column:6},{name:"Alternative",row:3,column:1},{name:"Anime",row:3,column:2},{name:"Comedy",row:3,column:3},{name:"Dubstep",row:3,column:5},{name:"Dance",row:3,column:6}]},function(e,t){e.exports=[{name:"236862",author:"effariwhy",title:"big playlist"}]},function(e,t,n){var i=n(16);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0},a=n(188)(i,o);i.locals&&(e.exports=i.locals),e.hot.accept(16,(function(){var t=n(16);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,i=0;for(n in e){if(!t||e[n]!==t[n])return!1;i++}for(n in t)i--;return 0===i}(i.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)})),e.hot.dispose((function(){a()}))},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(a).concat([o]).join("\n")}var r;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(i[a]=!0)}for(o=0;o<e.length;o++){var r=e[o];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/jpeg;base64,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"},function(e,t,n){var i,o,a={},r=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=s.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),c=null,d=0,u=[],h=n(189);function m(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=a[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(y(i.parts[r],t))}else{var s=[];for(r=0;r<i.parts.length;r++)s.push(y(i.parts[r],t));a[i.id]={id:i.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],i={},o=0;o<e.length;o++){var a=e[o],r=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(s):n.push(i[r]={id:r,parts:[s]})}return n}function A(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,n);n.insertBefore(t,o)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return b(t,e.attrs),A(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,i,o,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var r=d++;n=c||(c=g(t)),i=x.bind(null,n,r,!1),o=x.bind(null,n,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),A(e,t),t}(t),i=R.bind(null,n,t),o=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),i=S.bind(null,n),o=function(){f(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return m(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var r=n[o];(s=a[r.id]).refs--,i.push(s)}e&&m(p(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var v,E=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function x(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var a=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function S(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function R(e,t,n){var i=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(i=h(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(r),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,n){const i='\x3c!-- https://freesound.org/people/deleted_user_2731495/sounds/183881/ --\x3e\n<audio id="introSong" src="assets/sounds/menu.ogg" loop></audio>\n\n\n\n\n<a-scene\n  bind__beat-generator="challengeId: challenge.id; difficulty: challenge.difficulty; beatmapCharacteristic: challenge.beatmapCharacteristic; gameMode: gameMode; has3DOFVR: has3DOFVR; hasSongLoadError: hasSongLoadError; isPlaying: isPlaying; isZipFetching: isZipFetching; menuSelectedChallengeId: menuSelectedChallenge.id; songDuration: challenge.metadata.duration; speed: speed"\n  bind__beat-system="gameMode: gameMode; hasVR: hasVR; isLoading: isLoading; isPlaying: isPlaying"\n  bind__gameover="isGameOver: isGameOver"\n  bind__intro-song="isPlaying: menuActive && !menuSelectedChallenge.id; isSearching: isSearching"\n  bind__search="difficultyFilter: difficultyFilter; genre: genre; playlist: playlist; query: search.query"\n  bind__song="audio: challenge.audio; challengeId: challenge.id; isLoading: isLoading; isPlaying: isPlaying; isBeatsPreloaded: challenge.isBeatsPreloaded; isGameOver: isGameOver; isVictory: isVictory"\n  bind__song-preview-system="selectedChallengeId: menuSelectedChallenge.id; selectedChallengeVersion: menuSelectedChallenge.version"\n  bind__stage-colors="colorScheme: colorScheme"\n  bind__tunnels="isPlaying: isPlaying; songDuration: challenge.metadata.duration"\n  bind__zip-loader="difficulties: menuDifficulties; isLoading: isLoading; version: menuSelectedChallenge.version; directDownload: menuSelectedChallenge.directDownload; bpm: menuSelectedChallenge.metadata.bpm"\n  animation__gameover="property: object3D.background; type: color; to: #750000; startEvents: gameover"\n  console-shortcuts\n  debug-beat-generator\n  debug-beat-positioning\n  debug-controller\n  debug-intro\n  debug-song-time\n  debug-state\n  hack\n  gpu-preloader\n  \n  loading-screen="backgroundColor: #000"\n  pool__beat-arrow-blue="mixin: arrowBlueBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-arrow-red="mixin: arrowRedBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-dot-blue="mixin: dotBlueBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-dot-red="mixin: dotRedBeat; size: 30; container: #beatContainer; dynamic: true"\n  pool__beat-mine="mixin: mine; size: 30; container: #beatContainer"\n  pool__plume-arrow-blue="mixin: arrowBluePlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-arrow-red="mixin: arrowRedPlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-dot-blue="mixin: dotBluePlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-dot-red="mixin: dotRedPlume; size: 30; container: #beatContainer; dynamic: true"\n  pool__plume-mine="mixin: minePlume; size: 12; container: #beatContainer; dynamic: true"\n  pool__beat-broken-blue="mixin: blueBeatBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-red="mixin: redBeatBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-blue-dot="mixin: blueDotBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-red-dot="mixin: redDotBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-broken-blue-dot="mixin: blueDotPunchBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-broken-red-dot="mixin: redDotPunchBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-broken-mine="mixin: mineBroken; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-fx-blue="mixin: blueBeatFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-fx-red="mixin: redBeatFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__beat-fx-mine="mixin: mineFX; size: 12; container: #rigContainer; dynamic: true"\n  pool__punch-fx-blue="mixin: bluePunchFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-fx-red="mixin: redPunchFX; size: 10; container: #rigContainer; dynamic: true"\n  pool__punch-fx-mine="mixin: yellowPunchFX; size: 12; container: #rigContainer; dynamic: true"\n  pool__tunnels="mixin: tunnel; size: 10; container: #tunnelsContainer; dynamic: true"\n  pool__wall="mixin: wall; size: 20; container: #wallContainer; dynamic: true"\n  proxy-event__cleargame1="event: gamemenuexit; as: cleargame; to: a-scene"\n  proxy-event__cleargame2="event: gamemenurestart; as: cleargame; to: a-scene"\n  proxy-event__cleargame3="event: songcomplete; as: cleargame; to: a-scene"\n  proxy-event__pausegame="event: pausegame; as: textglowoff; to: a-scene"\n  proxy-event__resumegame="event: gamemenuresume; as: textglownormal; to: a-scene"\n  play-sound__crescendo="sound: #crescendo; event: victory; volume: 0.75"\n  render-order="stage, aurora, sideglow, tunnel, curve, curveshadow, beatShadow, score, beats, menu, menuitem, menubutton, menutext, menugenre, cursor, particles, weapon, victory, stepback"\n  stats-param\n  tunnels\n  vr-mode-ui="enterVRButton: #vrButton">\n\n  <a-assets timeout="3000">\n    \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrcassets.html"> --\x3e\n<a-asset-item id="VigaRegularThree" src="assets/fonts/Viga-Regular-Three.json"></a-asset-item>\n\n<a-asset-item id="arrowredObj" src="assets/models/arrowred.obj"></a-asset-item>\n<a-asset-item id="arrowblueObj" src="assets/models/arrowblue.obj"></a-asset-item>\n<a-asset-item id="beatObj" src="assets/models/beat.obj"></a-asset-item>\n<a-asset-item id="laserObj" src="assets/models/laser/laser.obj"></a-asset-item>\n\n<a-asset-item id="tunnelObj" src="assets/models/tunnel.obj"></a-asset-item>\n<a-asset-item id="redBeatObj" src="assets/models/redbeat.obj"></a-asset-item>\n<a-asset-item id="blueBeatObj" src="assets/models/bluebeat.obj"></a-asset-item>\n<a-asset-item id="dotRedObj" src="assets/models/dotred.obj"></a-asset-item>\n<a-asset-item id="dotBlueObj" src="assets/models/dotblue.obj"></a-asset-item>\n<a-asset-item id="backGlowObj" src="assets/models/backglow.obj"></a-asset-item>\n<a-asset-item id="aurorasObj" src="assets/models/auroras.obj"></a-asset-item>\n<a-asset-item id="merkabaObj" src="assets/models/merkaba.obj"></a-asset-item>\n<a-asset-item id="ringsObj" src="assets/models/rings.obj"></a-asset-item>\n<a-asset-item id="homeObj" src="assets/models/home.obj"></a-asset-item>\n<a-asset-item id="homeShadowObj" src="assets/models/homeshadow.obj"></a-asset-item>\n<a-asset-item id="weaponObj" src="assets/models/weapon.obj"></a-asset-item>\n<a-asset-item id="weaponHandleObj" src="assets/models/weaponhandle.obj"></a-asset-item>\n<a-asset-item id="weaponGlowObj" src="assets/models/weaponglow.obj"></a-asset-item>\n<a-asset-item id="beatBrokenObj" src="assets/models/beatbroken.obj"></a-asset-item>\n<a-asset-item id="dotBrokenObj" src="assets/models/dotbroken.obj"></a-asset-item>\n<a-asset-item id="dotPunchBrokenObj" src="assets/models/dotbroken.gltf"></a-asset-item>\n<a-asset-item id="cutfxObj" src="assets/models/cutfx.obj"></a-asset-item>\n<a-asset-item id="punchfxObj" src="assets/models/punchfx.obj"></a-asset-item>\n<a-asset-item id="leftFistObj" src="assets/models/leftfist.obj"></a-asset-item>\n<a-asset-item id="leftFistWeaponObj" src="assets/models/leftfistweapon.obj"></a-asset-item>\n<a-asset-item id="rightFistObj" src="assets/models/rightfist.obj"></a-asset-item>\n<a-asset-item id="rightFistWeaponObj" src="assets/models/rightfistweapon.obj"></a-asset-item>\n<a-asset-item id="plumeObj" src="assets/models/plume.obj"></a-asset-item>\n\n<a-asset-item id="mineObj" src="assets/models/mine.obj"></a-asset-item>\n<a-asset-item id="mineBrokenObj" src="assets/models/minebroken.gltf"></a-asset-item>\n\n\x3c!--\n https://freesound.org/people/juskiddink/sounds/70043/\n https://freesound.org/people/Robinhood76/sounds/337436/\n--\x3e\n<audio id="confirmSound" src="assets/sounds/beatHit.ogg"></audio>\n<audio id="clearSound" src="assets/sounds/clear.ogg"></audio>\n<audio id="hoverSound" src="assets/sounds/hover.ogg"></audio>\n<audio id="victorySound" src="assets/sounds/victory.ogg"></audio>\n<audio id="crescendo" src="assets/sounds/crescendo.ogg"></audio>\n\n\n<audio id="hitSound1" src="assets/sounds/hit1.ogg"></audio>\n<audio id="hitSound1left" src="assets/sounds/hit1left.ogg"></audio>\n<audio id="hitSound1right" src="assets/sounds/hit1right.ogg"></audio>\n\n<audio id="hitSound2" src="assets/sounds/hit2.ogg"></audio>\n<audio id="hitSound2left" src="assets/sounds/hit2left.ogg"></audio>\n<audio id="hitSound2right" src="assets/sounds/hit2right.ogg"></audio>\n\n<audio id="hitSound3" src="assets/sounds/hit3.ogg"></audio>\n<audio id="hitSound3left" src="assets/sounds/hit3left.ogg"></audio>\n<audio id="hitSound3right" src="assets/sounds/hit3right.ogg"></audio>\n\n<audio id="hitSound4" src="assets/sounds/hit4.ogg"></audio>\n<audio id="hitSound4left" src="assets/sounds/hit4left.ogg"></audio>\n<audio id="hitSound4right" src="assets/sounds/hit4right.ogg"></audio>\n\n<audio id="hitSound5" src="assets/sounds/hit5.ogg"></audio>\n<audio id="hitSound5left" src="assets/sounds/hit5left.ogg"></audio>\n<audio id="hitSound5right" src="assets/sounds/hit5right.ogg"></audio>\n\n<audio id="hitSound6" src="assets/sounds/hit6.ogg"></audio>\n<audio id="hitSound6left" src="assets/sounds/hit6left.ogg"></audio>\n<audio id="hitSound6right" src="assets/sounds/hit6right.ogg"></audio>\n\n<audio id="hitSound7" src="assets/sounds/hit7.ogg"></audio>\n<audio id="hitSound7left" src="assets/sounds/hit7left.ogg"></audio>\n<audio id="hitSound7right" src="assets/sounds/hit7right.ogg"></audio>\n\n<audio id="hitSound8" src="assets/sounds/hit8.ogg"></audio>\n<audio id="hitSound8left" src="assets/sounds/hit8left.ogg"></audio>\n<audio id="hitSound8right" src="assets/sounds/hit8right.ogg"></audio>\n\n<audio id="hitSound9" src="assets/sounds/hit9.ogg"></audio>\n<audio id="hitSound9left" src="assets/sounds/hit9left.ogg"></audio>\n<audio id="hitSound9right" src="assets/sounds/hit9right.ogg"></audio>\n\n<audio id="hitSound10" src="assets/sounds/hit10.ogg"></audio>\n<audio id="hitSound10left" src="assets/sounds/hit10left.ogg"></audio>\n<audio id="hitSound10right" src="assets/sounds/hit10right.ogg"></audio>\n\n\n<img id="cursorMeshImg" src="assets/models/laser/laser.png">\n<img id="downIconImg" src="assets/img/downIcon.png">\n<img id="envmapTemplateImg" src="assets/img/envmap.png">\n<img id="envmapImg">\n<img id="favoriteImg" src="assets/img/favorite.png">\n<img id="sliceImg" src="assets/img/slice.png">\n<img id="stepbackImg" src="assets/img/stepback.png">\n<img id="soundboxingImg" src="assets/img/soundboxing.jpg">\n<img id="genresImg" src="assets/img/genres.png">\n<img id="starImg" src="assets/img/star.png">\n<img id="merkabaBloomImg" src="assets/img/merkababloom.png">\n<img id="homeShadowImg" src="assets/img/homeshadow.jpg">\n<img id="backGlowImg" src="assets/img/backglow.png">\n<img id="weaponImg" src="assets/img/weapon.jpg">\n<img id="weapon2Img" src="assets/img/weapon2.jpg">\n<img id="weaponHandleImg" src="assets/img/weaponhandle.png">\n<img id="difficultyImg" src="assets/img/difficulty.png">\n<img id="selectedImg" src="assets/img/selected.png">\n<img id="cutfxImg" src="assets/img/cutfx.png">\n\x3c!--\n<img id="cutFxTemplateImg" src="assets/img/cutfx.png">\n<img id="cutFxImg">\n--\x3e\n<img id="minefxImg" src="assets/img/minefx.png">\n<img id="sideglowImg" src="assets/img/sideglow.png">\n<img id="logoImg" src="assets/img/logo.png">\n<img id="moonImg" src="assets/img/moon.png">\n<img id="plumeImg" src="assets/img/plume.png">\n<img id="tubeImg" src="assets/img/tube.png">\n<img id="tubeColorImg" src="assets/img/tube.jpg">\n<img id="handStarTrailImg" src="assets/img/handstartrail.png">\n\n<img id="modeRideImg" src="assets/img/moderide.jpg">\n<img id="modeClassicImg" src="assets/img/modeclassic.jpg">\n<img id="modePunchImg" src="assets/img/modepunch.jpg">\n<img id="modeViewerImg" src="assets/img/modeviewer.jpg">\n\n<a-mixin id="slice" slice9="color: #050505; transparent: true; opacity: 0.9; src: #sliceImg; left: 50; right: 52; top: 50; bottom: 52; padding: 0.18"></a-mixin>\n<a-mixin id="font" text="font: assets/fonts/Viga-Regular.json; shader: msdf; letterSpacing: 1"></a-mixin>\n\n<a-mixin id="superKeyboardTextInput" mixin="font"></a-mixin>\n\n<a-mixin id="beat"></a-mixin>\n<a-mixin id="beatBlock"></a-mixin>\n<a-mixin id="beatSign"></a-mixin>\n\n<a-mixin id="arrowBlueBeat" mixin="beat" beat="color: blue; type: arrow"></a-mixin>\n<a-mixin id="arrowRedBeat" mixin="beat" beat="color: red; type: arrow"></a-mixin>\n<a-mixin id="dotBlueBeat" mixin="beat" beat="color: blue; type: dot"></a-mixin>\n<a-mixin id="dotRedBeat" mixin="beat" beat="color: red; type: dot"></a-mixin>\n<a-mixin id="mine" mixin="beat" beat="type: mine"></a-mixin>\n<a-mixin id="beatShadow" mixin="beat" geometry="primitive: plane; width: 0.7; height: 0.6" rotation="-90 0 0" material="src: #minefxImg; shader: flat; color: #000; transparent: true; opacity: 0.2" render-order="beatShadow"></a-mixin>\n\n<a-mixin id="plume" plume obj-model="obj: #plumeObj"></a-mixin>\n<a-mixin id="arrowBluePlume" mixin="plume" plume="type: arrow; color: blue" materials="name: arrowBluePlume"></a-mixin>\n<a-mixin id="arrowRedPlume" mixin="plume" plume="type: arrow; color: red" materials="name: arrowRedPlume"></a-mixin>\n<a-mixin id="dotBluePlume" mixin="plume" plume="type: dot; color: blue" materials="name: dotBluePlume"></a-mixin>\n<a-mixin id="dotRedPlume" mixin="plume" plume="type: dot; color: red" materials="name: dotRedPlume"></a-mixin>\n<a-mixin id="minePlume" mixin="plume" plume="type: mine" materials="name: minePlume"></a-mixin>\n\n<a-mixin\n  id="superCut"\n  bind__supercutfx="colorPrimary: colorPrimary; colorSecondary: colorSecondary"\n  supercutfx\n  geometry="primitive: plane; width: 3; height: 3"\n  material="shader: superCutFxShader; transparent: true; depthWrite: false"></a-mixin>\n\n<a-mixin\n  id="redBeatBroken"\n  obj-model="obj: #beatBrokenObj"\n  beat-cut-fx="color: red"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="blueBeatBroken"\n  obj-model="obj: #beatBrokenObj"\n  beat-cut-fx="color: blue"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="redDotBroken"\n  obj-model="obj: #dotBrokenObj"\n  beat-cut-fx="color: red; type: dot"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="blueDotBroken"\n  obj-model="obj: #dotBrokenObj"\n  beat-cut-fx="color: blue; type: dot"\n  render-order="beats"></a-mixin>\n\n<a-mixin\n  id="redDotPunchBroken"\n  gltf-model="#dotPunchBrokenObj"\n  beat-cut-fx="color: red; type: dot"\n  render-order="beats"></a-mixin>\n<a-mixin\n  id="blueDotPunchBroken"\n  gltf-model="#dotPunchBrokenObj"\n  beat-cut-fx="color: blue; type: dot"\n  render-order="beats"></a-mixin>\n\n<a-mixin\n  id="redBeatFX"\n  bind__material="color: colorPrimary"\n  obj-model="obj: #cutfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 400; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="blueBeatFX"\n  bind__material="color: colorSecondary"\n  obj-model="obj: #cutfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 400; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="mineBroken"\n  gltf-model="#mineBrokenObj"\n  beat-cut-fx="type: mine"\n  render-order="beats"></a-mixin>\n\n<a-mixin\n  id="mineFX"\n  geometry="primitive: plane; width: 0.6; height: 0.6"\n  material="shader: flat; transparent: true; src: #minefxImg; color: #fff568; depthWrite: false"\n  render-order="menu"\n  animation="property: components.material.material.opacity; from:1; to:0; dur: 400; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="redPunchFX"\n  bind__material="color: colorPrimary"\n  obj-model="obj: #punchfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 600; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="bluePunchFX"\n  bind__material="color: colorSecondary"\n  obj-model="obj: #punchfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 600; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  bind__material="color: colorTertiary"\n  id="yellowPunchFX"\n  obj-model="obj: #punchfxObj"\n  material="shader: cutfxShader; progress: 1"\n  render-order="menu"\n  animation="property: components.material.material.uniforms.progress.value; from: 0; to: 1; dur: 600; loop: false; easing: linear; startEvents: explode"></a-mixin>\n\n<a-mixin\n  id="wall"\n  material="shader: wallShader; transparent: true; side: double; opacity: 0"\n  animation__fadein="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; easing: easeInCubic; autoplay: false; dur: 1500"\n  animation__scalein="property: object3D.position.y; from: -5; to: 0; easing: easeInOutElastic; autoplay: false; dur: 1500"\n  render-order\n  wall></a-mixin>\n\n<a-mixin\n  id="tunnel"\n  obj-model="obj: #tunnelObj"\n  materials="name: tunnel"></a-mixin>\n\n<a-mixin\n  id="bigMenuButton"\n  geometry="primitive: plane; width: 1.15; height: 0.23"\n  material="shader: panelShader; brightness: 0.5; borderWidth: 0.05; ratio: 4; borderRadius: 0.6"\n  animation__mouseenter1="property: components.material.material.uniforms.activePanel.value; from: 0; to: 1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 100"\n  animation__mouseleave1="property: components.material.material.uniforms.activePanel.value; from: 1; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 100"\n  animation__mouseenter2="property: scale; from: 1 1 1; to: 1.04 1.04 1.04; startEvents: mouseenter; pauseEvents: mouseleave; dur: 80"\n  animation__mouseleave2="property: scale; to: 1 1 1; from: 1.04 1.04 1.04; startEvents: mouseleave; pauseEvents: mouseenter; dur: 80"\n  render-order="menubutton"></a-mixin>\n\n<a-mixin id="cancelSoundUI" play-sound__cancel="event: click; sound: #clearSound; volume: 0.5"></a-mixin>\n<a-mixin id="clickSoundUI" play-sound__click="event: click; sound: #confirmSound; volume: 0.25"></a-mixin>\n<a-mixin id="hoverSoundUI" play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"></a-mixin>\n\x3c!-- </require> --\x3e</require>\n  </a-assets>\n\n  <a-entity id="beatObjTemplate" obj-model="obj: #beatObj" visible="false"></a-entity>\n  <a-entity id="redBeatObjTemplate" obj-model="obj: #redBeatObj" visible="false"></a-entity>\n  <a-entity id="blueBeatObjTemplate" obj-model="obj: #blueBeatObj" visible="false"></a-entity>\n  <a-entity id="dotRedObjTemplate" obj-model="obj: #dotRedObj" visible="false"></a-entity>\n  <a-entity id="dotBlueObjTemplate" obj-model="obj: #dotBlueObj" visible="false"></a-entity>\n  <a-entity id="mineObjTemplate" obj-model="obj: #mineObj" visible="false"></a-entity>\n  <a-entity id="cursorLaser" obj-model="obj: #laserObj" visible="false"></a-entity>\n\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesloading.html"> --\x3e\n<a-entity\n  id="loadingSongInfoContainer"\n  bind__animation__scale="enabled: isLoading"\n  bind__visible="isLoading"\n  animation__scale="property: scale; from: 1 1 1; to: 1.05 1.05 1.05; dir: alternate; loop: true; dur: 1200; easing: easeInOutCubic"\n  position="0 1.5 -2">\n\n  <a-entity\n    id="loadingMenuBackground"\n    bind-toggle__raycastable="isLoading"\n    render-order="menu"\n    geometry="primitive: plane; width: 1.15; height: 1.2"\n    material="shader: panelShader; ratio: 1.15; borderRadius: 0.4"\n    position="0 0 -0.03"></a-entity>\n\n  <a-entity id="loadingSongImage"\n    copy-texture="from: #menuSelectedChallengeImage"\n    geometry="primitive: plane; buffer: false; skipCache: true; height: 0.3; width: 0.3"\n    material="shader: flat; transparent: false"\n    position="0 0.24 0"\n    render-order="menu"></a-entity>\n\n  <a-entity id="loadingSongInfo">\n    <a-entity\n      position="0 -0.05 0"\n      mixin="font"\n      bind__text="color: colorSecondary"\n      bind__text-truncate="value: challenge.songSubName + \' - \' + challenge.author"\n      text="wrapCount: 40; align: center"\n      text-truncate="length: 35"\n      render-order="menutext"></a-entity>\n\n    <a-entity position="0 -0.13 0"\n      mixin="font"\n      text="align: center; color: #FFF; wrapCount: 21; baseline: top; lineHeight: 36; width: 0.81"\n      bind__text="value: challenge.metadata.songName"\n      render-order="menutext"></a-entity>\n\n    <a-entity\n      id="loadingText"\n      mixin="font"\n      bind__animation__color="enabled: isLoading"\n      bind__text="color: colorPrimary; value: loadingText; wrapCount: hasSongLoadError && 24 || 18"\n      bind__visible="isLoading"\n      text="align: center; wrapCount: 18; width: 0.65"\n      render-order="menutext"\n      position="0 -0.32 0.001"></a-entity>\n\n    <a-entity\n      id="zipLoaderIndicator"\n      bind__material="color: colorPrimary"\n      bind__visible="isZipFetching"\n      geometry="primitive: plane; height: 0.1; width: 0.1"\n      material="shader: ring; radiusInner: 0.2; radiusOuter: 0.9; progress: 0; transparent: true"\n      render-order="menuitem"\n      position="0 -0.4 0.002">\n    </a-entity>\n\n    <a-entity\n      id="songProcessingIndicator"\n      bind__animation__spin="enabled: isSongProcessing"\n      bind__material="color: colorPrimary"\n      bind__visible="isSongProcessing"\n      animation__spin="property: object3D.rotation.z; from: 0; to: -360; easing: linear; dur: 1000; loop: true"\n      geometry="primitive: plane; height: 0.15; width: 0.15"\n      material="shader: ring; radiusInner: 0.2; radiusOuter: 0.4; transparent: true; progress: 0.2"\n      render-order="menutext"\n      position="0 -0.4 0.004"\n      visible="false">\n    </a-entity>\n\n    <a-entity\n      id="loadingCancelButton"\n      mixin="bigMenuButton"\n      bind-toggle__raycastable="isLoading"\n      position="0 -0.67 0.01"\n      proxy-event="event: click; to: a-scene; as: songloadcancel">\n      <a-entity mixin="font" text="align: center; color: #FAFAFA; wrapCount: 20; value: CANCEL" position="0 -0.065 0.001"></a-entity>\n    </a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesstage.html"> --\x3e\n<a-entity\n  id="audioAnalyser"\n  audioanalyser="fftSize: 32; enableBeatDetection: false; enableLevels: false; enableWaveform: false; enableVolume: false"></a-entity>\n\n<a-entity id="stage" no-frustum-cull follow-z="target: #curveFollowRig">\n  <a-entity\n    id="backglow"\n    obj-model="obj: #backGlowObj"\n    materials="name: backglow"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    id="rings"\n    obj-model="obj: #ringsObj"\n    materials="name: rings"\n    position="0 0 -1500"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    id="auroras"\n    class="aurora"\n    obj-model="obj: #aurorasObj"\n    materials="name: aurora"\n    render-order="aurora"></a-entity>\n\n  <a-entity\n    id="merkaba"\n    obj-model="obj: #merkabaObj"\n    bind__visible="!isVictory && !isGameOver"\n    materials="name: merkaba"\n    animation="property: rotation; from: 0 0 0; to: 360 360 360; dur: 50000; easing: linear; loop: true"\n    position="0 46 -1500"></a-entity>\n\n  <a-entity\n    class="merkababloom"\n    geometry="primitive: plane; width: 200; height: 200"\n    material="shader: flat; src: #merkabaBloomImg; blending: additive; depthTest: false; color: #888"\n    position="0 46 -1400"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    class="merkababloom"\n    bind__material="color: colorTertiary"\n    geometry="primitive: plane; width: 250; height: 250"\n    animation="property: object3D.rotation.z; from: 0; to: 360; loop: true; easing: linear; dur: 30000"\n    material="shader: flat; src: #merkabaBloomImg; blending: additive; depthTest: false"\n    position="0 46 -1380"\n    render-order="stage"></a-entity>\n\n  <a-entity\n    id="moon"\n    geometry="primitive: plane; width: 1000; height: 500"\n    position="0 1000 -1000"\n    rotation="45 0 0"\n    materials="name: moon"\n    ></a-entity>\n\n  <a-entity class="stars" stars render-order="particles"></a-entity>\n\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesintro.html"> --\x3e\n<a-entity\n  id="mainLogo"\n  geometry="primitive: plane; width: 9; height: 1.125"\n  material="shader: flat; src: #logoImg; transparent: true; depthTest: false; blending: additive; opacity: 0"\n  position="0 3.3 -2.5"\n  rotation="0 0 0"\n  scale="0.8 0.8 0.8"\n  bind__visible="introActive || menuActive"\n  animation__opacity="property: components.material.material.opacity; from: 0; to: 1; dur: 2000; delay: 1000"\n  animation__position="property: object3D.position.y; to: 3.4; dur: 2000; easing: easeInOutQuad; startEvents: startgame"></a-entity>\n\n<a-entity\n  id="startButton"\n  bind__visible-raycastable="introActive"\n  geometry="primitive: plane; width: 1; height: 0.35"\n  position="0 1.6 -2.2"\n  render-order="menu"\n  proxy-event="event: click; to: a-scene, #menu, #mainlogo, #menuTopButtons, #menuBackground; as: startgame"\n  delayed-proxy-event="event: click; to: a-scene; as: menuopeningend; delay: 1800"\n  mixin="bigMenuButton"\n  play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n  play-sound__click="event: click; sound: #confirmSound;  volume: 0.25"\n  material="ratio: 3; opacity: 0"\n  animation="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 500; delay: 3000">\n  <a-entity\n    id="startButtonLabel"\n    mixin="font"\n    text="value: BEGIN; color: #f0f0f0; align: center; width: 1; wrapCount: 12; opacity: 0"\n    position="0 -0.1 0.01"\n    animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; dur: 500; delay: 3500"\n    ></a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesmenu.html"> --\x3e\n\x3c!-- Macro is a templating function. It is rendered into the HTML below with searchResults(). --\x3e\n\n\n\n<template id="searchResultTemplate">\n  <a-entity class="searchResult" bind-item__data-id="item.id" bind-item__data-index="item.index">\n    <a-entity class="searchResultBackground" bind-item__active-item="active: menuSelectedChallenge.id === item.id"\n      bind-item__animation__mouseenter="enabled: menuSelectedChallenge.id !== item.id"\n      bind-item__animation__mouseleave="enabled: menuSelectedChallenge.id !== item.id"\n      bind-toggle__raycastable="mainMenuActive || isSearching" bind__material="color: colorPrimary"\n      animation__mouseenter="property: components.material.material.opacity; to: 0.4; startEvents: mouseenter; pauseEvents: mouseleave; dur: 75; delay: 1"\n      animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 75"\n      geometry="primitive: plane; width: 1.1; height: 0.2"\n      material="shader: flat; transparent: true; opacity: 0.0; src: #selectedImg" position="0 -0.13 -0.002"\n      play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03" render-order="menuitem"></a-entity>\n  </a-entity>\n  </a-entity>\n</template>\n\n\n\x3c!-- Menu container begins here. --\x3e\n<a-entity id="menu" bind__visible="menuActive" position="0 1.4 -2.3"\n  animation__position="property: object3D.position.z; to: -2; dur: 1500; easing: easeInOutCubic; delay: 300; startEvents: startgame">\n\n  <a-entity id="menuBackground"\n    bind__menu-midsection="active: !!menuSelectedChallenge.id && (mainMenuActive || difficultyFilterMenuOpen) || difficultyFilterMenuOpen; selectedChallenge: menuSelectedChallenge.id"\n    bind-toggle__raycastable="menuActive || genreMenuOpen || isSearching || difficultyFilterMenuOpen"\n    geometry="primitive: plane; width: 3.4; height: 1.82" material="shader: panelShader; ratio: 1.86; opacity: 0"\n    animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n    animation__midsectionshow="property: components.material.material.uniforms.midSection.value; from: 0; to: 1; dur: 160; startEvents: showdifficultysection; easing: easeOutCubic"\n    animation__midsectionhide="property: components.material.material.uniforms.midSection.value; from: 1: to: 0; dur: 160; startEvents: hidedifficultysection; easing: easeOutCubic"\n    render-order="menu" position="0 0 -0.005"></a-entity>\n\n  <a-entity id="mainMenu" bind__visible="mainMenuActive && !isMenuOpening || isSearching">\n    <a-entity id="searchResultsContainer" position="0 0 0.001" class="menuAnimation"\n      bind__menu-slide-animation="isSearching: isSearching; menuSelectedChallengeId: menuSelectedChallenge.id"\n      animation__menuleft="property: object3D.position.x; to: -0.79; dur: 200; easing: easeOutCubic; autoplay: false"\n      animation__menuright="property: object3D.position.x; from: -0.79; to: 0; dur: 200; easing: easeOutCubic; autoplay: false">\n\n      \n\x3c!-- TODO: Sort the layout based on the IDs. --\x3e\n<a-entity id="searchResultList"\n  bind-for="for: item; in: searchResultsPage; key: id; template: #searchResultTemplate; updateInPlace: true; pool: 6; delay: 25"\n  layout="type: box; columns: 1; marginRow: -0.2; orderAttribute: data-index" search-result-list position="0 0.644 0">\n</a-entity>\n\n\x3c!-- All search result text merged and spaced out. --\x3e\n<a-entity id="searchSongNameTexts" mixin="font" bind__text="value: search.songNameTexts" render-order="menutext"\n  text="baseline: top; align: left; color: #FAFAFA; wrapCount: 28; lineHeight: 130" position="0.181 0.51943 0.001">\n</a-entity>\n<a-entity id="searchSongSubNameTexts" mixin="font"\n  bind__text="color: colorSecondaryBright; value: search.songSubNameTexts" render-order="menutext"\n  text="baseline: top; align: left; wrapCount: 42; lineHeight: 190" position="0.181 0.445 0.001">\n</a-entity>\n\n<a-entity id="searchThumbnailImages" bind__search-thumbnail-atlas="dummyUpdater: search.songSubNameTexts"\n  bind__visible="searchResultsPage.length > 0" geometry="primitive: plane; buffer: false; width: 0.2; height: 1.2"\n  dynamic-texture-atlas="canvasId: thumbnailAtlasMap; canvasWidth: 64; canvasHeight: 512; numColumns: 1; numRows: 6"\n  material="shader: flat; transparent: true" render-order="menubutton" position="-0.45 0.0146 0.002"></a-entity>\n\n<a-mixin id="searchPageButton"\n  animation__mouseenter="property: components.slice9.material.opacity; from: 0; to: 0.3; startEvents: mouseenter; pauseEvents: mouseleave; dur: 150"\n  animation__mouseleave="property: components.slice9.material.opacity; from: 0.3; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 150"\n  mixin="slice" raycaster-target="width: 1; height: 0.32" render-order="menubutton"\n  slice9="width: 0.8; color: #08bfa2; height: 0.130; padding: 0.03; opacity: 0"></a-mixin>\n\n<a-entity id="searchPrevPage" mixin="searchPageButton" bind__slice9="color: colorPrimary"\n  bind__visible-raycastable="search.hasPrev && (mainMenuActive || isSearching)"\n  raycaster-target="bindToggle: search.hasNext && menuActive; position: 0 0.08 0" position="-0 0.69 0.01"\n  proxy-event="event: click; to: a-scene; as: searchprevpage; captureBubbles: true">\n  <a-entity id="prevArrow" bind__material="color: colorPrimary" geometry="primitive: plane; width: 0.12; height: 0.12"\n    material="shader: flat; src: #downIconImg; transparent: true" rotation="0 0 180" position="0 0 -0.001"></a-entity>\n</a-entity>\n\n<a-entity id="searchNextPage" mixin="searchPageButton" bind__slice9="color: colorSecondary"\n  raycaster-target="bindToggle: search.hasNext && (mainMenuActive || isSearching); position: 0 -0.08 0"\n  position="-0 -0.674 0.01" proxy-event="event: click; to: a-scene; as: searchnextpage; captureBubbles: true"\n  bind__visible="search.hasNext">\n  <a-entity id="nextArrow" bind__material="color: colorSecondary" geometry="primitive: plane; width: 0.12; height: 0.12"\n    material="shader: flat; src: #downIconImg; transparent: true" position="0 0 -0.001"></a-entity>\n</a-entity>\n\n    </a-entity>\n\n    <a-entity id="menuDifficultiesGroup" position="0 0.18 0">\n\n      \x3c!-- Top-aligned. --\x3e\n      \x3c!-- Uses bind-for and bind-item to render difficulties. --\x3e\n      <a-entity id="menuDifficulties" bind-for="for: item; in: menuDifficultiesIds; updateInPlace: true; pool: 10"\n        bind__visible="!!menuSelectedChallenge.id"\n        layout="type: box; columns: 1; marginRow: -0.2; orderAttribute: data-bind-for-key" position="0 0.34 0"\n        menu-difficulty-select>\n        \n        <template>\n          \x3c!-- Item is a string representing the difficulty. --\x3e\n          <a-entity class="difficultyOption" bind-item__data-difficulty="item">\n            <a-entity class="difficultyBackground"\n              bind-item__active-item="active: (menuSelectedChallenge.difficultyId === item)"\n              bind-item__animation__mouseenter="enabled: !(menuSelectedChallenge.difficultyId === item)"\n              bind-item__animation__mouseleave="enabled: !(menuSelectedChallenge.difficultyId === item)"\n              bind-item__difficulty-background="enabled: menuActive && !!menuSelectedChallenge.id && !(menuSelectedChallenge.difficultyId === item) && !difficultyFilterMenuOpen"\n              bind__material="color: colorPrimary" geometry="primitive: plane; width: 0.4; height: 0.2"\n              material="shader: flat; transparent: true; opacity: 0.0; src: #difficultyImg" position="0 -0.005 0"\n              play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n              animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; pauseEvents: mouseleave; dur: 75"\n              event-set__mouseenter="visible: true"\n              animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 75"\n              event-set__mouseleave="visible: true; _delay: 160" render-order="menuitem"></a-entity>\n            <a-entity class="difficultyText" mixin="font"\n              bind-item__active-text-color="active: (menuSelectedChallenge.difficultyId === item)"\n              bind-item__difficulty-text="id: item" active-text-color="color: #fff"\n              text="wrapCount: 30; align: center; color: #8d8d8d" position="0 -0.057 0.001" render-order="menutext">\n            </a-entity>\n          </a-entity>\n        </template>\n        \n      </a-entity>\n    </a-entity>\n\n    \x3c!-- Selected challenge info. --\x3e\n    <a-entity id="menuSelectedChallengePanel" bind__visible="!!menuSelectedChallenge.id"\n      position="0.8394583182784089 0 0.001">\n      <a-entity id="menuFavoriteButton" bind__animation__mouseenter="to: menuSelectedChallenge.isFavorited && 0.25 || 1"\n        bind__animation__mouseleave="to: menuSelectedChallenge.isFavorited && 1 || 0.25"\n        bind__material="color: colorTertiary; opacity: menuSelectedChallenge.isFavorited && 1 || 0.25"\n        bind__raycastable="menuActive && !!menuSelectedChallenge.id"\n        animation__mouseenter="property: components.material.material.opacity; startEvents: mouseenter; dur: 150; easing: easeInOutCubic"\n        animation__mouseleave="property: components.material.material.opacity; startEvents: mouseleave; dur: 100; easing: easeInOutCubic"\n        geometry="primitive: plane; width: 0.1; height: 0.1"\n        material="src: #favoriteImg; shader: flat; transparent: true; opacity: 0.25"\n        play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1" position="0.46 0.68 0.001"\n        proxy-event="event: click; to: a-scene; as: favoritetoggle" render-order="menuitem"></a-entity>\n\n      <a-entity id="menuSelectedChallengeImage"\n        bind__menu-selected-challenge-image="coverURL: menuSelectedChallenge.coverURL"\n        geometry="primitive: plane; height: 0.4; width: 0.4" material="shader: flat" position="0 0.42 0"></a-entity>\n\n      <a-entity id="menuSelectedChallengeInfoContainer" position="0 0.058 0">\n        <a-entity id="menuSelectedChallengeSongAuthor" mixin="font"\n          bind__text="color: colorSecondaryBright; value: (menuSelectedChallenge.metadata.songSubName || menuSelectedChallenge.metadata.songAuthorName || \'Unknown Artist\')" position="0 0.042 0"\n          render-order="menutext" text="wrapCount: 40; lineHeight: 40; width: 1.185; align: center; baseline: center">\n        </a-entity>\n        <a-entity id="menuSelectedChallengeSongName" mixin="font"\n          bind__text="color: colorPrimary; value: menuSelectedChallenge.metadata.songName" position="0 -0.059 0"\n          render-order="menutext" text="align: center; wrapCount: 31; baseline: top; lineHeight: 36; width: 1.4">\n        </a-entity>\n        <a-entity id="menuSelectedChallengeInfo" mixin="font" bind__text="value: menuSelectedChallenge.songInfoText"\n          mixin="font" position="0 -0.18 0" render-order="menutext"\n          text="align: center; color: #989898; wrapCount: 55; lineHeight: 72; width: 1.5; baseline: top"></a-entity>\n      </a-entity>\n\n      <a-entity id="playButton"\n        bind__visible-raycastable="menuActive && !!menuSelectedChallenge.id && !genreMenuOpen && !difficultyFilterMenuOpen && !isIOS && !hasSongLoadError"\n        geometry="primitive: plane; width: 0.7; height: 0.25"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        play-sound__click="event: click; sound: #confirmSound; volume: 0.25" position="0 -0.561 0"\n        proxy-event="event: click; to: a-scene; as: playbuttonclick"\n        material="shader: panelShader; brightness: 0.7; transparent: true; midSection: 0; ratio: 2.8; borderRadius: 0.6; borderWidth: 0.08"\n        render-order="menubutton"\n        animation__mouseenter1="property: components.material.material.uniforms.activePanel.value; from: 0; to: 1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 100"\n        animation__mouseleave1="property: components.material.material.uniforms.activePanel.value; from: 1; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 100"\n        animation__mouseenter2="property: scale; from: 1 1 1; to: 1.1 1.1 1.1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 100"\n        animation__mouseleave2="property: scale; to: 1 1 1; from: 1.1 1.1 1.1; startEvents: mouseleave; pauseEvents: mouseenter; dur: 100">\n        <a-entity mixin="font" text="align: center; color: #FFF; wrapCount: 15; value: PLAY" position="0 -0.085 0.01">\n        </a-entity>\n      </a-entity>\n\n      <a-entity id="iOSNotice" bind__visible="mainMenuActive && isIOS" mixin="font" position="0 -0.5 0.01"\n        text="align: center; baseline: top; color: #FFF; wrapCount: 32; value: Sorry, iOS is currently not playable but support is coming soon!">\n      </a-entity>\n\n      <a-entity id="menuLoadError" bind__visible="hasSongLoadError" mixin="font" position="0 -0.5 0.01"\n        text="align: center; baseline: top; color: #FFF; wrapCount: 32; value: Sorry! There was an error loading this song.">\n      </a-entity>\n    </a-entity>\n\n    <a-entity id="searchError" mixin="font" bind__visible="search.hasError" render-order="menuText"\n      text="align: center; value: Sorry, there was an issue fetching search results. Please try again."\n      position="0 0 0.01"></a-entity>\n\n    <a-entity id="menuNoPlaylists" mixin="font"\n      bind__visible="playlist === \'favorites\' && favorites.length === 0 && !menuSelectedChallenge.id"\n      render-order="menuText" position="0 0.1 0.01"\n      text="align: center; baseline: top; color: #FFF; wrapCount: 32; value: Add a song to your favorites by clicking the star in the top right of the menu after selected a song.">\n    </a-entity>\n\n    <a-entity id="searchNoResults" mixin="font"\n      bind__visible="!isSearching && search.results.length === 0 && playlist !== \'favorites\'" render-order="menuText"\n      text="align: center; value: No search results found. Please try again with another query." position="0 0 0.01">\n    </a-entity>\n  </a-entity>\n\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesgenreMenu.html"> --\x3e\n<a-entity\n  id="genreMenu"\n  bind-for="for: genre; in: genres; updateInPlace: true; key: name"\n  bind__visible="genreMenuOpen"\n  layout="type: box; columns: 6; marginRow: 0.4; marginColumn: 0.4; align: center"\n  menu-genre\n  position="0 0 0.05">\n  <template>\n    <a-entity class="genre" bind-item__data-genre="item">\n      <a-entity\n        mixin="slice"\n        slice9="opacity: 0.9; width: 0.35; left: 70; top: 70; height: 0.35; padding: 0.07"\n        animation__mouseenter2="property: scale; from: 1 1 1; to: 1.03 1.03 1.03; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n        animation__mouseleave2="property: scale; from: 1.03 1.03 1.03; to: 1 1 1; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n        proxy-event__enter="event: mouseenter; to: CHILDREN; captureBubbles: true"\n        proxy-event__leave="event: mouseleave; to: CHILDREN; captureBubbles: true"\n        play-sound__click="event: click; sound: #confirmSound; volume: 0.1"\n        raycaster-target="bindToggle: genreMenuOpen; width: 0.35; height: 0.35"\n        render-order__nonrecursive="menubutton">\n        <a-entity\n          mixin="font"\n          bind-item__text="value: item.name"\n          text="align: center; width: 1.1; color: #888"\n          animation__mouseenter="property: components.text.material.uniforms.color.value; from: #888; to: #FFF; type: color; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n          animation__mouseleave="property: components.text.material.uniforms.color.value; from: #FFF; to: #888; type: color; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n          render-order="menutext"\n          position="0 -0.16 0.001"></a-entity>\n        <a-entity\n          class="genreIcon"\n          bind-item__atlas-uvs="totalColumns: 6; totalRows: 3; row: item.row; column: item.column"\n          geometry="primitive: plane; width: 0.22; height: 0.22; buffer: false; skipCache: true"\n          position="0 0.04 0.002"\n          material="shader: flat; src: #genresImg; transparent: true; color: #888"\n          render-order="menutext"\n          animation__mouseenter="property: components.material.material.color; type: color; from: #888; to: #FFF; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n          animation__mouseleave="property: components.material.material.color; type: color; from: #FAFAFA; to: #888; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"></a-entity>\n      </a-entity>\n    </a-entity>\n  </template>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesdifficultyMenu.html"> --\x3e\n\n\n\n\n<a-entity\n  id="difficultyFilterMenu"\n  bind__visible="difficultyFilterMenuOpen"\n  layout="type: box; columns: 1; marginRow: -0.2"\n  difficulty-filter\n  position="0 0.5 0">\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="All">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'All\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'All\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'All\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'All\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'All\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'All\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'All\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: All"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Easy">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Easy\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Easy\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Easy\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Easy\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Easy\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Easy\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Easy\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Easy"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Normal">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Normal\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Normal\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Normal\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Normal\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Normal\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Normal\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Normal\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Normal"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Hard">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Hard\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Hard\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Hard\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Hard\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Hard\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Hard\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Hard\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Hard"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Expert">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Expert\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Expert\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Expert\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Expert\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Expert\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Expert\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Expert\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Expert"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n    \n  <a-entity class="difficultyFilterOption" data-difficulty-filter="Expertplus">\n    <a-entity class="difficultyFilterBackground"\n        bind__active-item="active: difficultyFilter === \'Expertplus\'"\n        bind__animation__mouseenter="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__animation__mouseleave="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__animation__mouseentervisible="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__animation__mouseleavevisible="enabled: difficultyFilter !== \'Expertplus\'"\n        bind__difficulty-background="enabled: difficultyFilterMenuOpen && difficultyFilter !== \'Expertplus\'"\n        bind__material="color: colorPrimary"\n        animation__mouseenter="property: components.material.material.opacity; to: 0.3; startEvents: mouseenter; dur: 150"\n        animation__mouseleave="property: components.material.material.opacity; to: 0.0; startEvents: mouseleave; dur: 75"\n        event-set__mouseenter="visible: true"\n        event-set__mouseleave="visible: true; _delay: 160"\n        geometry="primitive: plane; width: 0.4; height: 0.2"\n        material="shader: flat; transparent: true; opacity: 0; src: #difficultyImg"\n        position="0 -0.005 0"\n        play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n        render-order="menuitem"></a-entity>\n    <a-entity\n      class="difficultyFilterText"\n      mixin="font"\n      bind__active-text-color="active: difficultyFilter === \'Expertplus\'"\n      active-text-color="color: #fff"\n      difficulty-text="difficulty: Expertplus"\n      text="wrapCount: 30; align: center; color: #8d8d8d"\n      position="0 -0.057 0.001"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesoptionsMenu.html"> --\x3e\n<a-entity\n  id="optionsMenu"\n  bind__visible="optionsMenuOpen"\n  position="0 0.5 0.01"\n  render-order="menutext">\n\n  <a-entity id="optionsTitle" mixin="font" text="align: center; value: OPTIONS; width: 2.5"></a-entity>\n\n  <a-entity id="colorOptionsContainer" position="0 -0.25 0">\n    <a-entity id="colorTitle" mixin="font" text="align: center; value: THEMES; width: 2"></a-entity>\n\n    <a-entity id="colorOptions" position="-0.79 -0.175 0.00" layout="type: box; columns: 10; margin: 0.2" materials-color-menu>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Super Medium"\n          data-color-scheme="default"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #f971c3; color2: #6ff9ea; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Star Warrior"\n          data-color-scheme="blue"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #1e4482; color2: #c27727; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Galactic Royal"\n          data-color-scheme="purple"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #6A39B3; color2: #FAF239; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Space Joker"\n          data-color-scheme="green"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #779E37; color2: #6A39B3; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Solar Flare"\n          data-color-scheme="yellow"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #C2C04C; color2: #E03A3E; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Trail Blazer"\n          data-color-scheme="red"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #E03A3E; color2: #DADADA; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Mint Choco"\n          data-color-scheme="rgb"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #34eb89; color2: #34ebd8; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Cheetah SoL"\n          data-color-scheme="cheetah"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #c27727; color2: #635c54; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n        <a-entity\n          class="colorOption"\n          data-color-name="Ash Nova"\n          data-color-scheme="black"\n          mixin="clickSoundUI hoverSoundUI"\n          animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 150; easing: easeInOutCubic; startEvents: mouseenter"\n          animation__mouseleave="property: scale; to: 1 1 1; dur: 125; easing: easeInOutCubic; startEvents: mouseleave"\n          geometry="primitive: plane; width: 0.15; height: 0.15"\n          material="shader: gradientShader; color1: #555; color2: #FFF; transparent: true"\n          render-order="menutext"\n          bind-toggle__raycastable="optionsMenuOpen">\n        </a-entity>\n      \n    </a-entity>\n\n    <a-entity\n      id="colorName"\n      mixin="font"\n      text="align: center; color: #CCC; width: 1"\n      position="0 -0.35 0.1"\n      render-order="menutext"></a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesplaylistMenu.html"> --\x3e\n<a-entity\n  id="playlistMenu"\n  bind-for="for: playlist; in: playlists; updateInPlace: true; key: name"\n  bind__visible="playlistMenuOpen"\n  layout="type: box; columns: 2; marginRow: -0.23; marginColumn: 1.3; align: center"\n  menu-playlist\n  position="0 0 0.05">\n  <template>\n    \n    <a-entity class="playlist" data-playlist="{{ item.name }}" data-title="{{ item.title }}">\n    \n      <a-entity\n        mixin="slice"\n        slice9="opacity: 0.9; width: 1.2; left: 70; top: 70; height: 0.19; padding: 0.07"\n        animation__mouseenter="property: scale; from: 1 1 1; to: 1.03 1.03 1.03; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n        animation__mouseleave="property: scale; from: 1.03 1.03 1.03; to: 1 1 1; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n        proxy-event__enter="event: mouseenter; to: CHILDREN; captureBubbles: true"\n        proxy-event__leave="event: mouseleave; to: CHILDREN; captureBubbles: true"\n        play-sound__click="event: click; sound: #confirmSound; volume: 0.1"\n        raycaster-target="bindToggle: playlistMenuOpen; width: 1.2; height: 0.19"\n        render-order__nonrecursive="menubutton">\n        <a-entity\n          class="playlistTitle"\n          mixin="font"\n          bind-item__text-uppercase="value: item.title"\n          text="align: left; width: 1.3; color: #CCC"\n          animation__mouseenter="property: components.text.material.uniforms.color.value; from: #CCC; to: #FFF; type: color; startEvents: mouseenter; pauseEvents: mouseleave; easing: easeOutCubic; dur: 150"\n          animation__mouseleave="property: components.text.material.uniforms.color.value; from: #FFF; to: #CCC; type: color; startEvents: mouseleave; pauseEvents: mouseenter; easing: easeOutCubic; dur: 150"\n          render-order="menutext"\n          position="0.11 -0.01 0.001"></a-entity>\n\n        <a-entity\n          class="playlistAuthor"\n          mixin="font"\n          bind-item__text="value: item.author"\n          bind__text="color: colorPrimary"\n          text="align: left; width: 1.1"\n          render-order="menutext"\n          position="0.01 -0.08 0.001"></a-entity>\n      </a-entity>\n    </a-entity>\n  </template>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n</a-entity>\n\n\x3c!-- Search. --\x3e\n<a-entity id="keyboard"\n  bind__super-keyboard="hand: activeHand === \'left\' && \'#leftHand\' || \'#rightHand\'; show: isSearching"\n  super-keyboard="label: Search on beatsaver.com; inputColor: #fff; labelColor: #f0f0f0; width: 1.5; hand: #rightHand; imagePath: assets/img/keyboard; font: assets/fonts/Viga-Regular.json; align: center; model: superkeyboard; keyColor: #fff; injectToRaycasterObjects: false; filters: allupper; keyHoverColor: #fff"\n  position="0.58 1.2 -1.95" keyboard-raycastable="condition: isSearching" search\n  proxy-event__dismiss="event: superkeyboarddismiss; to: a-scene; as: keyboardclose"\n  proxy-event__accept="event: superkeyboardinput; to: a-scene; as: keyboardclose" render-order="menubutton"\n  render-order-recursive>\n</a-entity>\n\n<a-entity id="backButton" mixin="bigMenuTopButton"\n  bind__visible-raycastable="genreMenuOpen || isSearching || difficultyFilterMenuOpen || playlistMenuOpen || optionsMenuOpen"\n  position="0 2.32 -1.96" play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n  proxy-event="event: click; to: a-scene; as: menuback">\n  <a-entity mixin="font" text="align: center; color: #FFF; wrapCount: 20; value: BACK" position="0 -0.07 0.01">\n  </a-entity>\n</a-entity>\n\n\x3c!-- Top menu buttons. --\x3e\n<a-mixin id="bigMenuTopButton" mixin="bigMenuButton" geometry="height: 0.17; width: 0.7"></a-mixin>\n<a-mixin id="bigMenuTopButtonFont" mixin="font" text="width: 0.75" position="0 -0.05 0.01"></a-mixin>\n<a-entity id="menuTopButtons"\n  animation__position="property: object3D.position.z; to: -1.98; dur: 1500; easing: easeInOutCubic; delay: 300; startEvents: startgame"\n  layout="type: line; margin: 0.65" position="-0.95 2.30 -1.96"\n  proxy-event="event: startgame; to: #searchButton, #difficultyButton, #genreButton, #playlistButton, #optionButton">\n\n  \x3c!-- Playlist menu toggle. --\x3e\n    <a-entity id="playlistButtons">\n    <a-entity id="playlistButton"\n      mixin="bigMenuTopButton"\n      bind__menu-playlist-button="isFavorited: menuSelectedChallenge.isFavorited; selectedChallenge: menuSelectedChallenge.id"\n      bind__visible-raycastable="mainMenuActive && !playlist"\n      material="opacity: 0"\n      animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n      play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n      proxy-event="event: click; to: a-scene; as: playlistmenuopen">\n      <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: PLAYLISTS" bind__visible="!isMenuOpening"></a-entity>\n    </a-entity>\n\n    <a-entity id="clearPlaylistButton"\n      mixin="bigMenuTopButton"\n      bind__visible-raycastable="menuActive && !!playlist"\n      play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n      play-sound__click="event: click; sound: #clearSound"\n      proxy-event="event: click; to: a-scene; as: playlistclear">\n      <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: CLEAR PLAYLIST"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="playlistText"\n      mixin="font"\n      bind__text="color: colorPrimary"\n      bind__text-uppercase="value: playlistTitle"\n      bind__visible="mainMenuActive && !!playlist"\n      text="align: center; baseline: bottom; wrapCount: 30; width: 0.7"\n      position="0 0.1 0.035"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \x3c!-- Search toggle. --\x3e\n    <a-entity id="searchButtons">\n    <a-entity\n      id="searchButton"\n      mixin="bigMenuTopButton"\n      bind__visible-raycastable="mainMenuActive && !search.query"\n      material="opacity: 0"\n      animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n      play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n      proxy-event="event: click; to: a-scene; as: keyboardopen">\n      <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: SEARCH" bind__visible="!isMenuOpening"></a-entity>\n    </a-entity>\n\n    <a-entity id="searchClearButton"\n      mixin="bigMenuTopButton"\n      bind__visible-raycastable="mainMenuActive && !!search.query"\n      play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n      play-sound__click="event: click; sound: #clearSound"\n      proxy-event="event: click; to: a-scene; as: searchclear">\n      <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: CLEAR SEARCH"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="searchText"\n      mixin="font"\n      bind__text="color: colorPrimary"\n      bind__text-uppercase="value: search.queryText"\n      bind__visible="mainMenuActive && !!search.query"\n      text="align: center; wrapCount: 20"\n      position="0 0.1 0.035"\n      render-order="menutext"></a-entity>\n  </a-entity>\n\n  \x3c!-- Difficulty menu toggle. --\x3e\n  \x3c!--   <a-entity id="difficultyFilter">\n    <a-entity id="difficultyButton"\n      mixin="bigMenuTopButton"\n      material="opacity: 0"\n      bind__visible-raycastable="mainMenuActive"\n      animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n      play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n      proxy-event="event: click; to: a-scene; as: difficultyfiltermenuopen">\n      <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: DIFFICULTY" bind__visible="!isMenuOpening"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="difficultyFilterText"\n      mixin="font"\n      bind__difficulty-text="difficulty: difficultyFilter"\n      bind__text="color: colorPrimary"\n      bind__visible="mainMenuActive && difficultyFilter !== \'All\'"\n      text="align: center; wrapCount: 20"\n      position="0 0.1 0.035"\n      render-order="menutext"></a-entity>\n  </a-entity> --\x3e\n\n  \x3c!-- Genre menu toggle. --\x3e\n    <a-entity id="genreButtons">\n    <a-entity id="genreButton"\n      mixin="bigMenuTopButton"\n      bind__visible-raycastable="mainMenuActive && !genre"\n      material="opacity: 0"\n      animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n      play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n      proxy-event="event: click; to: a-scene; as: genremenuopen">\n      <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: GENRES" bind__visible="!isMenuOpening"></a-entity>\n    </a-entity>\n\n    <a-entity id="clearGenreButton"\n      mixin="bigMenuTopButton"\n      bind__visible-raycastable="mainMenuActive && !!genre"\n      play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n      play-sound__click="event: click; sound: #clearSound"\n      proxy-event="event: click; to: a-scene; as: genreclear">\n      <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: CLEAR GENRE"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="genreText"\n      mixin="font"\n      bind__text="color: colorPrimary"\n      bind__text-uppercase="value: genre"\n      bind__visible="mainMenuActive && !!genre"\n      text="align: center; wrapCount: 20"\n      position="0 0.1 0.035"\n      render-order="menutext"></a-entity>\n  </a-entity>\n</a-entity>\n\n\x3c!-- Options menu toggle. --\x3e\n<a-entity id="optionsButtons" position="0 0.45 -1.96">\n  <a-entity id="optionButton" mixin="bigMenuButton" bind__visible-raycastable="mainMenuActive" material="opacity: 0"\n    animation__opacity="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; dur: 1000; delay: 300; startEvents: startgame"\n    play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.1"\n    proxy-event="event: click; to: a-scene; as: optionsmenuopen">\n    <a-entity mixin="bigMenuTopButtonFont" text="align: center; color: #FFF; wrapCount: 20; value: THEMES"\n      bind__visible="!isMenuOpening"></a-entity>\n  </a-entity>\n</a-entity>\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesmodes.html"> --\x3e\n<a-mixin\n  id="modeAnimations"\n  animation__select="property: object3D.position.z; to: 0.06; dur: 200; easing: easeOutQuad; startEvents: select"\n  animation__deselect="property: object3D.position.z; to: 0; dur: 200; easing: easeOutQuad; startEvents: deselect"></a-mixin>\n\n<a-mixin\n  id="modeThumbAnimations"\n  animation__select="property: components.material.material.color; type: color; to: #FFF; dur: 200; easing: easeOutQuad; startEvents: select"\n  animation__deselect="property: components.material.material.color; type: color; to: #888; dur: 200; easing: easeOutQuad; startEvents: deselect"></a-mixin>\n\n<a-mixin\n  id="modeBackgroundHover"\n  animation__mouseenter="property: components.material.material.uniforms.borderWidth.value; from: 0.002; to: 0.01; startEvents: mouseenter; pauseEvents: mouseleave; easing: linear; dur: 150"\n  animation__mouseleave="property: components.material.material.uniforms.borderWidth.value; from: 0.01; to: 0.002; startEvents: mouseleave; pauseEvents: mouseenter; easing: linear; dur: 150"\n  play-sound__hover="event: mouseenter; sound: #hoverSound; volume: 0.3"\n  play-sound__click="event: click; sound: #confirmSound; volume: 0.1"\n\n  ></a-mixin>\n\n<a-mixin\n  id="modeBackgroundSelect"\n  animation__select="property: components.material.material.uniforms.brightness.value; to: 0.5; startEvents: select; easing: easeOutQuad; dur: 200"\n  animation__deselect="property: components.material.material.uniforms.brightness.value; to: 0.1; startEvents: deselect; easing: easeOutQuad; dur: 200"\n  animation__select2="property: components.material.material.uniforms.borderWidth.value; to: 0.015; startEvents: select; easing: linear; dur: 200"\n  animation__deselect2="property: components.material.material.uniforms.borderWidth.value; to: 0.002; startEvents: deselect; easing: linear; dur: 200"></a-mixin>\n\n\n\n<a-entity\n  id="modes"\n  bind__menu-mode="colorScheme: colorScheme; hasVR: hasVR"\n  bind__position="hasVR && \'-2.56 1.3 -0.7\' || \'-2.56 1 -0.7\'"\n  bind__visible="menuActive && !isMenuOpening"\n  rotation="0 60 0"\n  render-order="menuitem">\n\n  <a-entity id="modeIcon"\n    geometry="primitive: cylinder;  height: 0.01; segmentsHeight: 1; radius: 0.1; segmentsRadial: 3"\n    rotation="0 90 90"\n    position="-1.275 0.32 0.1"\n    materials="name: merkaba"\n    animation="property: object3D.position.x; from: -1.275; to: -1.3; dir: alternate; easing: easeOutQuad; loop: true; dur: 900"></a-entity>\n\n  <a-entity id="mode2d" bind__visible="!hasVR">\n    \n\n<a-entity\n  id="moderide2d"\n  class="modeItem"\n  data-mode="ride"\n  data-name="ride2d"\n  position="0 0.75 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && !hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: RIDE\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeRideImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Relax and enjoy the ride.; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n    \n\n<a-entity\n  id="modeviewer2d"\n  class="modeItem"\n  data-mode="classic"\n  data-name="viewer2d"\n  position="0 0 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && !hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: VIEWER\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeViewerImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: View the beat map.\n\nConnect a VR headset\nwith controllers\nto experience\nmore modes!; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n  </a-entity>\n\n  <a-entity id="modeVR" bind__visible="hasVR">\n    \n\n<a-entity\n  id="modepunchvr"\n  class="modeItem"\n  data-mode="punch"\n  data-name="punchvr"\n  position="0 0.75 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: PUNCH\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modePunchImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Punch the beats, mind\ncolor.\n\nAvoid all things yellow.\n\nPunch harder\n for better score.; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n    \n\n<a-entity\n  id="moderidevr"\n  class="modeItem"\n  data-mode="ride"\n  data-name="ridevr"\n  position="0 0 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: RIDE\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeRideImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Relax and enjoy the ride.\n\nTake a quick breather.\n\nNo score!; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n    \n\n<a-entity\n  id="modeclassicvr"\n  class="modeItem"\n  data-mode="classic"\n  data-name="classicvr"\n  position="0 -0.75 0"\n  mixin="modeAnimations">\n  <a-entity\n    class="modeBackground"\n    bind-toggle__raycastable="menuActive && hasVR"\n    position="0 0 -0.01"\n    geometry="primitive: plane; width: 3; height: 0.8"\n    material="shader: panelShader; brightness: 0.1; ratio: 4; borderWidth: 0.002"\n    mixin="modeBackgroundHover modeBackgroundSelect"></a-entity>\n  <a-entity\n    class="modeTitle"\n    mixin="font"\n    text="align: left; value: CLASSIC\nMODE; lineHeight: 45; width: 2.6"\n    render-order="menutext"\n    position="0.14 0.05 0"></a-entity>\n  <a-entity\n    class="modeThumb"\n    mixin="modeThumbAnimations"\n    geometry="primitive: plane; width: 0.7; height: 0.5"\n    material="src: #modeClassicImg; shader: flat"\n    position="-0.20 0 0"></a-entity>\n  <a-entity\n    class="modeInstructions"\n    mixin="font"\n    render-order="menutext"\n    bind__text="color: colorPrimary"\n    text="value: Cut the beats, mind\ncolor and direction.\n\nAvoid all things yellow.\n\nSwing fast and accurate\nfor better score.; width: 1.6; lineHeight: 47"\n    position="1.1 -0.05 0"></a-entity>\n</a-entity>\n\n  </a-entity>\n\n  <a-entity\n    id="loadingTipsContainer"\n    bind__visible="menuActive"\n    position="0 -1.3 0.1"\n    rotation="0 0 0">\n\n    <a-entity\n      id="loadingTipsBackground"\n      bind-toggle__raycastable="menuActive"\n      render-order="menu"\n      geometry="primitive: plane; width: 1.5; height: 0.3"\n      material="shader: panelShader; ratio: 1.15; borderRadius: 0.4"\n      render-order="menubutton"\n      position="0 0 -0.03"></a-entity>\n\n    <a-entity\n      id="loadingTipsText"\n      mixin="font"\n      bind__text="color: colorPrimary"\n      text="align: center; wrapCount: 30; width: 1; value: Press down on thumbstick center to open menu while playing."\n      render-order="menutext"\n      position="0 -0.02 0.001"></a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n  \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templates\victory.html"> --\x3e\n\x3c!-- Victory. --\x3e\n<a-entity\n  id="victoryInfoContainer"\n  position="0 1.5 -2"\n  bind__visible="isVictory">\n\n  <a-entity\n    id="victoryAccuracyRing"\n    bind__material="color: colorPrimary"k\n    bind__victory-accuracy-ring="accuracy: score.finalAccuracy"\n    animation="property: components.material.material.uniforms.progress.value; from: 0; easing: easeOutQuad; delay: 500; dur: 2500; autoplay: false"\n    geometry="primitive: plane; width: 0.7; height: 0.7"\n    material="shader: ring; transparent: true; radiusInner: 0.8; blending: additive; depthWrite: false"\n    position="0 0.18 0"\n    render-order="victory"></a-entity>\n\n  <a-entity\n    id="victoryInfoRank"\n    class="accuracyTextCounterSubscribe"\n    bind__animation="enabled: isVictory"\n    bind__victory-rank="isVictory: isVictory; rank: score.rank"\n    bind-toggle__raycastable="isVictory"\n    scale="0 0 0"\n    position="0 -0.034 0"\n    animation__rotation="property: object3D.rotation.y; from: 0; to: -360; loop: true; easing: linear; dur: 5000; startEvents: textcounterdone"\n    animation__scale="property: scale; from: 0 0 0; to: 1 1 1; loop: false; easing: easeOutQuad; dur: 300; startEvents: textcounterdone"\n    play-sound="sound: #victorySound; event: textcounterdone"\n    render-order="menuitemtext"\n    text-geometry="font: #VigaRegularThree; bevelEnabled: true; bevelSize: 0.01; bevelThickness: 0.01; curveSegments: 7; height: 0.15; size: 0.4"></a-entity>\n\n  <a-entity\n    id="victoryInfoAccuracy"\n    class="accuracyTextCounterSubscribe"\n    mixin="font"\n    bind__text="color: colorSecondary; opacity: isVictory && 0 || 0; value: score.score + \' POINTS\'"\n    animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n    text="align: left; wrapCount: 22; baseline: top; width: 0.81"\n    position="0.85 0.2 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryInfoBeatsHit"\n    class="accuracyTextCounterSubscribe"\n    mixin="font"\n    bind__text="color: colorSecondary; opacity: isVictory && 0 || 0; value: score.beatsText"\n    animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n    text="align: left; wrapCount: 22; baseline: top; width: 0.81"\n    position="0.85 0.1 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryInfoAccuracy"\n    mixin="font"\n    bind__text="color: colorTertiary"\n    text="value: 0; align: center; wrapCount: 15; baseline: top; width: 2.25"\n    bind__text-counter="enabled: isVictory; value: score.finalAccuracy"\n    text-counter="suffix: %"\n    position="0 -0.47 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryInfoMaxCombo"\n    mixin="font"\n    bind__text="color: colorSecondary"\n    bind__text-counter="enabled: isVictory; value: score.maxCombo"\n    text="align: center; wrapCount: 22; baseline: top; width: 1"\n    text-counter="prefix: MAX STREAK: ; emit: true"\n    proxy-event="event: textcounterdone; to: .accuracyTextCounterSubscribe"\n    position="0 -0.58 0"\n    render-order="menuitemtext"></a-entity>\n\n  <a-entity\n    id="victoryButtons"\n    play-sound="event: mouseenter; sound: #hoverSound; volume: 0.03"\n    play-sound__click="event: click; sound: #confirmSound; volume: 0.25"\n    render-order="menubutton">\n    <a-entity\n      id="victoryRestartButton"\n      class="accuracyTextCounterSubscribe"\n      mixin="gameMenuButton"\n      bind-toggle__raycastable="isVictory"\n      bind__material="opacity: isVictory && 0 || 0"\n      animation="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n      position="-0.56 -0.79 0.05"\n      proxy-event="event: click; to: a-scene; as: gamemenurestart">\n      <a-entity\n        class="accuracyTextCounterSubscribe"\n        mixin="gameMenuButtonText"\n        bind__text="opacity: isVictory && 0 || 0"\n        animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n        render-order="menuitemtext"\n        text="opacity: 0; value: PLAY AGAIN"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="victoryExitButton"\n      class="accuracyTextCounterSubscribe"\n      mixin="gameMenuButton"\n      bind-toggle__raycastable="isVictory"\n      bind__material="opacity: isVictory && 0 || 0"\n      animation="property: components.material.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n      position="0.56 -0.79 0.05"\n      proxy-event="event: click; to: a-scene; as: gamemenuexit">\n      <a-entity\n        class="accuracyTextCounterSubscribe"\n        mixin="gameMenuButtonText"\n        bind__text="opacity: isVictory && 0 || 0"\n        animation="property: components.text.material.uniforms.opacity.value; from: 0; to: 1; startEvents: textcounterdone"\n        render-order="menuitemtext"\n        text="opacity: 0; value: BACK TO MENU"></a-entity>\n    </a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n\n  <a-mixin\n    id="cursorMesh"\n    material="shader: flat; transparent: true; src: #cursorMeshImg; depthTest: false"\n    sub-object="from: #cursorLaser; name: glow"></a-mixin>\n\n  <a-entity\n    id="curve"\n    material="shader: supercurve"\n    supercurve\n    supercurve-color\n    render-order="curve"></a-entity>\n\n  <a-entity\n    id="tunnelsContainer"\n    render-order="curve"\n    bind__visible="isPlaying || isPaused"></a-entity>\n\n  <a-entity\n    id="beatContainer"\n    beat-hit-sound\n    bind__visible="isPlaying"></a-entity>\n\n  <a-entity\n    id="wallContainer"\n    bind__visible="isPlaying"></a-entity>\n\n  <a-entity id="curveFollowRig"\n    bind__curve-follow-rig-reset="isVictory: isVictory"\n    bind__supercurve-follow="enabled: isPlaying; speed: speed"\n    supercurve-follow="target: #curve">\n\n    \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesstageFollow.html"> --\x3e\n<a-entity\n  id="tube"\n  bind__visible="isPlaying"\n  rotation="90 180 0"\n  position="0 0 -5"\n  geometry="primitive: cylinder; radius: 3; openEnded: true; height: 20"\n  materials="name: tube"\n  animation="property: components.materials.material.uniforms.opacity.value; from: 1; to: 0; easing: easeInOutCubic; startEvents: pulse"></a-entity>\n\n<a-entity\n  id="platformShadow"\n  obj-model="obj: #homeShadowObj"\n  position="0 0.02 0"\n  material="src: #homeShadowImg; shader: flat; blending: multiply; transparent: true;"\n  raycastable-game\n  render-order="curveshadow"\n  stepback></a-entity>\n\n<a-entity\n  id="platform"\n  obj-model="obj: #homeObj"\n  materials="name: home"\n  bind__materials="animate: isPlaying"></a-entity>\n\n<a-entity\n  id="sideGlows"\n  bind__visible="isPlaying || isPaused">\n  <a-entity\n    id="leftSideGlow"\n    geometry="primitive: plane; width: 8; height: 2"\n    materials="name: leftsideglow"\n    position="-2.1 .5 -3"\n    rotation="20 -90 0"\n    render-order="sideglow">\n  </a-entity>\n  <a-entity\n    id="rightSideGlow"\n    geometry="primitive: plane; width: 8; height: 2"\n    materials="name: rightsideglow"\n    position="2.1 .5 -3"\n    rotation="-20 -90 0"\n    render-order="sideglow">\n  </a-entity>\n</a-entity>\n\n<a-entity\n  id="light"\n  light="type: hemisphere; color: #666"\n  position="0 10 20"></a-entity>\n\n\n\x3c!-- </require> --\x3e</require>\n    \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesscore.html"> --\x3e\n<a-mixin\n  id="scoreText"\n  mixin="font"\n  text="lineHeight: 40; color: #FAFAFA; letterSpacing: -2; align: center; opacity: 0.7"></a-mixin>\n\n<a-entity\n  id="scoreContainer"\n  bind__score-texts="isLoading: isLoading"\n  bind__visible="score.active"\n  render-order="score">\n\n  <a-entity\n    id="songProgressRing"\n    bind__material="color: colorSecondary"\n    bind__song-progress-info="enabled: isPlaying || isPaused && challenge.isBeatsPreloaded"\n    geometry="primitive: plane; width: 0.57; height: 0.03"\n    material="shader: flat"\n    position="1.525 0.1 -3.94"\n    rotation="-30 0 0">\n  </a-entity>\n\n  <a-entity id="scoreNumberContainer" position="1.5 0.13 -4">\n    <a-entity\n      id="combo"\n      mixin="scoreText"\n      bind__text="color: colorPrimary; value: \'STREAK  \' + score.combo"\n      text="width: 3.5; align: left; anchor: left"\n      rotation="-20 0 0"\n      position="-0.025 0.175 0"></a-entity>\n\n    <a-entity\n      id="accuracy"\n      mixin="scoreText"\n      bind__text="color: colorSecondary; value: score.accuracyInt + \'%\' + \' / \' + score.score"\n      text="width: 3.5; align: left; anchor: left"\n      rotation="-20 0 0"></a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n    \x3c!-- <require path="C:Userskfgithub\vr-exercise-codesrc\templatesgameMenu.html"> --\x3e\n<a-mixin\n  id="gameMenuButton"\n  mixin="bigMenuButton"\n  animation__mouseenter="property: components.material.material.uniforms.activePanel.value; from: 0; to: 1; startEvents: mouseenter; pauseEvents: mouseleave; dur: 70"\n  animation__mouseleave="property: components.material.material.uniforms.activePanel.value; from: 1; to: 0; startEvents: mouseleave; pauseEvents: mouseenter; dur: 70"\n  geometry="height: 0.28"></a-mixin>\n\n<a-mixin\n  id="gameMenuButtonText"\n  mixin="font"\n  position="0 -0.08 0.01"\n  render-order="menutext"\n  text="align: center; wrapCount: 17"></a-mixin>\n\n\x3c!-- Titles. --\x3e\n<a-entity id="inGameMenuTitles" position="0 2.2 -2.3">\n  <a-entity mixin="gameMenuButtonText" text="value: GAME OVER; color: #f01978; width: 3.5" bind__visible="isGameOver"></a-entity>\n  <a-entity mixin="gameMenuButtonText" text="value: SONG CLEARED; color: #FFF; width: 3.5" bind__visible="isVictory" position="0 0.1 0"></a-entity>\n  <a-entity mixin="gameMenuButtonText" bind__text="color: colorPrimary" text="value: PAUSED; width: 3.5" bind__visible="isPaused"></a-entity>\n</a-entity>\n\n<a-entity\n  id="gameMenu"\n  bind__visible="isPaused || isVictory"\n  position="0 1.5 -2"\n  play-sound="event: mouseenter; sound: #hoverSound; volume: 0.1"\n  play-sound__click="event: click; sound: #confirmSound; volume: 0.25">\n\n  \x3c!-- Actions. --\x3e\n  <a-entity\n    id="resumeButton"\n    mixin="gameMenuButton"\n    bind-toggle__raycastable="isPaused"\n    bind__visible="isPaused"\n    position="0 0.35 0"\n    proxy-event="event: click; to: a-scene; as: gamemenuresume">\n    <a-entity mixin="gameMenuButtonText" text="value: RESUME"></a-entity>\n  </a-entity>\n\n  <a-entity\n    id="restartButton"\n    mixin="gameMenuButton"\n    bind__visible="!isVictory"\n    bind-toggle__raycastable="isPaused || isGameOver"\n    proxy-event="event: click; to: a-scene; as: gamemenurestart">\n    <a-entity mixin="gameMenuButtonText" text="value: RESTART SONG"></a-entity>\n  </a-entity>\n\n  <a-entity\n    id="exitButton"\n    mixin="gameMenuButton"\n    bind__visible="!isVictory"\n    bind-toggle__raycastable="isPaused || isGameOver"\n    position="0 -0.35 0"\n    proxy-event="event: click; to: a-scene; as: gamemenuexit">\n    <a-entity mixin="gameMenuButtonText" text="value: EXIT TO MENU"></a-entity>\n  </a-entity>\n\n  \x3c!-- Song info. --\x3e\n  <a-entity id="gameMenuSongInfoContainer"\n    position="0 -1 0.15473"\n    rotation="-20 0 0"\n    song-info-positioner\n    bind__song-info-positioner="victory: isVictory">\n    <a-entity id="gameMenuSongBackground"\n      bind-toggle__raycastable="isPaused || isVictory"\n      render-order="menu"\n      geometry="primitive: plane; width: 2.5; height: 0.3"\n      material="shader: panelShader; transparent: true; ratio: 4; borderRadius: 0.5; borderWidth: 0.02"\n      position="0 0 -0.03"></a-entity>\n\n    <a-entity id="gameMenuSongImage"\n      copy-texture="from: #menuSelectedChallengeImage"\n      geometry="primitive: plane; buffer: false; skipCache: true; height: 0.3; width: 0.3"\n      material="shader: flat"\n      position="-1 0 0"></a-entity>\n\n    <a-entity id="gameMenuSongInfo">\n      <a-entity\n        id="gameMenuSongName"\n        position="0 0.01 0"\n        mixin="font" text="align: center; color: #fff; wrapCount: 30; baseline: top; lineHeight: 36; width: 1.2"\n        bind__text="value: challenge.metadata.songName"></a-entity>\n      <a-entity\n        id="gameMenuSongSubName"\n        mixin="font"\n        position="0 -0.09 0"\n        bind__text="color: colorSecondary"\n        bind__text-truncate="value: challenge.metadata.songSubName + \' - \' + challenge.metadata.songAuthorName"\n        text-truncate="length: 80"\n        text="wrapCount: 80; align: center; width: 2.4" bind__text="value: menuSelectedChallenge.songSubName"></a-entity>\n    </a-entity>\n  </a-entity>\n</a-entity>\n\x3c!-- </require> --\x3e</require>\n\n    \x3c!-- Beat pieces, explosions, fx, and weapon trail. --\x3e\n    <a-entity id="rigContainer"></a-entity>\n\n    \x3c!-- Supercut FX rings. --\x3e\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n      <a-entity class="superCutFx" mixin="superCut"></a-entity>\n    \n\n    \x3c!-- Player. --\x3e\n    <a-entity id="cameraRig">\n      <a-entity\n        id="camera"\n        bind__wasd-controls="enabled: !inVr"\n        position="0 1.6 0.5"\n        camera="far: 10000"\n        look-controls\n        player-height\n        wasd-controls="acceleration: 15"></a-entity>\n      <a-entity\n        id="cameraWallCollider"\n        bind__raycaster__wall="enabled: isPlaying && gameMode !== \'ride\'"\n        proxy-event__wallhitstart="event: raycaster-intersection; to: a-scene; as: wallhitstart"\n        proxy-event__wallhitend="event: raycaster-intersection-cleared; to: a-scene; as: wallhitend"\n        follow-position="target: #camera"\n        raycaster__wall="objects: [data-wall-active]; interval: 150; direction: 0 -1 0; far: 5"\n        visible="false"></a-entity>\n    </a-entity>\n\n    <a-entity\n      id="controllerRig"\n      proxy-event="event: recentered; to: #cameraRig; captureBubbles: true; as: recenter">\n      \n\n      \n        <a-entity id="leftHand"\n          class="weapon"\n          bind__hand-swapper="enabled: rightRaycasterActive"\n          bind__haptics-wall="enabled: isPlaying && gameMode === \'classic\'"\n          bind__headfist="isPlaying: isPlaying"\n          bind__menu-controls="enabled: mainMenuActive"\n          bind__pauser="enabled: isPlaying"\n          bind__punch="enabled: isPlaying && gameMode === \'punch\'"\n          bind__raycaster="enabled: leftRaycasterActive"\n          bind__raycaster__game="enabled: isPlaying && (gameMode === \'classic\' || gameMode === \'punch\')"\n          bind__blade="enabled: isPlaying && gameMode === \'classic\'"\n          bind__weapon-particles="enabled: isPlaying; gameMode: gameMode"\n          bind__trail="colorScheme: colorScheme; enabled: isPlaying && gameMode === \'classic\'"\n          controller="hand: left"\n          data-hand="left"\n          haptics="events: mouseenter; dur: 35; force: 0.075"\n          haptics__beat="events: beathaptic; dur: 90; force: 0.55"\n          haptics__draw="events: drawblade; dur: 750; force: 0.025"\n          haptics__plume="events: plumepulse; dur: 35; force: 0.1"\n          headfist="hand: left"\n          raycaster="objects: [raycastable]; far: 5; showLine: false"\n          raycaster__game="objects: [raycastable-game]; far: 1; interval: 71; direction: 0 1 -1"\n          weapon="hand: left"\n          weapon-particles="hand: left"\n          thumb-controls\n          thumb-controls-debug="enabled: false; hand: left; controllerType: vive-controls"\n          render-order="weapon"\n          trail="color: primary; hand: left">\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'">\n            <a-entity\n              id="leftLaser"\n              class="laser"\n              bind__material="color: colorPrimary"\n              bind__cursor-laser="enabled: activeHand === \'left\' && !isPlaying"\n              geometry="primitive: cylinder; height: 1; radius: 0.005"\n              material="shader: flat; opacity: 0.25; transparent: true"\n              rotation="-90 0 0"></a-entity>\n          </a-entity>\n\n          \x3c!-- Blade. --\x3e\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'"\n                    bind__rotation="controllerType.indexOf(\'oculus\') !== -1 && \'135 0 0\' || \'90 0 0\'">\n            <a-entity\n              class="bladeContainer"\n              bind__visible="isPlaying && gameMode === \'classic\'"\n              animation="property: scale; from: 0 0 0; to: 1 1 1; dur: 750; easing: linear; startEvents: drawblade"\n              scale="0.001 0.001 0.001">\n              <a-entity\n                class="blade bladeleft"\n                obj-model="obj: #weaponObj"\n                materials="name: leftWeapon"\n                render-order="weapon"\n                position="0 -0.43 0">\n                <a-entity class="bladeTipHelper" position="0 -0.45 0"></a-entity>\n              </a-entity>\n            </a-entity>\n\n            <a-entity\n              class="bladeHandle"\n              bind__visible="!isPlaying || gameMode === \'classic\'"\n              obj-model="obj: #weaponHandleObj"\n              materials="name: leftWeaponHandle">\n              <a-entity class="bladeHandleHelper"></a-entity>\n            </a-entity>\n          </a-entity>\n\n          \x3c!-- Punch. --\x3e\n          <a-entity\n            id="leftpunch"\n            class="punch"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'punch\'"\n            bind__position="has3DOFVR && \'0 0 -0.75\' || \'0 0 0\'"\n            rotation="0 0 0">\n              <a-entity\n                class="punchFist"\n                obj-model="obj: #leftFistObj"\n                materials="name: leftFist"></a-entity>\n              <a-entity\n                class="punchBbox"\n                geometry="primitive: box; width: 0.2; height: 0.23; depth: 0.15"\n                material="shader: flat; opacity: 0.5"\n                position="0 0.05 0.1"\n                rotation="30 0 0"\n                visible="false"></a-entity>\n              <a-entity\n                obj-model="obj: #leftFistWeaponObj"\n                materials="name: leftFistWeapon"></a-entity>\n          </a-entity>\n\n          \x3c!-- Ride. --\x3e\n          <a-entity\n            id="leftstar"\n            class="handStar"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'ride\'">\n              <a-entity\n                class="handStar"\n                bind__material="colorPrimary: colorPrimary; colorSecondary: colorSecondary; colorTertiary: colorTertiary"\n                geometry="primitive: sphere; radius: 0.1"\n                material="shader: handStar"\n                animation__pulse="property: components.material.material.uniforms.pulse.value; from: 2; to: 0; dur: 300; startEvents: plumepulse; easing: easeInOutQuad"\n                animation__scale="property: scale; from: 2 2 2; to: 1 1 1; dur: 1200; startEvents: plumepulse; easing: easeInOutQuad"></a-entity>\n          </a-entity>\n        </a-entity>\n\n        <a-entity\n          id="leftCursorMesh"\n          mixin="cursorMesh"\n          bind__cursor-mesh="active: leftRaycasterActive && !isPlaying"\n          bind__material="color: colorPrimary"\n          cursor-mesh="cursorEl: #leftHand"\n          material\n          render-order="cursor"\n          scale="1.3 1.3 1.3"></a-entity>\n      \n      \n        <a-entity id="rightHand"\n          class="weapon"\n          bind__hand-swapper="enabled: leftRaycasterActive"\n          bind__haptics-wall="enabled: isPlaying && gameMode === \'classic\'"\n          bind__headfist="isPlaying: isPlaying"\n          bind__menu-controls="enabled: mainMenuActive"\n          bind__pauser="enabled: isPlaying"\n          bind__punch="enabled: isPlaying && gameMode === \'punch\'"\n          bind__raycaster="enabled: rightRaycasterActive"\n          bind__raycaster__game="enabled: isPlaying && (gameMode === \'classic\' || gameMode === \'punch\')"\n          bind__blade="enabled: isPlaying && gameMode === \'classic\'"\n          bind__weapon-particles="enabled: isPlaying; gameMode: gameMode"\n          bind__trail="colorScheme: colorScheme; enabled: isPlaying && gameMode === \'classic\'"\n          controller="hand: right"\n          data-hand="right"\n          haptics="events: mouseenter; dur: 35; force: 0.075"\n          haptics__beat="events: beathaptic; dur: 90; force: 0.55"\n          haptics__draw="events: drawblade; dur: 750; force: 0.025"\n          haptics__plume="events: plumepulse; dur: 35; force: 0.1"\n          headfist="hand: right"\n          raycaster="objects: [raycastable]; far: 5; showLine: false"\n          raycaster__game="objects: [raycastable-game]; far: 1; interval: 70; direction: 0 1 -1"\n          weapon="hand: right"\n          weapon-particles="hand: right"\n          thumb-controls\n          thumb-controls-debug="enabled: false; hand: right; controllerType: vive-controls"\n          render-order="weapon"\n          trail="color: secondary; hand: right">\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'">\n            <a-entity\n              id="rightLaser"\n              class="laser"\n              bind__material="color: colorSecondary"\n              bind__cursor-laser="enabled: activeHand === \'right\' && !isPlaying"\n              geometry="primitive: cylinder; height: 1; radius: 0.005"\n              material="shader: flat; opacity: 0.25; transparent: true"\n              rotation="-90 0 0"></a-entity>\n          </a-entity>\n\n          \x3c!-- Blade. --\x3e\n          <a-entity bind__position="has3DOFVR && \'0 0 -0.5\' || \'0 0 0\'"\n                    bind__rotation="controllerType.indexOf(\'oculus\') !== -1 && \'135 0 0\' || \'90 0 0\'">\n            <a-entity\n              class="bladeContainer"\n              bind__visible="isPlaying && gameMode === \'classic\'"\n              animation="property: scale; from: 0 0 0; to: 1 1 1; dur: 750; easing: linear; startEvents: drawblade"\n              scale="0.001 0.001 0.001">\n              <a-entity\n                class="blade bladeright"\n                obj-model="obj: #weaponObj"\n                materials="name: rightWeapon"\n                render-order="weapon"\n                position="0 -0.43 0">\n                <a-entity class="bladeTipHelper" position="0 -0.45 0"></a-entity>\n              </a-entity>\n            </a-entity>\n\n            <a-entity\n              class="bladeHandle"\n              bind__visible="!isPlaying || gameMode === \'classic\'"\n              obj-model="obj: #weaponHandleObj"\n              materials="name: rightWeaponHandle">\n              <a-entity class="bladeHandleHelper"></a-entity>\n            </a-entity>\n          </a-entity>\n\n          \x3c!-- Punch. --\x3e\n          <a-entity\n            id="rightpunch"\n            class="punch"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'punch\'"\n            bind__position="has3DOFVR && \'0 0 -0.75\' || \'0 0 0\'"\n            rotation="0 0 0">\n              <a-entity\n                class="punchFist"\n                obj-model="obj: #rightFistObj"\n                materials="name: rightFist"></a-entity>\n              <a-entity\n                class="punchBbox"\n                geometry="primitive: box; width: 0.2; height: 0.23; depth: 0.15"\n                material="shader: flat; opacity: 0.5"\n                position="0 0.05 0.1"\n                rotation="30 0 0"\n                visible="false"></a-entity>\n              <a-entity\n                obj-model="obj: #rightFistWeaponObj"\n                materials="name: rightFistWeapon"></a-entity>\n          </a-entity>\n\n          \x3c!-- Ride. --\x3e\n          <a-entity\n            id="rightstar"\n            class="handStar"\n            render-order="weapon"\n            bind__visible="isPlaying && gameMode === \'ride\'">\n              <a-entity\n                class="handStar"\n                bind__material="colorPrimary: colorPrimary; colorSecondary: colorSecondary; colorTertiary: colorTertiary"\n                geometry="primitive: sphere; radius: 0.1"\n                material="shader: handStar"\n                animation__pulse="property: components.material.material.uniforms.pulse.value; from: 2; to: 0; dur: 300; startEvents: plumepulse; easing: easeInOutQuad"\n                animation__scale="property: scale; from: 2 2 2; to: 1 1 1; dur: 1200; startEvents: plumepulse; easing: easeInOutQuad"></a-entity>\n          </a-entity>\n        </a-entity>\n\n        <a-entity\n          id="rightCursorMesh"\n          mixin="cursorMesh"\n          bind__cursor-mesh="active: rightRaycasterActive && !isPlaying"\n          bind__material="color: colorSecondary"\n          cursor-mesh="cursorEl: #rightHand"\n          material\n          render-order="cursor"\n          scale="1.3 1.3 1.3"></a-entity>\n      \n    </a-entity>\n\n    <a-entity\n      id="stepback"\n      position="0 1.6 -1.55"\n      geometry="primitive: plane; width: 0.25; height: 0.25;"\n      material="shader: flat; src: #stepbackImg; transparent: true; opacity: 0"\n      render-order="stepback"></a-entity>\n  </a-entity>\n\n  <a-entity\n    id="mouseCursor"\n    bind__raycaster="enabled: !inVR"\n    cursor="rayOrigin: mouse"\n    raycaster="objects: [raycastable]"></a-entity>\n  <a-entity\n    id="mouseCursorMesh"\n    mixin="cursorMesh"\n    cursor-mesh="cursorEl: #mouseCursor"\n    bind__cursor-mesh="active: menuActive"\n    render-order="cursor"></a-entity>\n\n  <a-entity\n    tail="target: #leftstar"\n    render-order="weapon"\n    bind__visible="isPlaying && gameMode === \'ride\'"></a-entity>\n  <a-entity\n    tail="target: #rightstar"\n    render-order="weapon"\n    bind__visible="isPlaying && gameMode === \'ride\'"></a-entity>\n</a-scene>\n';document.addEventListener("DOMContentLoaded",(function(){let e=document.getElementById("app");e||(e=document.createElement("div"),e.id="app",document.body.appendChild(e));e.innerHTML=i}));{const t=n(222).DiffDOM;if(e.hot.accept(),e.hot.data&&e.hot.data.oldHtml){const n=e.hot.data.oldHtml,o=new t,a=document.createElement("div");a.innerHTML=n;const r=document.createElement("div");r.innerHTML=i;const s=o.diff(a.querySelector("a-scene"),r.querySelector("a-scene"));o.apply(document.querySelector("a-scene"),s)}e.hot.dispose(e=>{e.oldHtml=i})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t,n){let o;return"#text"===e.nodeName?o=n.document.createTextNode(e.data):"#comment"===e.nodeName?o=n.document.createComment(e.data):("svg"===e.nodeName||t?(o=n.document.createElementNS("http://www.w3.org/2000/svg",e.nodeName),t=!0):o=n.document.createElement(e.nodeName),e.attributes&&Object.entries(e.attributes).forEach(([e,t])=>o.setAttribute(e,t)),e.childNodes&&e.childNodes.forEach(e=>o.appendChild(i(e,t,n))),n.valueDiffing&&(e.value&&(o.value=e.value),e.checked&&(o.checked=e.checked),e.selected&&(o.selected=e.selected))),o}function o(e,t){for(t=t.slice();t.length>0;){if(!e.childNodes)return!1;const n=t.splice(0,1)[0];e=e.childNodes[n]}return e}function a(e,t,n){let a,r,s,l,c,d=o(e,t[n._const.route]);const u={diff:t,node:d};if(n.preDiffApply(u))return!0;switch(t[n._const.action]){case n._const.addAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(t[n._const.name],t[n._const.value]);break;case n._const.modifyAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(t[n._const.name],t[n._const.newValue]),"INPUT"===d.nodeName&&"value"===t[n._const.name]&&(d.value=t[n._const.oldValue]);break;case n._const.removeAttribute:if(!d||!d.removeAttribute)return!1;d.removeAttribute(t[n._const.name]);break;case n._const.modifyTextElement:if(!d||3!==d.nodeType)return!1;n.textDiff(d,d.data,t[n._const.oldValue],t[n._const.newValue]);break;case n._const.modifyValue:if(!d||void 0===d.value)return!1;d.value=t[n._const.newValue];break;case n._const.modifyComment:if(!d||void 0===d.data)return!1;n.textDiff(d,d.data,t[n._const.oldValue],t[n._const.newValue]);break;case n._const.modifyChecked:if(!d||void 0===d.checked)return!1;d.checked=t[n._const.newValue];break;case n._const.modifySelected:if(!d||void 0===d.selected)return!1;d.selected=t[n._const.newValue];break;case n._const.replaceElement:d.parentNode.replaceChild(i(t[n._const.newValue],"http://www.w3.org/2000/svg"===d.namespaceURI,n),d);break;case n._const.relocateGroup:l=Array(...new Array(t.groupLength)).map(()=>d.removeChild(d.childNodes[t[n._const.from]])),l.forEach((e,i)=>{0===i&&(r=d.childNodes[t[n._const.to]]),d.insertBefore(e,r||null)});break;case n._const.removeElement:d.parentNode.removeChild(d);break;case n._const.addElement:s=t[n._const.route].slice(),c=s.splice(s.length-1,1)[0],d=o(e,s),d.insertBefore(i(t[n._const.element],"http://www.w3.org/2000/svg"===d.namespaceURI,n),d.childNodes[c]||null);break;case n._const.removeTextElement:if(!d||3!==d.nodeType)return!1;d.parentNode.removeChild(d);break;case n._const.addTextElement:if(s=t[n._const.route].slice(),c=s.splice(s.length-1,1)[0],a=n.document.createTextNode(t[n._const.value]),d=o(e,s),!d||!d.childNodes)return!1;d.insertBefore(a,d.childNodes[c]||null);break;default:console.log("unknown action")}return u.newNode=a,n.postDiffApply(u),!0}function r(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function s(e,t,n){t.length||(t=[t]),(t=t.slice()).reverse(),t.forEach(t=>{!function(e,t,n){switch(t[n._const.action]){case n._const.addAttribute:t[n._const.action]=n._const.removeAttribute,a(e,t,n);break;case n._const.modifyAttribute:r(t,n._const.oldValue,n._const.newValue),a(e,t,n);break;case n._const.removeAttribute:t[n._const.action]=n._const.addAttribute,a(e,t,n);break;case n._const.modifyTextElement:case n._const.modifyValue:case n._const.modifyComment:case n._const.modifyChecked:case n._const.modifySelected:case n._const.replaceElement:r(t,n._const.oldValue,n._const.newValue),a(e,t,n);break;case n._const.relocateGroup:r(t,n._const.from,n._const.to),a(e,t,n);break;case n._const.removeElement:t[n._const.action]=n._const.addElement,a(e,t,n);break;case n._const.addElement:t[n._const.action]=n._const.removeElement,a(e,t,n);break;case n._const.removeTextElement:t[n._const.action]=n._const.addTextElement,a(e,t,n);break;case n._const.addTextElement:t[n._const.action]=n._const.removeTextElement,a(e,t,n);break;default:console.log("unknown action")}}(e,t,n)})}n.r(t),n.d(t,"DiffDOM",(function(){return R})),n.d(t,"TraceLogger",(function(){return w}));class l{constructor(e={}){Object.entries(e).forEach(([e,t])=>this[e]=t)}toString(){return JSON.stringify(this)}setValue(e,t){return this[e]=t,this}}function c(e){const t=[];return"#text"!==e.nodeName&&"#comment"!==e.nodeName&&(t.push(e.nodeName),e.attributes&&(e.attributes.class&&t.push(`${e.nodeName}.${e.attributes.class.replace(/ /g,".")}`),e.attributes.id&&t.push(`${e.nodeName}#${e.attributes.id}`))),t}function d(e){const t={},n={};return e.forEach(e=>{c(e).forEach(e=>{const i=e in t;i||e in n?i&&(delete t[e],n[e]=!0):t[e]=!0})}),t}function u(e,t){const n=d(e),i=d(t),o={};return Object.keys(n).forEach(e=>{i[e]&&(o[e]=!0)}),o}function h(e){return delete e.outerDone,delete e.innerDone,delete e.valueDone,!e.childNodes||e.childNodes.every(h)}function m(e,t){if(!["nodeName","value","checked","selected","data"].every(n=>e[n]===t[n]))return!1;if(Boolean(e.attributes)!==Boolean(t.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(t.childNodes))return!1;if(e.attributes){const n=Object.keys(e.attributes),i=Object.keys(t.attributes);if(n.length!==i.length)return!1;if(!n.every(n=>e.attributes[n]===t.attributes[n]))return!1}if(e.childNodes){if(e.childNodes.length!==t.childNodes.length)return!1;if(!e.childNodes.every((e,n)=>m(e,t.childNodes[n])))return!1}return!0}function p(e,t,n,i,o){if(!e||!t)return!1;if(e.nodeName!==t.nodeName)return!1;if("#text"===e.nodeName)return!!o||e.data===t.data;if(e.nodeName in n)return!0;if(e.attributes&&t.attributes){if(e.attributes.id){if(e.attributes.id!==t.attributes.id)return!1;if(`${e.nodeName}#${e.attributes.id}`in n)return!0}if(e.attributes.class&&e.attributes.class===t.attributes.class){if(`${e.nodeName}.${e.attributes.class.replace(/ /g,".")}`in n)return!0}}if(i)return!0;const a=e.childNodes?e.childNodes.slice().reverse():[],r=t.childNodes?t.childNodes.slice().reverse():[];if(a.length!==r.length)return!1;if(o)return a.every((e,t)=>e.nodeName===r[t].nodeName);{const e=u(a,r);return a.every((t,n)=>p(t,r[n],e,!0,!0))}}function A(e){return JSON.parse(JSON.stringify(e))}function f(e,t,n,i){let o=0,a=[];const r=e.length,s=t.length,l=Array(...new Array(r+1)).map(()=>[]),d=u(e,t);let h=r===s;h&&e.some((e,n)=>{const i=c(e),o=c(t[n]);return i.length!==o.length?(h=!1,!0):(i.some((e,t)=>{if(e!==o[t])return h=!1,!0}),!h||void 0)});for(let c=0;c<r;c++){const r=e[c];for(let e=0;e<s;e++){const s=t[e];n[c]||i[e]||!p(r,s,d,h)?l[c+1][e+1]=0:(l[c+1][e+1]=l[c][e]?l[c][e]+1:1,l[c+1][e+1]>=o&&(o=l[c+1][e+1],a=[c+1,e+1]))}}return 0!==o&&{oldValue:a[0]-o,newValue:a[1]-o,length:o}}function g(e,t){return Array(...new Array(e)).map(()=>t)}class b{constructor(){this.list=[]}add(e){this.list.push(...e)}forEach(e){this.list.forEach(t=>e(t))}}function y(e,t){let n,i,o=e;for(t=t.slice();t.length>0;){if(!o.childNodes)return!1;i=t.splice(0,1)[0],n=o,o=o.childNodes[i]}return{node:o,parentNode:n,nodeIndex:i}}function v(e,t,n){return t.forEach(t=>{!function(e,t,n){const i=y(e,t[n._const.route]);let o=i.node;const a=i.parentNode,r=i.nodeIndex,s=[],l={diff:t,node:o};if(n.preDiffApply(l))return!0;let c,d,u,h;switch(t[n._const.action]){case n._const.addAttribute:o.attributes||(o.attributes={}),o.attributes[t[n._const.name]]=t[n._const.value],"checked"===t[n._const.name]?o.checked=!0:"selected"===t[n._const.name]?o.selected=!0:"INPUT"===o.nodeName&&"value"===t[n._const.name]&&(o.value=t[n._const.value]);break;case n._const.modifyAttribute:o.attributes[t[n._const.name]]=t[n._const.newValue];break;case n._const.removeAttribute:delete o.attributes[t[n._const.name]],0===Object.keys(o.attributes).length&&delete o.attributes,"checked"===t[n._const.name]?o.checked=!1:"selected"===t[n._const.name]?delete o.selected:"INPUT"===o.nodeName&&"value"===t[n._const.name]&&delete o.value;break;case n._const.modifyTextElement:o.data=t[n._const.newValue];break;case n._const.modifyValue:o.value=t[n._const.newValue];break;case n._const.modifyComment:o.data=t[n._const.newValue];break;case n._const.modifyChecked:o.checked=t[n._const.newValue];break;case n._const.modifySelected:o.selected=t[n._const.newValue];break;case n._const.replaceElement:c=A(t[n._const.newValue]),c.outerDone=!0,c.innerDone=!0,c.valueDone=!0,a.childNodes[r]=c;break;case n._const.relocateGroup:d=o.childNodes.splice(t[n._const.from],t.groupLength).reverse(),d.forEach(e=>o.childNodes.splice(t[n._const.to],0,e)),o.subsets&&o.subsets.forEach(e=>{if(t[n._const.from]<t[n._const.to]&&e.oldValue<=t[n._const.to]&&e.oldValue>t[n._const.from]){e.oldValue-=t.groupLength;const i=e.oldValue+e.length-t[n._const.to];i>0&&(s.push({oldValue:t[n._const.to]+t.groupLength,newValue:e.newValue+e.length-i,length:i}),e.length-=i)}else if(t[n._const.from]>t[n._const.to]&&e.oldValue>t[n._const.to]&&e.oldValue<t[n._const.from]){e.oldValue+=t.groupLength;const i=e.oldValue+e.length-t[n._const.to];i>0&&(s.push({oldValue:t[n._const.to]+t.groupLength,newValue:e.newValue+e.length-i,length:i}),e.length-=i)}else e.oldValue===t[n._const.from]&&(e.oldValue=t[n._const.to])});break;case n._const.removeElement:a.childNodes.splice(r,1),a.subsets&&a.subsets.forEach(e=>{e.oldValue>r?e.oldValue-=1:e.oldValue===r?e.delete=!0:e.oldValue<r&&e.oldValue+e.length>r&&(e.oldValue+e.length-1===r?e.length--:(s.push({newValue:e.newValue+r-e.oldValue,oldValue:r,length:e.length-r+e.oldValue-1}),e.length=r-e.oldValue))}),o=a;break;case n._const.addElement:u=t[n._const.route].slice(),h=u.splice(u.length-1,1)[0],o=y(e,u).node,c=A(t[n._const.element]),c.outerDone=!0,c.innerDone=!0,c.valueDone=!0,o.childNodes||(o.childNodes=[]),h>=o.childNodes.length?o.childNodes.push(c):o.childNodes.splice(h,0,c),o.subsets&&o.subsets.forEach(e=>{if(e.oldValue>=h)e.oldValue+=1;else if(e.oldValue<h&&e.oldValue+e.length>h){const t=e.oldValue+e.length-h;s.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}});break;case n._const.removeTextElement:a.childNodes.splice(r,1),"TEXTAREA"===a.nodeName&&delete a.value,a.subsets&&a.subsets.forEach(e=>{e.oldValue>r?e.oldValue-=1:e.oldValue===r?e.delete=!0:e.oldValue<r&&e.oldValue+e.length>r&&(e.oldValue+e.length-1===r?e.length--:(s.push({newValue:e.newValue+r-e.oldValue,oldValue:r,length:e.length-r+e.oldValue-1}),e.length=r-e.oldValue))}),o=a;break;case n._const.addTextElement:u=t[n._const.route].slice(),h=u.splice(u.length-1,1)[0],c={},c.nodeName="#text",c.data=t[n._const.value],o=y(e,u).node,o.childNodes||(o.childNodes=[]),h>=o.childNodes.length?o.childNodes.push(c):o.childNodes.splice(h,0,c),"TEXTAREA"===o.nodeName&&(o.value=t[n._const.newValue]),o.subsets&&o.subsets.forEach(e=>{if(e.oldValue>=h&&(e.oldValue+=1),e.oldValue<h&&e.oldValue+e.length>h){const t=e.oldValue+e.length-h;s.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}});break;default:console.log("unknown action")}o.subsets&&(o.subsets=o.subsets.filter(e=>!e.delete&&e.oldValue!==e.newValue),s.length&&(o.subsets=o.subsets.concat(s))),l.newNode=c,n.postDiffApply(l)}(e,t,n)}),!0}function E(e,t){const n={};if(n.nodeName=e.nodeName,"#text"===n.nodeName||"#comment"===n.nodeName)n.data=e.data;else{if(e.attributes&&e.attributes.length>0){n.attributes={};Array.prototype.slice.call(e.attributes).forEach(e=>n.attributes[e.name]=e.value)}if("TEXTAREA"===n.nodeName)n.value=e.value;else if(e.childNodes&&e.childNodes.length>0){n.childNodes=[];Array.prototype.slice.call(e.childNodes).forEach(e=>n.childNodes.push(E(e,t)))}t.valueDiffing&&(void 0!==e.checked&&e.type&&["radio","checkbox"].includes(e.type.toLowerCase())?n.checked=e.checked:void 0!==e.value&&(n.value=e.value),void 0!==e.selected&&(n.selected=e.selected))}return n}class x{constructor(e,t,n){this.options=n,this.t1=E(e,this.options),this.t2=E(t,this.options),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=E(e,this.options),this.t2Orig=E(t,this.options)),this.tracker=new b}init(){return this.findDiffs(this.t1,this.t2)}findDiffs(e,t){let n;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw window.diffError=[this.t1Orig,this.t2Orig],new Error(`surpassed diffcap:${JSON.stringify(this.t1Orig)} -> ${JSON.stringify(this.t2Orig)}`);n=this.findNextDiff(e,t,[]),0===n.length&&(m(e,t)||(this.foundAll?(console.error("Could not find remaining diffs!"),console.log({t1:e,t2:t})):(this.foundAll=!0,h(e),n=this.findNextDiff(e,t,[])))),n.length>0&&(this.foundAll=!1,this.tracker.add(n),v(e,n,this.options))}while(n.length>0);return this.tracker.list}findNextDiff(e,t,n){let i,o;if(this.options.maxDepth&&n.length>this.options.maxDepth)return[];if(!e.outerDone){if(i=this.findOuterDiff(e,t,n),this.filterOuterDiff&&(o=this.filterOuterDiff(e,t,i),o&&(i=o)),i.length>0)return e.outerDone=!0,i;e.outerDone=!0}if(!e.innerDone){if(i=this.findInnerDiff(e,t,n),i.length>0)return i;e.innerDone=!0}if(this.options.valueDiffing&&!e.valueDone){if(i=this.findValueDiff(e,t,n),i.length>0)return e.valueDone=!0,i;e.valueDone=!0}return[]}findOuterDiff(e,t,n){const i=[];let o,a,r,s,c,d;if(e.nodeName!==t.nodeName)return[(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,A(e)).setValue(this.options._const.newValue,A(t)).setValue(this.options._const.route,n)];if(n.length&&this.options.maxChildCount&&e.childNodes&&t.childNodes&&e.childNodes.length>this.options.maxChildCount&&t.childNodes.length>this.options.maxChildCount){const i=e.childNodes.length<t.childNodes.length?e.childNodes.length:t.childNodes.length;let o=0,a=0;for(;o<this.options.maxChildDiffCount&&a<i;)m(e.childNodes[a],t.childNodes[a])||o++,a++;if(o===this.options.maxChildDiffCount)return[(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,A(e)).setValue(this.options._const.newValue,A(t)).setValue(this.options._const.route,n)]}if(e.data!==t.data)return"#text"===e.nodeName?[(new l).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[(new l).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(a=e.attributes?Object.keys(e.attributes).sort():[],r=t.attributes?Object.keys(t.attributes).sort():[],s=a.length,d=0;d<s;d++)o=a[d],c=r.indexOf(o),-1===c?i.push((new l).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,o).setValue(this.options._const.value,e.attributes[o])):(r.splice(c,1),e.attributes[o]!==t.attributes[o]&&i.push((new l).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,o).setValue(this.options._const.oldValue,e.attributes[o]).setValue(this.options._const.newValue,t.attributes[o])));for(s=r.length,d=0;d<s;d++)o=r[d],i.push((new l).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,o).setValue(this.options._const.value,t.attributes[o]));return i}findInnerDiff(e,t,n){const i=e.subsets&&e.subsetsAge--?e.subsets:e.childNodes&&t.childNodes?function(e,t){const n=e.childNodes?e.childNodes:[],i=t.childNodes?t.childNodes:[],o=g(n.length,!1),a=g(i.length,!1),r=[];let s=!0;const l=function(){return arguments[1]},c=e=>{o[s.oldValue+e]=!0,a[s.newValue+e]=!0};for(;s;)if(s=f(n,i,o,a),s){r.push(s);Array(...new Array(s.length)).map(l).forEach(e=>c(e))}return e.subsets=r,e.subsetsAge=100,r}(e,t):[],o=e.childNodes?e.childNodes:[],a=t.childNodes?t.childNodes:[];let r,s=[],c=0;if(i.length>0&&(s=this.attemptGroupRelocation(e,t,i,n),s.length>0))return s;const d=Math.max(o.length,a.length);o.length!==a.length&&(r=!0);for(let e=0;e<d;e+=1){const t=o[e],i=a[e];r&&(t&&!i?"#text"===t.nodeName?(s.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(c)).setValue(this.options._const.value,t.data)),c-=1):(s.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(c)).setValue(this.options._const.element,A(t))),c-=1):i&&!t&&("#text"===i.nodeName?s.push((new l).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(c)).setValue(this.options._const.value,i.data)):s.push((new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(c)).setValue(this.options._const.element,A(i))))),t&&i&&(s=s.concat(this.findNextDiff(t,i,n.concat(c)))),c+=1}return e.innerDone=!0,s}attemptGroupRelocation(e,t,n,i){const o=function(e,t,n){const i=e.childNodes?g(e.childNodes.length,!0):[],o=t.childNodes?g(t.childNodes.length,!0):[];let a=0;return n.forEach(e=>{const t=e.oldValue+e.length,n=e.newValue+e.length;for(let n=e.oldValue;n<t;n+=1)i[n]=a;for(let t=e.newValue;t<n;t+=1)o[t]=a;a+=1}),{gaps1:i,gaps2:o}}(e,t,n),a=o.gaps1,r=o.gaps2;let s,c,d,u,h,m,f=Math.min(a.length,r.length);const b=[];for(let o=0,g=0;o<f;g+=1,o+=1)if(!0===a[o])if(u=e.childNodes[g],"#text"===u.nodeName){if("#text"===t.childNodes[o].nodeName&&u.data!==t.childNodes[o].data){for(m=g;e.childNodes.length>m+1&&"#text"===e.childNodes[m+1].nodeName;)if(m+=1,t.childNodes[o].data===e.childNodes[m].data){h=!0;break}if(!h)return b.push((new l).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,i.concat(o)).setValue(this.options._const.oldValue,u.data).setValue(this.options._const.newValue,t.childNodes[o].data)),b}b.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,i.concat(o)).setValue(this.options._const.value,u.data)),a.splice(o,1),f=Math.min(a.length,r.length),o-=1}else b.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,i.concat(o)).setValue(this.options._const.element,A(u))),a.splice(o,1),f=Math.min(a.length,r.length),o-=1;else if(!0===r[o])u=t.childNodes[o],"#text"===u.nodeName?(b.push((new l).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,i.concat(o)).setValue(this.options._const.value,u.data)),a.splice(o,0,!0),f=Math.min(a.length,r.length),g-=1):(b.push((new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,i.concat(o)).setValue(this.options._const.element,A(u))),a.splice(o,0,!0),f=Math.min(a.length,r.length),g-=1);else if(a[o]!==r[o]){if(b.length>0)return b;if(d=n[a[o]],c=Math.min(d.newValue,e.childNodes.length-d.length),c!==d.oldValue){s=!1;for(let t=0;t<d.length;t+=1)p(e.childNodes[c+t],e.childNodes[d.oldValue+t],[],!1,!0)||(s=!0);if(s)return[(new l).setValue(this.options._const.action,this.options._const.relocateGroup).setValue("groupLength",d.length).setValue(this.options._const.from,d.oldValue).setValue(this.options._const.to,c).setValue(this.options._const.route,i)]}}return b}findValueDiff(e,t,n){const i=[];return e.selected!==t.selected&&i.push((new l).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,n)),(e.value||t.value)&&e.value!==t.value&&"OPTION"!==e.nodeName&&i.push((new l).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||"").setValue(this.options._const.newValue,t.value||"").setValue(this.options._const.route,n)),e.checked!==t.checked&&i.push((new l).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,n)),i}}const S={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,maxChildDiffCount:3,valueDiffing:!0,textDiff(e,t,n,i){e.data=i},preVirtualDiffApply(){},postVirtualDiffApply(){},preDiffApply(){},postDiffApply(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(!window||!window.document)&&window.document};class R{constructor(e={}){if(this.options=e,Object.entries(S).forEach(([e,t])=>{Object.prototype.hasOwnProperty.call(this.options,e)||(this.options[e]=t)}),!this.options._const){const e=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"];this.options._const={},this.options.compress?e.forEach((e,t)=>this.options._const[e]=t):e.forEach(e=>this.options._const[e]=e)}this.DiffFinder=x}apply(e,t){return function(e,t,n){return t.every(t=>a(e,t,n))}(e,t,this.options)}undo(e,t){return s(e,t,this.options)}diff(e,t){return new this.DiffFinder(e,t,this.options).init()}}class w{constructor(e={}){this.pad="   ",this.padding="",this.tick=1,this.messages=[];const t=(e,t)=>{const n=e[t];e[t]=(...i)=>{this.fin(t,Array.prototype.slice.call(i));const o=n.apply(e,i);return this.fout(t,o),o}};for(let n in e)"function"==typeof e[n]&&t(e,n);this.log(" TRACELOG START")}fin(e,t){this.padding+=this.pad,this.log("> entering "+e,t)}fout(e,t){this.log("< generated return value",t),this.padding=this.padding.substring(0,this.padding.length-this.pad.length)}format(e,t){return`${function(e){for(e=""+e;e.length<4;)e="0"+e;return e}(t)}> ${this.padding}${e}`}log(){let e=Array.prototype.slice.call(arguments);const t=function(e){return e?"string"==typeof e?e:e instanceof HTMLElement?e.outerHTML||"<empty>":e instanceof Array?`[${e.map(t).join(",")}]`:e.toString()||e.valueOf()||"<unknown>":"<falsey>"};e=e.map(t).join(", "),this.messages.push(this.format(e,this.tick++))}toString(){let e="";for(;e.length<=this.padding.length+this.pad.length;)e+="   ";let t=this.padding;return this.padding="",e=this.format(e,this.tick),this.padding=t,`${this.messages.join("\n")}\n${e}`}}}]);